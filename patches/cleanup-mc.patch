diff -crB src/com/mojang/minecraft/Entity.java src2/com/mojang/minecraft/Entity.java
*** src/com/mojang/minecraft/Entity.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/Entity.java	2013-03-05 16:28:38.758687000 -0800
***************
*** 63,72 ****
  
     public void resetPos() {
        if(this.level != null) {
!          float var1 = (float)this.level.xSpawn + 0.5F;
!          float var2 = (float)this.level.ySpawn;
  
!          for(float var3 = (float)this.level.zSpawn + 0.5F; var2 > 0.0F; ++var2) {
              this.setPos(var1, var2, var3);
              if(this.level.getCubes(this.bb).size() == 0) {
                 break;
--- 63,72 ----
  
     public void resetPos() {
        if(this.level != null) {
!          float var1 = this.level.xSpawn + 0.5F;
!          float var2 = this.level.ySpawn;
  
!          for(float var3 = this.level.zSpawn + 0.5F; var2 > 0.0F; ++var2) {
              this.setPos(var1, var2, var3);
              if(this.level.getCubes(this.bb).size() == 0) {
                 break;
***************
*** 119,126 ****
     public void turn(float var1, float var2) {
        float var3 = this.xRot;
        float var4 = this.yRot;
!       this.yRot = (float)((double)this.yRot + (double)var1 * 0.15D);
!       this.xRot = (float)((double)this.xRot - (double)var2 * 0.15D);
        if(this.xRot < -90.0F) {
           this.xRot = -90.0F;
        }
--- 119,126 ----
     public void turn(float var1, float var2) {
        float var3 = this.xRot;
        float var4 = this.yRot;
!       this.yRot = (float)(this.yRot + var1 * 0.15D);
!       this.xRot = (float)(this.xRot - var2 * 0.15D);
        if(this.xRot < -90.0F) {
           this.xRot = -90.0F;
        }
***************
*** 134,141 ****
     }
  
     public void interpolateTurn(float var1, float var2) {
!       this.yRot = (float)((double)this.yRot + (double)var1 * 0.15D);
!       this.xRot = (float)((double)this.xRot - (double)var2 * 0.15D);
        if(this.xRot < -90.0F) {
           this.xRot = -90.0F;
        }
--- 134,141 ----
     }
  
     public void interpolateTurn(float var1, float var2) {
!       this.yRot = (float)(this.yRot + var1 * 0.15D);
!       this.xRot = (float)(this.xRot - var2 * 0.15D);
        if(this.xRot < -90.0F) {
           this.xRot = -90.0F;
        }
***************
*** 178,187 ****
           float var7 = var2;
           float var8 = var3;
           AABB var9 = this.bb.copy();
!          ArrayList var10 = this.level.getCubes(this.bb.expand(var1, var2, var3));
  
           for(int var11 = 0; var11 < var10.size(); ++var11) {
!             var2 = ((AABB)var10.get(var11)).clipYCollide(this.bb, var2);
           }
  
           this.bb.move(0.0F, var2, 0.0F);
--- 178,187 ----
           float var7 = var2;
           float var8 = var3;
           AABB var9 = this.bb.copy();
!          ArrayList<AABB> var10 = this.level.getCubes(this.bb.expand(var1, var2, var3));
  
           for(int var11 = 0; var11 < var10.size(); ++var11) {
!             var2 = var10.get(var11).clipYCollide(this.bb, var2);
           }
  
           this.bb.move(0.0F, var2, 0.0F);
***************
*** 195,201 ****
  
           int var12;
           for(var12 = 0; var12 < var10.size(); ++var12) {
!             var1 = ((AABB)var10.get(var12)).clipXCollide(this.bb, var1);
           }
  
           this.bb.move(var1, 0.0F, 0.0F);
--- 195,201 ----
  
           int var12;
           for(var12 = 0; var12 < var10.size(); ++var12) {
!             var1 = var10.get(var12).clipXCollide(this.bb, var1);
           }
  
           this.bb.move(var1, 0.0F, 0.0F);
***************
*** 206,212 ****
           }
  
           for(var12 = 0; var12 < var10.size(); ++var12) {
!             var3 = ((AABB)var10.get(var12)).clipZCollide(this.bb, var3);
           }
  
           this.bb.move(0.0F, 0.0F, var3);
--- 206,212 ----
           }
  
           for(var12 = 0; var12 < var10.size(); ++var12) {
!             var3 = var10.get(var12).clipZCollide(this.bb, var3);
           }
  
           this.bb.move(0.0F, 0.0F, var3);
***************
*** 231,237 ****
  
              int var15;
              for(var15 = 0; var15 < var10.size(); ++var15) {
!                var2 = ((AABB)var10.get(var15)).clipYCollide(this.bb, var2);
              }
  
              this.bb.move(0.0F, var2, 0.0F);
--- 231,237 ----
  
              int var15;
              for(var15 = 0; var15 < var10.size(); ++var15) {
!                var2 = var10.get(var15).clipYCollide(this.bb, var2);
              }
  
              this.bb.move(0.0F, var2, 0.0F);
***************
*** 242,248 ****
              }
  
              for(var15 = 0; var15 < var10.size(); ++var15) {
!                var1 = ((AABB)var10.get(var15)).clipXCollide(this.bb, var1);
              }
  
              this.bb.move(var1, 0.0F, 0.0F);
--- 242,248 ----
              }
  
              for(var15 = 0; var15 < var10.size(); ++var15) {
!                var1 = var10.get(var15).clipXCollide(this.bb, var1);
              }
  
              this.bb.move(var1, 0.0F, 0.0F);
***************
*** 253,259 ****
              }
  
              for(var15 = 0; var15 < var10.size(); ++var15) {
!                var3 = ((AABB)var10.get(var15)).clipZCollide(this.bb, var3);
              }
  
              this.bb.move(0.0F, 0.0F, var3);
--- 253,259 ----
              }
  
              for(var15 = 0; var15 < var10.size(); ++var15) {
!                var3 = var10.get(var15).clipZCollide(this.bb, var3);
              }
  
              this.bb.move(0.0F, 0.0F, var3);
***************
*** 269,275 ****
                 var3 = var13;
                 this.bb = var14.copy();
              } else {
!                this.ySlideOffset = (float)((double)this.ySlideOffset + 0.5D);
              }
           }
  
--- 269,275 ----
                 var3 = var13;
                 this.bb = var14.copy();
              } else {
!                this.ySlideOffset = (float)(this.ySlideOffset + 0.5D);
              }
           }
  
***************
*** 302,311 ****
           this.z = (this.bb.z0 + this.bb.z1) / 2.0F;
           var18 = this.x - var4;
           var17 = this.z - var5;
!          this.walkDist = (float)((double)this.walkDist + (double)MathHelper.sqrt(var18 * var18 + var17 * var17) * 0.6D);
           if(this.makeStepSound) {
              int var19 = this.level.getTile((int)this.x, (int)(this.y - 0.2F - this.heightOffset), (int)this.z);
!             if(this.walkDist > (float)this.nextStep && var19 > 0) {
                 ++this.nextStep;
                 Tile$SoundType var20;
                 if((var20 = Block.blocks[var19].stepsound) != Tile$SoundType.none) {
--- 302,311 ----
           this.z = (this.bb.z0 + this.bb.z1) / 2.0F;
           var18 = this.x - var4;
           var17 = this.z - var5;
!          this.walkDist = (float)(this.walkDist + MathHelper.sqrt(var18 * var18 + var17 * var17) * 0.6D);
           if(this.makeStepSound) {
              int var19 = this.level.getTile((int)this.x, (int)(this.y - 0.2F - this.heightOffset), (int)this.z);
!             if(this.walkDist > this.nextStep && var19 > 0) {
                 ++this.nextStep;
                 Tile$SoundType var20;
                 if((var20 = Block.blocks[var19].stepsound) != Tile$SoundType.none) {
diff -crB src/com/mojang/minecraft/gamemode/CreativeGameMode.java src2/com/mojang/minecraft/gamemode/CreativeGameMode.java
*** src/com/mojang/minecraft/gamemode/CreativeGameMode.java	2013-03-05 19:00:56.000000000 -0800
--- src2/com/mojang/minecraft/gamemode/CreativeGameMode.java	2013-03-05 17:28:47.766803000 -0800
***************
*** 5,11 ****
  import com.mojang.minecraft.gamemode.GameMode;
  import com.mojang.minecraft.gui.BlockSelectScreen;
  import com.mojang.minecraft.level.Level;
- import com.mojang.minecraft.level.tile.Block;
  import com.mojang.minecraft.player.Player;
  
  public final class CreativeGameMode extends GameMode {
--- 5,10 ----
***************
*** 30,36 ****
        for(int var2 = 0; var2 < 9; ++var2) {
           var1.inventory.count[var2] = 1;
           if(var1.inventory.slots[var2] <= 0) {
!             var1.inventory.slots[var2] = ((Block)SessionData.allowedBlocks.get(var2)).id;
           }
        }
  
--- 29,35 ----
        for(int var2 = 0; var2 < 9; ++var2) {
           var1.inventory.count[var2] = 1;
           if(var1.inventory.slots[var2] <= 0) {
!             var1.inventory.slots[var2] = SessionData.allowedBlocks.get(var2).id;
           }
        }
  
diff -crB src/com/mojang/minecraft/gamemode/GameMode.java src2/com/mojang/minecraft/gamemode/GameMode.java
*** src/com/mojang/minecraft/gamemode/GameMode.java	2013-03-05 19:00:56.000000000 -0800
--- src2/com/mojang/minecraft/gamemode/GameMode.java	2013-03-05 17:28:17.790802000 -0800
***************
*** 41,47 ****
           }
  
           if(var5.stepsound != Tile$SoundType.none) {
!             var4.playSound("step." + var5.stepsound.name, (float)var1, (float)var2, (float)var3, (var5.stepsound.getVolume() + 1.0F) / 2.0F, var5.stepsound.getPitch() * 0.8F);
           }
  
           var5.spawnBreakParticles(var4, var1, var2, var3, this.minecraft.particleManager);
--- 41,47 ----
           }
  
           if(var5.stepsound != Tile$SoundType.none) {
!             var4.playSound("step." + var5.stepsound.name, var1, var2, var3, (var5.stepsound.getVolume() + 1.0F) / 2.0F, var5.stepsound.getPitch() * 0.8F);
           }
  
           var5.spawnBreakParticles(var4, var1, var2, var3, this.minecraft.particleManager);
diff -crB src/com/mojang/minecraft/gamemode/SurvivalGameMode.java src2/com/mojang/minecraft/gamemode/SurvivalGameMode.java
*** src/com/mojang/minecraft/gamemode/SurvivalGameMode.java	2013-03-05 19:00:56.000000000 -0800
--- src2/com/mojang/minecraft/gamemode/SurvivalGameMode.java	2013-03-05 17:28:17.502802000 -0800
***************
*** 1,6 ****
--- 1,7 ----
  package com.mojang.minecraft.gamemode;
  
  import com.mojang.minecraft.Entity;
+ import com.mojang.minecraft.Minecraft;
  import com.mojang.minecraft.ProgressBarDisplay;
  import com.mojang.minecraft.gamemode.GameMode;
  import com.mojang.minecraft.level.Level;
***************
*** 19,24 ****
--- 20,28 ----
     private int hitDelay;
     private MobSpawner spawner;
  
+    public SurvivalGameMode(Minecraft var1) {
+ 		super(var1);
+    }
  
     public final void preparePlayer(Player var1) {
        var1.inventory.slots[8] = Block.TNT.id;
***************
*** 77,83 ****
        if(this.hits <= 0) {
           this.minecraft.levelRenderer.cracks = 0.0F;
        } else {
!          this.minecraft.levelRenderer.cracks = ((float)this.hits + var1 - 1.0F) / (float)this.hardness;
        }
     }
  
--- 81,87 ----
        if(this.hits <= 0) {
           this.minecraft.levelRenderer.cracks = 0.0F;
        } else {
!          this.minecraft.levelRenderer.cracks = (this.hits + var1 - 1.0F) / this.hardness;
        }
     }
  
***************
*** 114,120 ****
  
     public final void prepareLevel(Level var1) {
        this.spawner = new MobSpawner(var1);
!       (this = this).minecraft.progressBar.setText("Spawning..");
        int var2 = var1.width * var1.height * var1.depth / 800;
        this.spawner.spawn(var2, (Entity)null, this.minecraft.progressBar);
     }
--- 118,124 ----
  
     public final void prepareLevel(Level var1) {
        this.spawner = new MobSpawner(var1);
!       this.minecraft.progressBar.setText("Spawning..");
        int var2 = var1.width * var1.height * var1.depth / 800;
        this.spawner.spawn(var2, (Entity)null, this.minecraft.progressBar);
     }
diff -crB src/com/mojang/minecraft/GameSettings.java src2/com/mojang/minecraft/GameSettings.java
*** src/com/mojang/minecraft/GameSettings.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/GameSettings.java	2013-03-05 17:31:15.230807000 -0800
***************
*** 86,105 ****
        if(var1 == 6) {
           this.anaglyph = !this.anaglyph;
           TextureManager var7 = this.minecraft.textureManager;
!          Iterator var3 = this.minecraft.textureManager.textureImages.keySet().iterator();
  
           int var4;
           BufferedImage var5;
           while(var3.hasNext()) {
!             var4 = ((Integer)var3.next()).intValue();
!             var5 = (BufferedImage)var7.textureImages.get(Integer.valueOf(var4));
              var7.load(var5, var4);
           }
  
!          var3 = var7.textures.keySet().iterator();
  
           while(var3.hasNext()) {
!             String var8 = (String)var3.next();
  
              try {
                 if(var8.startsWith("##")) {
--- 86,105 ----
        if(var1 == 6) {
           this.anaglyph = !this.anaglyph;
           TextureManager var7 = this.minecraft.textureManager;
!          Iterator<Integer> var3 = this.minecraft.textureManager.textureImages.keySet().iterator();
  
           int var4;
           BufferedImage var5;
           while(var3.hasNext()) {
!             var4 = var3.next().intValue();
!             var5 = var7.textureImages.get(Integer.valueOf(var4));
              var7.load(var5, var4);
           }
  
!          Iterator<String> var9 = var7.textures.keySet().iterator();
  
           while(var3.hasNext()) {
!             String var8 = var9.next();
  
              try {
                 if(var8.startsWith("##")) {
***************
*** 108,114 ****
                    var5 = ImageIO.read(TextureManager.class.getResourceAsStream(var8));
                 }
  
!                var4 = ((Integer)var7.textures.get(var8)).intValue();
                 var7.load(var5, var4);
              } catch (IOException var6) {
                 var6.printStackTrace();
--- 108,114 ----
                    var5 = ImageIO.read(TextureManager.class.getResourceAsStream(var8));
                 }
  
!                var4 = var7.textures.get(var8).intValue();
                 var7.load(var5, var4);
              } catch (IOException var6) {
                 var6.printStackTrace();
diff -crB src/com/mojang/minecraft/gui/BlockSelectScreen.java src2/com/mojang/minecraft/gui/BlockSelectScreen.java
*** src/com/mojang/minecraft/gui/BlockSelectScreen.java	2013-03-05 19:00:56.000000000 -0800
--- src2/com/mojang/minecraft/gui/BlockSelectScreen.java	2013-03-05 17:28:17.930802000 -0800
***************
*** 41,51 ****
        GL11.glBindTexture(3553, var2);
  
        for(var2 = 0; var2 < SessionData.allowedBlocks.size(); ++var2) {
!          Block var4 = (Block)SessionData.allowedBlocks.get(var2);
           GL11.glPushMatrix();
           int var5 = this.width / 2 + var2 % 9 * 24 + -108;
           int var6 = this.height / 2 + var2 / 9 * 24 + -60;
!          GL11.glTranslatef((float)var5, (float)var6, 0.0F);
           GL11.glScalef(10.0F, 10.0F, 10.0F);
           GL11.glTranslatef(1.0F, 0.5F, 8.0F);
           GL11.glRotatef(-30.0F, 1.0F, 0.0F, 0.0F);
--- 41,51 ----
        GL11.glBindTexture(3553, var2);
  
        for(var2 = 0; var2 < SessionData.allowedBlocks.size(); ++var2) {
!          Block var4 = SessionData.allowedBlocks.get(var2);
           GL11.glPushMatrix();
           int var5 = this.width / 2 + var2 % 9 * 24 + -108;
           int var6 = this.height / 2 + var2 / 9 * 24 + -60;
!          GL11.glTranslatef(var5, var6, 0.0F);
           GL11.glScalef(10.0F, 10.0F, 10.0F);
           GL11.glTranslatef(1.0F, 0.5F, 8.0F);
           GL11.glRotatef(-30.0F, 1.0F, 0.0F, 0.0F);
diff -crB src/com/mojang/minecraft/gui/ControlsScreen.java src2/com/mojang/minecraft/gui/ControlsScreen.java
*** src/com/mojang/minecraft/gui/ControlsScreen.java	2013-03-05 19:00:56.000000000 -0800
--- src2/com/mojang/minecraft/gui/ControlsScreen.java	2013-03-05 17:28:17.822802000 -0800
***************
*** 28,34 ****
  
     protected final void onButtonClick(Button var1) {
        for(int var2 = 0; var2 < this.settings.bindings.length; ++var2) {
!          ((Button)this.buttons.get(var2)).text = this.settings.getBinding(var2);
        }
  
        if(var1.id == 200) {
--- 28,34 ----
  
     protected final void onButtonClick(Button var1) {
        for(int var2 = 0; var2 < this.settings.bindings.length; ++var2) {
!          this.buttons.get(var2).text = this.settings.getBinding(var2);
        }
  
        if(var1.id == 200) {
***************
*** 42,48 ****
     protected final void onKeyPress(char var1, int var2) {
        if(this.selected >= 0) {
           this.settings.setBinding(this.selected, var2);
!          ((Button)this.buttons.get(this.selected)).text = this.settings.getBinding(this.selected);
           this.selected = -1;
        } else {
           super.onKeyPress(var1, var2);
--- 42,48 ----
     protected final void onKeyPress(char var1, int var2) {
        if(this.selected >= 0) {
           this.settings.setBinding(this.selected, var2);
!          this.buttons.get(this.selected).text = this.settings.getBinding(this.selected);
           this.selected = -1;
        } else {
           super.onKeyPress(var1, var2);
diff -crB src/com/mojang/minecraft/gui/FontRenderer.java src2/com/mojang/minecraft/gui/FontRenderer.java
*** src/com/mojang/minecraft/gui/FontRenderer.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/gui/FontRenderer.java	2013-03-05 17:28:17.958802000 -0800
***************
*** 95,102 ****
                    var11 = (var4 * 30 + var11 * 70) / 100;
                    var10 = (var4 * 30 + var10 * 70) / 100;
                    var4 = var9;
-                   var11 = var11;
-                   var10 = var10;
                 }
  
                 var4 = var4 << 16 | var11 << 8 | var10;
--- 95,100 ----
***************
*** 111,120 ****
              var4 = var12[var8] % 16 << 3;
              var9 = var12[var8] / 16 << 3;
              float var13 = 7.99F;
!             var6.vertexUV((float)(var2 + var7), (float)var3 + var13, 0.0F, (float)var4 / 128.0F, ((float)var9 + var13) / 128.0F);
!             var6.vertexUV((float)(var2 + var7) + var13, (float)var3 + var13, 0.0F, ((float)var4 + var13) / 128.0F, ((float)var9 + var13) / 128.0F);
!             var6.vertexUV((float)(var2 + var7) + var13, (float)var3, 0.0F, ((float)var4 + var13) / 128.0F, (float)var9 / 128.0F);
!             var6.vertexUV((float)(var2 + var7), (float)var3, 0.0F, (float)var4 / 128.0F, (float)var9 / 128.0F);
              var7 += this.widthmap[var12[var8]];
           }
  
--- 109,118 ----
              var4 = var12[var8] % 16 << 3;
              var9 = var12[var8] / 16 << 3;
              float var13 = 7.99F;
!             var6.vertexUV(var2 + var7, var3 + var13, 0.0F, var4 / 128.0F, (var9 + var13) / 128.0F);
!             var6.vertexUV(var2 + var7 + var13, var3 + var13, 0.0F, (var4 + var13) / 128.0F, (var9 + var13) / 128.0F);
!             var6.vertexUV(var2 + var7 + var13, var3, 0.0F, (var4 + var13) / 128.0F, var9 / 128.0F);
!             var6.vertexUV(var2 + var7, var3, 0.0F, var4 / 128.0F, var9 / 128.0F);
              var7 += this.widthmap[var12[var8]];
           }
  
diff -crB src/com/mojang/minecraft/gui/GameOverScreen.java src2/com/mojang/minecraft/gui/GameOverScreen.java
*** src/com/mojang/minecraft/gui/GameOverScreen.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/gui/GameOverScreen.java	2013-03-05 17:28:17.966802000 -0800
***************
*** 14,20 ****
        this.buttons.add(new Button(1, this.width / 2 - 100, this.height / 4 + 72, "Generate new level..."));
        this.buttons.add(new Button(2, this.width / 2 - 100, this.height / 4 + 96, "Load level.."));
        if(this.minecraft.session == null) {
!          ((Button)this.buttons.get(2)).active = false;
        }
  
     }
--- 14,20 ----
        this.buttons.add(new Button(1, this.width / 2 - 100, this.height / 4 + 72, "Generate new level..."));
        this.buttons.add(new Button(2, this.width / 2 - 100, this.height / 4 + 96, "Load level.."));
        if(this.minecraft.session == null) {
!          this.buttons.get(2).active = false;
        }
  
     }
diff -crB src/com/mojang/minecraft/gui/GuiScreen.java src2/com/mojang/minecraft/gui/GuiScreen.java
*** src/com/mojang/minecraft/gui/GuiScreen.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/gui/GuiScreen.java	2013-03-05 17:11:37.770770000 -0800
***************
*** 15,28 ****
     protected Minecraft minecraft;
     protected int width;
     protected int height;
!    protected List buttons = new ArrayList();
     public boolean grabsMouse = false;
     protected FontRenderer fontRenderer;
  
  
     public void render(int var1, int var2) {
        for(int var3 = 0; var3 < this.buttons.size(); ++var3) {
!          Button var10000 = (Button)this.buttons.get(var3);
           Minecraft var7 = this.minecraft;
           Button var4 = var10000;
           if(var10000.visible) {
--- 15,28 ----
     protected Minecraft minecraft;
     protected int width;
     protected int height;
!    protected List<Button> buttons = new ArrayList<Button>();
     public boolean grabsMouse = false;
     protected FontRenderer fontRenderer;
  
  
     public void render(int var1, int var2) {
        for(int var3 = 0; var3 < this.buttons.size(); ++var3) {
!          Button var10000 = this.buttons.get(var3);
           Minecraft var7 = this.minecraft;
           Button var4 = var10000;
           if(var10000.visible) {
***************
*** 64,70 ****
           for(var3 = 0; var3 < this.buttons.size(); ++var3) {
              Button var4;
              Button var7;
!             if((var7 = var4 = (Button)this.buttons.get(var3)).active && var1 >= var7.x && var2 >= var7.y && var1 < var7.x + var7.width && var2 < var7.y + var7.height) {
                 this.onButtonClick(var4);
              }
           }
--- 64,70 ----
           for(var3 = 0; var3 < this.buttons.size(); ++var3) {
              Button var4;
              Button var7;
!             if((var7 = var4 = this.buttons.get(var3)).active && var1 >= var7.x && var2 >= var7.y && var1 < var7.x + var7.width && var2 < var7.y + var7.height) {
                 this.onButtonClick(var4);
              }
           }
diff -crB src/com/mojang/minecraft/gui/HUDScreen.java src2/com/mojang/minecraft/gui/HUDScreen.java
*** src/com/mojang/minecraft/gui/HUDScreen.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/gui/HUDScreen.java	2013-03-05 17:35:06.078815000 -0800
***************
*** 19,25 ****
  
  public final class HUDScreen extends Screen {
  
!    public List chat = new ArrayList();
     private Random random = new Random();
     private Minecraft mc;
     private int width;
--- 19,25 ----
  
  public final class HUDScreen extends Screen {
  
!    public List<ChatLine> chat = new ArrayList<ChatLine>();
     private Random random = new Random();
     private Minecraft mc;
     private int width;
***************
*** 55,61 ****
  
        int var10 = this.mc.player.health;
        int var11 = this.mc.player.lastHealth;
!       this.random.setSeed((long)(this.ticks * 312871));
        int var12;
        int var14;
        int var15;
--- 55,61 ----
  
        int var10 = this.mc.player.health;
        int var11 = this.mc.player.lastHealth;
!       this.random.setSeed(this.ticks * 312871);
        int var12;
        int var14;
        int var15;
***************
*** 94,101 ****
           }
  
           if(this.mc.player.isUnderWater()) {
!             var12 = (int)Math.ceil((double)(this.mc.player.airSupply - 2) * 10.0D / 300.0D);
!             var26 = (int)Math.ceil((double)this.mc.player.airSupply * 10.0D / 300.0D) - var12;
  
              for(var14 = 0; var14 < var12 + var26; ++var14) {
                 if(var14 < var12) {
--- 94,101 ----
           }
  
           if(this.mc.player.isUnderWater()) {
!             var12 = (int)Math.ceil((this.mc.player.airSupply - 2) * 10.0D / 300.0D);
!             var26 = (int)Math.ceil(this.mc.player.airSupply * 10.0D / 300.0D) - var12;
  
              for(var14 = 0; var14 < var12 + var26; ++var14) {
                 if(var14 < var12) {
***************
*** 115,124 ****
           var14 = this.height - 16;
           if((var15 = var8.slots[var12]) > 0) {
              GL11.glPushMatrix();
!             GL11.glTranslatef((float)var26, (float)var14, -50.0F);
              if(var8.popTime[var12] > 0) {
                 float var18;
!                float var21 = -MathHelper.sin((var18 = ((float)var8.popTime[var12] - var1) / 5.0F) * var18 * 3.1415927F) * 8.0F;
                 float var19 = MathHelper.sin(var18 * var18 * 3.1415927F) + 1.0F;
                 float var16 = MathHelper.sin(var18 * 3.1415927F) + 1.0F;
                 GL11.glTranslatef(10.0F, var21 + 10.0F, 0.0F);
--- 115,124 ----
           var14 = this.height - 16;
           if((var15 = var8.slots[var12]) > 0) {
              GL11.glPushMatrix();
!             GL11.glTranslatef(var26, var14, -50.0F);
              if(var8.popTime[var12] > 0) {
                 float var18;
!                float var21 = -MathHelper.sin((var18 = (var8.popTime[var12] - var1) / 5.0F) * var18 * 3.1415927F) * 8.0F;
                 float var19 = MathHelper.sin(var18 * var18 * 3.1415927F) + 1.0F;
                 float var16 = MathHelper.sin(var18 * 3.1415927F) + 1.0F;
                 GL11.glTranslatef(10.0F, var21 + 10.0F, 0.0F);
***************
*** 164,171 ****
        }
  
        for(var14 = 0; var14 < this.chat.size() && var14 < var25; ++var14) {
!          if(((ChatLine)this.chat.get(var14)).time < 200 || var27) {
!             var5.render(((ChatLine)this.chat.get(var14)).message, 2, this.height - 8 - var14 * 9 - 20, 16777215);
           }
        }
  
--- 164,171 ----
        }
  
        for(var14 = 0; var14 < this.chat.size() && var14 < var25; ++var14) {
!          if(this.chat.get(var14).time < 200 || var27) {
!             var5.render(this.chat.get(var14).message, 2, this.height - 8 - var14 * 9 - 20, 16777215);
           }
        }
  
***************
*** 173,189 ****
        var15 = this.height / 2;
        this.hoveredPlayer = null;
        if(Keyboard.isKeyDown(15) && this.mc.networkManager != null && this.mc.networkManager.isConnected()) {
!          List var22 = this.mc.networkManager.getPlayers();
           GL11.glEnable(3042);
           GL11.glDisable(3553);
           GL11.glBlendFunc(770, 771);
           GL11.glBegin(7);
           GL11.glColor4f(0.0F, 0.0F, 0.0F, 0.7F);
!          GL11.glVertex2f((float)(var14 + 128), (float)(var15 - 68 - 12));
!          GL11.glVertex2f((float)(var14 - 128), (float)(var15 - 68 - 12));
           GL11.glColor4f(0.2F, 0.2F, 0.2F, 0.8F);
!          GL11.glVertex2f((float)(var14 - 128), (float)(var15 + 68));
!          GL11.glVertex2f((float)(var14 + 128), (float)(var15 + 68));
           GL11.glEnd();
           GL11.glDisable(3042);
           GL11.glEnable(3553);
--- 173,189 ----
        var15 = this.height / 2;
        this.hoveredPlayer = null;
        if(Keyboard.isKeyDown(15) && this.mc.networkManager != null && this.mc.networkManager.isConnected()) {
!          List<String> var22 = this.mc.networkManager.getPlayers();
           GL11.glEnable(3042);
           GL11.glDisable(3553);
           GL11.glBlendFunc(770, 771);
           GL11.glBegin(7);
           GL11.glColor4f(0.0F, 0.0F, 0.0F, 0.7F);
!          GL11.glVertex2f(var14 + 128, var15 - 68 - 12);
!          GL11.glVertex2f(var14 - 128, var15 - 68 - 12);
           GL11.glColor4f(0.2F, 0.2F, 0.2F, 0.8F);
!          GL11.glVertex2f(var14 - 128, var15 + 68);
!          GL11.glVertex2f(var14 + 128, var15 + 68);
           GL11.glEnd();
           GL11.glDisable(3042);
           GL11.glEnable(3553);
***************
*** 194,203 ****
              int var28 = var14 + var11 % 2 * 120 - 120;
              int var17 = var15 - 64 + (var11 / 2 << 3);
              if(var2 && var3 >= var28 && var4 >= var17 && var3 < var28 + 120 && var4 < var17 + 8) {
!                this.hoveredPlayer = (String)var22.get(var11);
!                var5.renderNoShadow((String)var22.get(var11), var28 + 2, var17, 16777215);
              } else {
!                var5.renderNoShadow((String)var22.get(var11), var28, var17, 15658734);
              }
           }
        }
--- 194,203 ----
              int var28 = var14 + var11 % 2 * 120 - 120;
              int var17 = var15 - 64 + (var11 / 2 << 3);
              if(var2 && var3 >= var28 && var4 >= var17 && var3 < var28 + 120 && var4 < var17 + 8) {
!                this.hoveredPlayer = var22.get(var11);
!                var5.renderNoShadow(var22.get(var11), var28 + 2, var17, 16777215);
              } else {
!                var5.renderNoShadow(var22.get(var11), var28, var17, 15658734);
              }
           }
        }
diff -crB src/com/mojang/minecraft/gui/LevelDialog.java src2/com/mojang/minecraft/gui/LevelDialog.java
*** src/com/mojang/minecraft/gui/LevelDialog.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/gui/LevelDialog.java	2013-03-05 17:34:57.302814000 -0800
***************
*** 9,52 ****
     // $FF: synthetic field
     private LoadLevelScreen screen;
  
- 
     LevelDialog(LoadLevelScreen var1) {
        this.screen = var1;
-       super();
     }
  
!    public final void run() {
!       JFileChooser var1;
!       LoadLevelScreen var2;
        try {
!          LoadLevelScreen var10000 = this.screen;
!          var1 = new JFileChooser();
!          var10000.chooser = var1;
           FileNameExtensionFilter var3 = new FileNameExtensionFilter("Minecraft levels", new String[]{"mine"});
-          var2 = this.screen;
           this.screen.chooser.setFileFilter(var3);
-          var2 = this.screen;
           this.screen.chooser.setMultiSelectionEnabled(false);
           int var7;
           if(this.screen.saving) {
-             var2 = this.screen;
              var7 = this.screen.chooser.showSaveDialog(this.screen.minecraft.canvas);
           } else {
-             var2 = this.screen;
              var7 = this.screen.chooser.showOpenDialog(this.screen.minecraft.canvas);
           }
  
           if(var7 == 0) {
!             (var2 = this.screen).selectedFile = this.screen.chooser.getSelectedFile();
           }
        } finally {
-          boolean var6 = false;
-          var2 = this.screen;
           this.screen.frozen = false;
!          var1 = null;
!          var2 = this.screen;
!          this.screen.chooser = var1;
        }
- 
     }
  }
--- 9,38 ----
     // $FF: synthetic field
     private LoadLevelScreen screen;
  
     LevelDialog(LoadLevelScreen var1) {
        this.screen = var1;
     }
  
!    public final void run() {
        try {
!     	 JFileChooser var1 = new JFileChooser();
!          this.screen.chooser = var1;
           FileNameExtensionFilter var3 = new FileNameExtensionFilter("Minecraft levels", new String[]{"mine"});
           this.screen.chooser.setFileFilter(var3);
           this.screen.chooser.setMultiSelectionEnabled(false);
           int var7;
           if(this.screen.saving) {
              var7 = this.screen.chooser.showSaveDialog(this.screen.minecraft.canvas);
           } else {
              var7 = this.screen.chooser.showOpenDialog(this.screen.minecraft.canvas);
           }
  
           if(var7 == 0) {
!             this.screen.selectedFile = this.screen.chooser.getSelectedFile();
           }
        } finally {
           this.screen.frozen = false;
!          this.screen.chooser = null;
        }
     }
  }
diff -crB src/com/mojang/minecraft/gui/LevelNameScreen.java src2/com/mojang/minecraft/gui/LevelNameScreen.java
*** src/com/mojang/minecraft/gui/LevelNameScreen.java	2013-03-05 19:00:56.000000000 -0800
--- src2/com/mojang/minecraft/gui/LevelNameScreen.java	2013-03-05 17:28:17.646802000 -0800
***************
*** 29,35 ****
        Keyboard.enableRepeatEvents(true);
        this.buttons.add(new Button(0, this.width / 2 - 100, this.height / 4 + 120, "Save"));
        this.buttons.add(new Button(1, this.width / 2 - 100, this.height / 4 + 144, "Cancel"));
!       ((Button)this.buttons.get(0)).active = this.name.trim().length() > 1;
     }
  
     public final void onClose() {
--- 29,35 ----
        Keyboard.enableRepeatEvents(true);
        this.buttons.add(new Button(0, this.width / 2 - 100, this.height / 4 + 120, "Save"));
        this.buttons.add(new Button(1, this.width / 2 - 100, this.height / 4 + 144, "Cancel"));
!       this.buttons.get(0).active = this.name.trim().length() > 1;
     }
  
     public final void onClose() {
***************
*** 69,75 ****
           this.name = this.name + var1;
        }
  
!       ((Button)this.buttons.get(0)).active = this.name.trim().length() > 1;
     }
  
     public final void render(int var1, int var2) {
--- 69,75 ----
           this.name = this.name + var1;
        }
  
!       this.buttons.get(0).active = this.name.trim().length() > 1;
     }
  
     public final void render(int var1, int var2) {
diff -crB src/com/mojang/minecraft/gui/LoadLevelScreen.java src2/com/mojang/minecraft/gui/LoadLevelScreen.java
*** src/com/mojang/minecraft/gui/LoadLevelScreen.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/gui/LoadLevelScreen.java	2013-03-05 17:34:14.146813000 -0800
***************
*** 62,70 ****
  
     protected void setLevels(String[] var1) {
        for(int var2 = 0; var2 < 5; ++var2) {
!          ((Button)this.buttons.get(var2)).active = !var1[var2].equals("-");
!          ((Button)this.buttons.get(var2)).text = var1[var2];
!          ((Button)this.buttons.get(var2)).visible = true;
        }
  
     }
--- 62,70 ----
  
     protected void setLevels(String[] var1) {
        for(int var2 = 0; var2 < 5; ++var2) {
!          this.buttons.get(var2).active = !var1[var2].equals("-");
!          this.buttons.get(var2).text = var1[var2];
!          this.buttons.get(var2).visible = true;
        }
  
     }
***************
*** 74,81 ****
  
        for(int var1 = 0; var1 < 5; ++var1) {
           this.buttons.add(new Button(var1, this.width / 2 - 100, this.height / 6 + var1 * 24, "---"));
!          ((Button)this.buttons.get(var1)).visible = false;
!          ((Button)this.buttons.get(var1)).active = false;
        }
  
        this.buttons.add(new Button(5, this.width / 2 - 100, this.height / 6 + 120 + 12, "Load file..."));
--- 74,81 ----
  
        for(int var1 = 0; var1 < 5; ++var1) {
           this.buttons.add(new Button(var1, this.width / 2 - 100, this.height / 6 + var1 * 24, "---"));
!          this.buttons.get(var1).visible = false;
!          this.buttons.get(var1).active = false;
        }
  
        this.buttons.add(new Button(5, this.width / 2 - 100, this.height / 6 + 120 + 12, "Load file..."));
***************
*** 107,119 ****
     protected void openLevel(File var1) {
        File var2 = var1;
        Minecraft var4 = this.minecraft;
!       Level var5;
!       boolean var10000;
!       if((var5 = this.minecraft.levelIo.load(var2)) == null) {
!          var10000 = false;
!       } else {
           var4.setLevel(var5);
-          var10000 = true;
        }
  
        this.minecraft.setCurrentScreen(this.parent);
--- 107,115 ----
     protected void openLevel(File var1) {
        File var2 = var1;
        Minecraft var4 = this.minecraft;
!       Level var5 = this.minecraft.levelIo.load(var2);
!       if(var5 != null) {
           var4.setLevel(var5);
        }
  
        this.minecraft.setCurrentScreen(this.parent);
diff -crB src/com/mojang/minecraft/gui/PauseScreen.java src2/com/mojang/minecraft/gui/PauseScreen.java
*** src/com/mojang/minecraft/gui/PauseScreen.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/gui/PauseScreen.java	2013-03-05 17:28:17.934802000 -0800
***************
*** 17,30 ****
        this.buttons.add(new Button(3, this.width / 2 - 100, this.height / 4 + 72, "Load level.."));
        this.buttons.add(new Button(4, this.width / 2 - 100, this.height / 4 + 120, "Back to game"));
        if(this.minecraft.session == null) {
!          ((Button)this.buttons.get(2)).active = false;
!          ((Button)this.buttons.get(3)).active = false;
        }
  
        if(this.minecraft.networkManager != null) {
!          ((Button)this.buttons.get(1)).active = false;
!          ((Button)this.buttons.get(2)).active = false;
!          ((Button)this.buttons.get(3)).active = false;
        }
  
     }
--- 17,30 ----
        this.buttons.add(new Button(3, this.width / 2 - 100, this.height / 4 + 72, "Load level.."));
        this.buttons.add(new Button(4, this.width / 2 - 100, this.height / 4 + 120, "Back to game"));
        if(this.minecraft.session == null) {
!          this.buttons.get(2).active = false;
!          this.buttons.get(3).active = false;
        }
  
        if(this.minecraft.networkManager != null) {
!          this.buttons.get(1).active = false;
!          this.buttons.get(2).active = false;
!          this.buttons.get(3).active = false;
        }
  
     }
diff -crB src/com/mojang/minecraft/gui/SaveLevelScreen.java src2/com/mojang/minecraft/gui/SaveLevelScreen.java
*** src/com/mojang/minecraft/gui/SaveLevelScreen.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/gui/SaveLevelScreen.java	2013-03-05 17:28:47.766803000 -0800
***************
*** 1,7 ****
  package com.mojang.minecraft.gui;
  
  import com.mojang.minecraft.Minecraft;
- import com.mojang.minecraft.gui.Button;
  import com.mojang.minecraft.gui.GuiScreen;
  import com.mojang.minecraft.gui.LevelNameScreen;
  import com.mojang.minecraft.gui.LoadLevelScreen;
--- 1,6 ----
***************
*** 17,30 ****
  
     public final void onOpen() {
        super.onOpen();
!       ((Button)this.buttons.get(5)).text = "Save file...";
     }
  
     protected final void setLevels(String[] var1) {
        for(int var2 = 0; var2 < 5; ++var2) {
!          ((Button)this.buttons.get(var2)).text = var1[var2];
!          ((Button)this.buttons.get(var2)).visible = true;
!          ((Button)this.buttons.get(var2)).active = this.minecraft.session.haspaid;
        }
  
     }
--- 16,29 ----
  
     public final void onOpen() {
        super.onOpen();
!       this.buttons.get(5).text = "Save file...";
     }
  
     protected final void setLevels(String[] var1) {
        for(int var2 = 0; var2 < 5; ++var2) {
!          this.buttons.get(var2).text = var1[var2];
!          this.buttons.get(var2).visible = true;
!          this.buttons.get(var2).active = this.minecraft.session.haspaid;
        }
  
     }
***************
*** 51,56 ****
     }
  
     protected final void openLevel(int var1) {
!       this.minecraft.setCurrentScreen(new LevelNameScreen(this, ((Button)this.buttons.get(var1)).text, var1));
     }
  }
--- 50,55 ----
     }
  
     protected final void openLevel(int var1) {
!       this.minecraft.setCurrentScreen(new LevelNameScreen(this, this.buttons.get(var1).text, var1));
     }
  }
diff -crB src/com/mojang/minecraft/gui/Screen.java src2/com/mojang/minecraft/gui/Screen.java
*** src/com/mojang/minecraft/gui/Screen.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/gui/Screen.java	2013-03-05 17:28:17.746802000 -0800
***************
*** 10,53 ****
  
  
     protected static void drawBox(int var0, int var1, int var2, int var3, int var4) {
!       float var5 = (float)(var4 >>> 24) / 255.0F;
!       float var6 = (float)(var4 >> 16 & 255) / 255.0F;
!       float var7 = (float)(var4 >> 8 & 255) / 255.0F;
!       float var9 = (float)(var4 & 255) / 255.0F;
        ShapeRenderer var8 = ShapeRenderer.instance;
        GL11.glEnable(3042);
        GL11.glDisable(3553);
        GL11.glBlendFunc(770, 771);
        GL11.glColor4f(var6, var7, var9, var5);
        var8.begin();
!       var8.vertex((float)var0, (float)var3, 0.0F);
!       var8.vertex((float)var2, (float)var3, 0.0F);
!       var8.vertex((float)var2, (float)var1, 0.0F);
!       var8.vertex((float)var0, (float)var1, 0.0F);
        var8.end();
        GL11.glEnable(3553);
        GL11.glDisable(3042);
     }
  
     protected static void drawFadingBox(int var0, int var1, int var2, int var3, int var4, int var5) {
!       float var6 = (float)(var4 >>> 24) / 255.0F;
!       float var7 = (float)(var4 >> 16 & 255) / 255.0F;
!       float var8 = (float)(var4 >> 8 & 255) / 255.0F;
!       float var12 = (float)(var4 & 255) / 255.0F;
!       float var9 = (float)(var5 >>> 24) / 255.0F;
!       float var10 = (float)(var5 >> 16 & 255) / 255.0F;
!       float var11 = (float)(var5 >> 8 & 255) / 255.0F;
!       float var13 = (float)(var5 & 255) / 255.0F;
        GL11.glDisable(3553);
        GL11.glEnable(3042);
        GL11.glBlendFunc(770, 771);
        GL11.glBegin(7);
        GL11.glColor4f(var7, var8, var12, var6);
!       GL11.glVertex2f((float)var2, (float)var1);
!       GL11.glVertex2f((float)var0, (float)var1);
        GL11.glColor4f(var10, var11, var13, var9);
!       GL11.glVertex2f((float)var0, (float)var3);
!       GL11.glVertex2f((float)var2, (float)var3);
        GL11.glEnd();
        GL11.glDisable(3042);
        GL11.glEnable(3553);
--- 10,53 ----
  
  
     protected static void drawBox(int var0, int var1, int var2, int var3, int var4) {
!       float var5 = (var4 >>> 24) / 255.0F;
!       float var6 = (var4 >> 16 & 255) / 255.0F;
!       float var7 = (var4 >> 8 & 255) / 255.0F;
!       float var9 = (var4 & 255) / 255.0F;
        ShapeRenderer var8 = ShapeRenderer.instance;
        GL11.glEnable(3042);
        GL11.glDisable(3553);
        GL11.glBlendFunc(770, 771);
        GL11.glColor4f(var6, var7, var9, var5);
        var8.begin();
!       var8.vertex(var0, var3, 0.0F);
!       var8.vertex(var2, var3, 0.0F);
!       var8.vertex(var2, var1, 0.0F);
!       var8.vertex(var0, var1, 0.0F);
        var8.end();
        GL11.glEnable(3553);
        GL11.glDisable(3042);
     }
  
     protected static void drawFadingBox(int var0, int var1, int var2, int var3, int var4, int var5) {
!       float var6 = (var4 >>> 24) / 255.0F;
!       float var7 = (var4 >> 16 & 255) / 255.0F;
!       float var8 = (var4 >> 8 & 255) / 255.0F;
!       float var12 = (var4 & 255) / 255.0F;
!       float var9 = (var5 >>> 24) / 255.0F;
!       float var10 = (var5 >> 16 & 255) / 255.0F;
!       float var11 = (var5 >> 8 & 255) / 255.0F;
!       float var13 = (var5 & 255) / 255.0F;
        GL11.glDisable(3553);
        GL11.glEnable(3042);
        GL11.glBlendFunc(770, 771);
        GL11.glBegin(7);
        GL11.glColor4f(var7, var8, var12, var6);
!       GL11.glVertex2f(var2, var1);
!       GL11.glVertex2f(var0, var1);
        GL11.glColor4f(var10, var11, var13, var9);
!       GL11.glVertex2f(var0, var3);
!       GL11.glVertex2f(var2, var3);
        GL11.glEnd();
        GL11.glDisable(3042);
        GL11.glEnable(3553);
***************
*** 66,75 ****
        float var8 = 0.00390625F;
        ShapeRenderer var9 = ShapeRenderer.instance;
        ShapeRenderer.instance.begin();
!       var9.vertexUV((float)var1, (float)(var2 + var6), this.imgZ, (float)var3 * var7, (float)(var4 + var6) * var8);
!       var9.vertexUV((float)(var1 + var5), (float)(var2 + var6), this.imgZ, (float)(var3 + var5) * var7, (float)(var4 + var6) * var8);
!       var9.vertexUV((float)(var1 + var5), (float)var2, this.imgZ, (float)(var3 + var5) * var7, (float)var4 * var8);
!       var9.vertexUV((float)var1, (float)var2, this.imgZ, (float)var3 * var7, (float)var4 * var8);
        var9.end();
     }
  }
--- 66,75 ----
        float var8 = 0.00390625F;
        ShapeRenderer var9 = ShapeRenderer.instance;
        ShapeRenderer.instance.begin();
!       var9.vertexUV(var1, var2 + var6, this.imgZ, var3 * var7, (var4 + var6) * var8);
!       var9.vertexUV(var1 + var5, var2 + var6, this.imgZ, (var3 + var5) * var7, (var4 + var6) * var8);
!       var9.vertexUV(var1 + var5, var2, this.imgZ, (var3 + var5) * var7, var4 * var8);
!       var9.vertexUV(var1, var2, this.imgZ, var3 * var7, var4 * var8);
        var9.end();
     }
  }
diff -crB src/com/mojang/minecraft/item/Arrow.java src2/com/mojang/minecraft/item/Arrow.java
*** src/com/mojang/minecraft/item/Arrow.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/item/Arrow.java	2013-03-05 17:35:13.326815000 -0800
***************
*** 58,65 ****
        this.zd = var10 * var6 * var8;
        this.setPos(var3, var4, var5);
        var10 = MathHelper.sqrt(this.xd * this.xd + this.zd * this.zd);
!       this.yRotO = this.yRot = (float)(Math.atan2((double)this.xd, (double)this.zd) * 180.0D / 3.1415927410125732D);
!       this.xRotO = this.xRot = (float)(Math.atan2((double)this.yd, (double)var10) * 180.0D / 3.1415927410125732D);
        this.makeStepSound = false;
     }
  
--- 58,65 ----
        this.zd = var10 * var6 * var8;
        this.setPos(var3, var4, var5);
        var10 = MathHelper.sqrt(this.xd * this.xd + this.zd * this.zd);
!       this.yRotO = this.yRot = (float)(Math.atan2(this.xd, this.zd) * 180.0D / 3.1415927410125732D);
!       this.xRotO = this.xRot = (float)(Math.atan2(this.yd, var10) * 180.0D / 3.1415927410125732D);
        this.makeStepSound = false;
     }
  
***************
*** 87,95 ****
           this.zd *= 0.998F;
           this.yd -= 0.02F * this.gravity;
           int var1 = (int)(MathHelper.sqrt(this.xd * this.xd + this.yd * this.yd + this.zd * this.zd) / 0.2F + 1.0F);
!          float var2 = this.xd / (float)var1;
!          float var3 = this.yd / (float)var1;
!          float var4 = this.zd / (float)var1;
  
           for(int var5 = 0; var5 < var1 && !this.collision; ++var5) {
              AABB var6 = this.bb.expand(var2, var3, var4);
--- 87,95 ----
           this.zd *= 0.998F;
           this.yd -= 0.02F * this.gravity;
           int var1 = (int)(MathHelper.sqrt(this.xd * this.xd + this.yd * this.yd + this.zd * this.zd) / 0.2F + 1.0F);
!          float var2 = this.xd / var1;
!          float var3 = this.yd / var1;
!          float var4 = this.zd / var1;
  
           for(int var5 = 0; var5 < var1 && !this.collision; ++var5) {
              AABB var6 = this.bb.expand(var2, var3, var4);
***************
*** 97,107 ****
                 this.collision = true;
              }
  
!             List var10 = this.level.blockMap.getEntities(this, var6);
  
              for(int var7 = 0; var7 < var10.size(); ++var7) {
!                Entity var8;
!                if((var8 = (Entity)var10.get(var7)).isShootable() && (var8 != this.owner || this.time > 5)) {
                    var8.hurt(this, this.damage);
                    this.collision = true;
                    this.remove();
--- 97,107 ----
                 this.collision = true;
              }
  
!             List<Entity> var10 = this.level.blockMap.getEntities(this, var6);
  
              for(int var7 = 0; var7 < var10.size(); ++var7) {
!                Entity var8 = var10.get(var7);
!                if(var8.isShootable() && (var8 != this.owner || this.time > 5)) {
                    var8.hurt(this, this.damage);
                    this.collision = true;
                    this.remove();
***************
*** 125,134 ****
  
           if(!this.hasHit) {
              float var9 = MathHelper.sqrt(this.xd * this.xd + this.zd * this.zd);
!             this.yRot = (float)(Math.atan2((double)this.xd, (double)this.zd) * 180.0D / 3.1415927410125732D);
  
!             for(this.xRot = (float)(Math.atan2((double)this.yd, (double)var9) * 180.0D / 3.1415927410125732D); this.xRot - this.xRotO < -180.0F; this.xRotO -= 360.0F) {
!                ;
              }
  
              while(this.xRot - this.xRotO >= 180.0F) {
--- 125,133 ----
  
           if(!this.hasHit) {
              float var9 = MathHelper.sqrt(this.xd * this.xd + this.zd * this.zd);
!             this.yRot = (float)(Math.atan2(this.xd, this.zd) * 180.0D / 3.1415927410125732D);
  
!             for(this.xRot = (float)(Math.atan2(this.yd, var9) * 180.0D / 3.1415927410125732D); this.xRot - this.xRotO < -180.0F; this.xRotO -= 360.0F) {
              }
  
              while(this.xRot - this.xRotO >= 180.0F) {
***************
*** 159,169 ****
        GL11.glRotatef(45.0F, 1.0F, 0.0F, 0.0F);
        ShapeRenderer var11 = ShapeRenderer.instance;
        var2 = 0.5F;
!       float var3 = (float)(0 + this.type * 10) / 32.0F;
!       float var4 = (float)(5 + this.type * 10) / 32.0F;
        float var5 = 0.15625F;
!       float var6 = (float)(5 + this.type * 10) / 32.0F;
!       float var8 = (float)(10 + this.type * 10) / 32.0F;
        float var7 = 0.05625F;
        GL11.glScalef(0.05625F, var7, var7);
        GL11.glNormal3f(var7, 0.0F, 0.0F);
--- 158,168 ----
        GL11.glRotatef(45.0F, 1.0F, 0.0F, 0.0F);
        ShapeRenderer var11 = ShapeRenderer.instance;
        var2 = 0.5F;
!       float var3 = (0 + this.type * 10) / 32.0F;
!       float var4 = (5 + this.type * 10) / 32.0F;
        float var5 = 0.15625F;
!       float var6 = (5 + this.type * 10) / 32.0F;
!       float var8 = (10 + this.type * 10) / 32.0F;
        float var7 = 0.05625F;
        GL11.glScalef(0.05625F, var7, var7);
        GL11.glNormal3f(var7, 0.0F, 0.0F);
diff -crB src/com/mojang/minecraft/item/Item.java src2/com/mojang/minecraft/item/Item.java
*** src/com/mojang/minecraft/item/Item.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/item/Item.java	2013-03-05 17:28:17.570802000 -0800
***************
*** 73,79 ****
        this.textureId = var1.load("/terrain.png");
        GL11.glBindTexture(3553, this.textureId);
        float var5 = this.level.getBrightness((int)this.x, (int)this.y, (int)this.z);
!       float var3 = this.rot + ((float)this.tickCount + var2) * 3.0F;
        GL11.glPushMatrix();
        GL11.glColor4f(var5, var5, var5, 1.0F);
        float var4 = (var5 = MathHelper.sin(var3 / 10.0F)) * 0.1F + 0.1F;
--- 73,79 ----
        this.textureId = var1.load("/terrain.png");
        GL11.glBindTexture(3553, this.textureId);
        float var5 = this.level.getBrightness((int)this.x, (int)this.y, (int)this.z);
!       float var3 = this.rot + (this.tickCount + var2) * 3.0F;
        GL11.glPushMatrix();
        GL11.glColor4f(var5, var5, var5, 1.0F);
        float var4 = (var5 = MathHelper.sin(var3 / 10.0F)) * 0.1F + 0.1F;
diff -crB src/com/mojang/minecraft/item/ItemModel.java src2/com/mojang/minecraft/item/ItemModel.java
*** src/com/mojang/minecraft/item/ItemModel.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/item/ItemModel.java	2013-03-05 17:34:21.430813000 -0800
***************
*** 12,20 ****
     public ItemModel(int var1) {
        ModelPart var10000 = this.model;
        int var2 = var1;
-       boolean var14 = true;
-       var14 = true;
-       var14 = true;
        float var3 = -2.0F;
        float var4 = -2.0F;
        float var15 = -2.0F;
--- 12,17 ----
***************
*** 39,48 ****
        var16.vertices[7] = var17;
        float var10 = 0.25F;
        float var11 = 0.25F;
!       float var12 = ((float)(var2 % 16) + (1.0F - var10)) / 16.0F;
!       float var13 = ((float)(var2 / 16) + (1.0F - var11)) / 16.0F;
!       var10 = ((float)(var2 % 16) + var10) / 16.0F;
!       float var18 = ((float)(var2 / 16) + var11) / 16.0F;
        var16.quads[0] = new TexturedQuad(new Vertex[]{var20, var6, var7, var9}, var12, var13, var10, var18);
        var16.quads[1] = new TexturedQuad(new Vertex[]{var5, var8, var17, var19}, var12, var13, var10, var18);
        var16.quads[2] = new TexturedQuad(new Vertex[]{var20, var8, var5, var6}, var12, var13, var10, var18);
--- 36,45 ----
        var16.vertices[7] = var17;
        float var10 = 0.25F;
        float var11 = 0.25F;
!       float var12 = (var2 % 16 + (1.0F - var10)) / 16.0F;
!       float var13 = (var2 / 16 + (1.0F - var11)) / 16.0F;
!       var10 = (var2 % 16 + var10) / 16.0F;
!       float var18 = (var2 / 16 + var11) / 16.0F;
        var16.quads[0] = new TexturedQuad(new Vertex[]{var20, var6, var7, var9}, var12, var13, var10, var18);
        var16.quads[1] = new TexturedQuad(new Vertex[]{var5, var8, var17, var19}, var12, var13, var10, var18);
        var16.quads[2] = new TexturedQuad(new Vertex[]{var20, var8, var5, var6}, var12, var13, var10, var18);
diff -crB src/com/mojang/minecraft/item/PrimedTnt.java src2/com/mojang/minecraft/item/PrimedTnt.java
*** src/com/mojang/minecraft/item/PrimedTnt.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/item/PrimedTnt.java	2013-03-05 17:28:17.870802000 -0800
***************
*** 75,81 ****
              this.level.particleEngine.spawnParticle(new SmokeParticle(this.level, this.x, this.y + 0.6F, this.z));
           } else {
              this.remove();
-             this = this;
              Random var1 = new Random();
              float var2 = 4.0F;
              this.level.explode((Entity)null, this.x, this.y, this.z, var2);
--- 75,80 ----
***************
*** 118,126 ****
        Block.TNT.renderPreview(var5);
        GL11.glDisable(3553);
        GL11.glDisable(2896);
!       GL11.glColor4f(1.0F, 1.0F, 1.0F, (float)((this.life / 4 + 1) % 2) * 0.4F);
        if(this.life <= 16) {
!          GL11.glColor4f(1.0F, 1.0F, 1.0F, (float)((this.life + 1) % 2) * 0.6F);
        }
  
        if(this.life <= 2) {
--- 117,125 ----
        Block.TNT.renderPreview(var5);
        GL11.glDisable(3553);
        GL11.glDisable(2896);
!       GL11.glColor4f(1.0F, 1.0F, 1.0F, (this.life / 4 + 1) % 2 * 0.4F);
        if(this.life <= 16) {
!          GL11.glColor4f(1.0F, 1.0F, 1.0F, (this.life + 1) % 2 * 0.6F);
        }
  
        if(this.life <= 2) {
diff -crB src/com/mojang/minecraft/item/TakeEntityAnim.java src2/com/mojang/minecraft/item/TakeEntityAnim.java
*** src/com/mojang/minecraft/item/TakeEntityAnim.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/item/TakeEntityAnim.java	2013-03-05 17:28:17.490802000 -0800
***************
*** 31,37 ****
           this.remove();
        }
  
!       float var1 = (var1 = (float)this.time / 3.0F) * var1;
        this.xo = this.item.xo = this.item.x;
        this.yo = this.item.yo = this.item.y;
        this.zo = this.item.zo = this.item.z;
--- 31,37 ----
           this.remove();
        }
  
!       float var1 = (var1 = this.time / 3.0F) * var1;
        this.xo = this.item.xo = this.item.x;
        this.yo = this.item.yo = this.item.y;
        this.zo = this.item.zo = this.item.z;
diff -crB src/com/mojang/minecraft/level/BlockMap.java src2/com/mojang/minecraft/level/BlockMap.java
*** src/com/mojang/minecraft/level/BlockMap.java	2013-03-05 19:01:02.000000000 -0800
--- src2/com/mojang/minecraft/level/BlockMap.java	2013-03-05 17:38:08.238821000 -0800
***************
*** 2,8 ****
  
  import com.mojang.minecraft.Entity;
  import com.mojang.minecraft.level.BlockMap$Slot;
- import com.mojang.minecraft.level.SyntheticClass;
  import com.mojang.minecraft.model.Vec3D;
  import com.mojang.minecraft.phys.AABB;
  import com.mojang.minecraft.render.Frustrum;
--- 2,7 ----
***************
*** 17,29 ****
     private int width;
     private int depth;
     private int height;
!    private BlockMap$Slot slot = new BlockMap$Slot(this, (SyntheticClass)null);
!    private BlockMap$Slot slot2 = new BlockMap$Slot(this, (SyntheticClass)null);
!    public List[] entityGrid;
!    public List all = new ArrayList();
!    private List tmp = new ArrayList();
  
  
     public BlockMap(int var1, int var2, int var3) {
        this.width = var1 / 16;
        this.depth = var2 / 16;
--- 16,29 ----
     private int width;
     private int depth;
     private int height;
!    private BlockMap$Slot slot = new BlockMap$Slot(this);
!    private BlockMap$Slot slot2 = new BlockMap$Slot(this);
!    public List<Entity>[] entityGrid;
!    public List<Entity> all = new ArrayList<Entity>();
!    private List<Entity> tmp = new ArrayList<Entity>();
  
  
+    @SuppressWarnings("unchecked")
     public BlockMap(int var1, int var2, int var3) {
        this.width = var1 / 16;
        this.depth = var2 / 16;
***************
*** 45,55 ****
        for(var1 = 0; var1 < this.width; ++var1) {
           for(var2 = 0; var2 < this.depth; ++var2) {
              for(var3 = 0; var3 < this.height; ++var3) {
!                this.entityGrid[(var3 * this.depth + var2) * this.width + var1] = new ArrayList();
              }
           }
        }
- 
     }
  
     public void insert(Entity var1) {
--- 45,54 ----
        for(var1 = 0; var1 < this.width; ++var1) {
           for(var2 = 0; var2 < this.depth; ++var2) {
              for(var3 = 0; var3 < this.height; ++var3) {
!                this.entityGrid[(var3 * this.depth + var2) * this.width + var1] = new ArrayList<Entity>();
              }
           }
        }
     }
  
     public void insert(Entity var1) {
***************
*** 78,89 ****
        }
     }
  
!    public List getEntities(Entity var1, float var2, float var3, float var4, float var5, float var6, float var7) {
        this.tmp.clear();
        return this.getEntities(var1, var2, var3, var4, var5, var6, var7, this.tmp);
     }
  
!    public List getEntities(Entity var1, float var2, float var3, float var4, float var5, float var6, float var7, List var8) {
        BlockMap$Slot var9 = this.slot.init(var2, var3, var4);
        BlockMap$Slot var10 = this.slot2.init(var5, var6, var7);
  
--- 77,88 ----
        }
     }
  
!    public List<Entity> getEntities(Entity var1, float var2, float var3, float var4, float var5, float var6, float var7) {
        this.tmp.clear();
        return this.getEntities(var1, var2, var3, var4, var5, var6, var7, this.tmp);
     }
  
!    public List<Entity> getEntities(Entity var1, float var2, float var3, float var4, float var5, float var6, float var7, List<Entity> var8) {
        BlockMap$Slot var9 = this.slot.init(var2, var3, var4);
        BlockMap$Slot var10 = this.slot2.init(var5, var6, var7);
  
***************
*** 91,101 ****
           for(int var12 = BlockMap$Slot.getYSlot(var9) - 1; var12 <= BlockMap$Slot.getYSlot(var10) + 1; ++var12) {
              for(int var13 = BlockMap$Slot.getZSlot(var9) - 1; var13 <= BlockMap$Slot.getZSlot(var10) + 1; ++var13) {
                 if(var11 >= 0 && var12 >= 0 && var13 >= 0 && var11 < this.width && var12 < this.depth && var13 < this.height) {
!                   List var14 = this.entityGrid[(var13 * this.depth + var12) * this.width + var11];
  
                    for(int var15 = 0; var15 < var14.size(); ++var15) {
!                      Entity var16;
!                      if((var16 = (Entity)var14.get(var15)) != var1 && var16.intersects(var2, var3, var4, var5, var6, var7)) {
                          var8.add(var16);
                       }
                    }
--- 90,100 ----
           for(int var12 = BlockMap$Slot.getYSlot(var9) - 1; var12 <= BlockMap$Slot.getYSlot(var10) + 1; ++var12) {
              for(int var13 = BlockMap$Slot.getZSlot(var9) - 1; var13 <= BlockMap$Slot.getZSlot(var10) + 1; ++var13) {
                 if(var11 >= 0 && var12 >= 0 && var13 >= 0 && var11 < this.width && var12 < this.depth && var13 < this.height) {
!                   List<Entity> var14 = this.entityGrid[(var13 * this.depth + var12) * this.width + var11];
  
                    for(int var15 = 0; var15 < var14.size(); ++var15) {
!                      Entity var16 = var14.get(var15);
!                      if(var16 != var1 && var16.intersects(var2, var3, var4, var5, var6, var7)) {
                          var8.add(var16);
                       }
                    }
***************
*** 111,120 ****
        for(int var1 = 0; var1 < this.width; ++var1) {
           for(int var2 = 0; var2 < this.depth; ++var2) {
              for(int var3 = 0; var3 < this.height; ++var3) {
!                List var4 = this.entityGrid[(var3 * this.depth + var2) * this.width + var1];
  
                 for(int var5 = 0; var5 < var4.size(); ++var5) {
!                   if(!((Entity)var4.get(var5)).isCreativeModeAllowed()) {
                       var4.remove(var5--);
                    }
                 }
--- 110,119 ----
        for(int var1 = 0; var1 < this.width; ++var1) {
           for(int var2 = 0; var2 < this.depth; ++var2) {
              for(int var3 = 0; var3 < this.height; ++var3) {
!                List<Entity> var4 = this.entityGrid[(var3 * this.depth + var2) * this.width + var1];
  
                 for(int var5 = 0; var5 < var4.size(); ++var5) {
!                   if(!var4.get(var5).isCreativeModeAllowed()) {
                       var4.remove(var5--);
                    }
                 }
***************
*** 135,153 ****
  
     }
  
!    public List getEntities(Entity var1, AABB var2) {
        this.tmp.clear();
        return this.getEntities(var1, var2.x0, var2.y0, var2.z0, var2.x1, var2.y1, var2.z1, this.tmp);
     }
  
!    public List getEntities(Entity var1, AABB var2, List var3) {
        return this.getEntities(var1, var2.x0, var2.y0, var2.z0, var2.x1, var2.y1, var2.z1, var3);
     }
  
     public void tickAll() {
        for(int var1 = 0; var1 < this.all.size(); ++var1) {
!          Entity var2;
!          (var2 = (Entity)this.all.get(var1)).tick();
           if(var2.removed) {
              this.all.remove(var1--);
              this.slot.init(var2.xOld, var2.yOld, var2.zOld).remove(var2);
--- 134,152 ----
  
     }
  
!    public List<Entity> getEntities(Entity var1, AABB var2) {
        this.tmp.clear();
        return this.getEntities(var1, var2.x0, var2.y0, var2.z0, var2.x1, var2.y1, var2.z1, this.tmp);
     }
  
!    public List<Entity> getEntities(Entity var1, AABB var2, List<Entity> var3) {
        return this.getEntities(var1, var2.x0, var2.y0, var2.z0, var2.x1, var2.y1, var2.z1, var3);
     }
  
     public void tickAll() {
        for(int var1 = 0; var1 < this.all.size(); ++var1) {
!          Entity var2 = this.all.get(var1);
!          var2.tick();
           if(var2.removed) {
              this.all.remove(var1--);
              this.slot.init(var2.xOld, var2.yOld, var2.zOld).remove(var2);
***************
*** 168,185 ****
  
     public void render(Vec3D var1, Frustrum var2, TextureManager var3, float var4) {
        for(int var5 = 0; var5 < this.width; ++var5) {
!          float var6 = (float)((var5 << 4) - 2);
!          float var7 = (float)((var5 + 1 << 4) + 2);
  
           for(int var8 = 0; var8 < this.depth; ++var8) {
!             float var9 = (float)((var8 << 4) - 2);
!             float var10 = (float)((var8 + 1 << 4) + 2);
  
              for(int var11 = 0; var11 < this.height; ++var11) {
!                List var12;
                 if((var12 = this.entityGrid[(var11 * this.depth + var8) * this.width + var5]).size() != 0) {
!                   float var13 = (float)((var11 << 4) - 2);
!                   float var14 = (float)((var11 + 1 << 4) + 2);
                    if(var2.isBoxInFrustrum(var6, var9, var13, var7, var10, var14)) {
                       float var16 = var14;
                       float var17 = var10;
--- 167,184 ----
  
     public void render(Vec3D var1, Frustrum var2, TextureManager var3, float var4) {
        for(int var5 = 0; var5 < this.width; ++var5) {
!          float var6 = (var5 << 4) - 2;
!          float var7 = (var5 + 1 << 4) + 2;
  
           for(int var8 = 0; var8 < this.depth; ++var8) {
!             float var9 = (var8 << 4) - 2;
!             float var10 = (var8 + 1 << 4) + 2;
  
              for(int var11 = 0; var11 < this.height; ++var11) {
!                List<Entity> var12;
                 if((var12 = this.entityGrid[(var11 * this.depth + var8) * this.width + var5]).size() != 0) {
!                   float var13 = (var11 << 4) - 2;
!                   float var14 = (var11 + 1 << 4) + 2;
                    if(var2.isBoxInFrustrum(var6, var9, var13, var7, var10, var14)) {
                       float var16 = var14;
                       float var17 = var10;
***************
*** 243,250 ****
                       boolean var21 = var10000;
  
                       for(int var23 = 0; var23 < var12.size(); ++var23) {
!                         Entity var22;
!                         if((var22 = (Entity)var12.get(var23)).shouldRender(var1)) {
                             if(!var21) {
                                AABB var24 = var22.bb;
                                if(!var2.isBoxInFrustrum(var24.x0, var24.y0, var24.z0, var24.x1, var24.y1, var24.z1)) {
--- 242,249 ----
                       boolean var21 = var10000;
  
                       for(int var23 = 0; var23 < var12.size(); ++var23) {
!                         Entity var22 = var12.get(var23);
!                         if(var22.shouldRender(var1)) {
                             if(!var21) {
                                AABB var24 = var22.bb;
                                if(!var2.isBoxInFrustrum(var24.x0, var24.y0, var24.z0, var24.x1, var24.y1, var24.z1)) {
diff -crB src/com/mojang/minecraft/level/BlockMap$Slot.java src2/com/mojang/minecraft/level/BlockMap$Slot.java
*** src/com/mojang/minecraft/level/BlockMap$Slot.java	2013-03-05 19:01:02.000000000 -0800
--- src2/com/mojang/minecraft/level/BlockMap$Slot.java	2013-03-05 17:38:28.394821000 -0800
***************
*** 2,8 ****
  
  import com.mojang.minecraft.Entity;
  import com.mojang.minecraft.level.BlockMap;
- import com.mojang.minecraft.level.SyntheticClass;
  import java.io.Serializable;
  
  class BlockMap$Slot implements Serializable {
--- 2,7 ----
***************
*** 15,21 ****
     final BlockMap blockMap;
  
  
!    private BlockMap$Slot(BlockMap var1) {
        this.blockMap = var1;
     }
  
--- 14,20 ----
     final BlockMap blockMap;
  
  
!    public BlockMap$Slot(BlockMap var1) {
        this.blockMap = var1;
     }
  
***************
*** 65,75 ****
     }
  
     // $FF: synthetic method
-    BlockMap$Slot(BlockMap var1, SyntheticClass var2) {
-       this(var1);
-    }
- 
-    // $FF: synthetic method
     static int getXSlot(BlockMap$Slot var0) {
        return var0.xSlot;
     }
--- 64,69 ----
diff -crB src/com/mojang/minecraft/level/generator/LevelGenerator.java src2/com/mojang/minecraft/level/generator/LevelGenerator.java
*** src/com/mojang/minecraft/level/generator/LevelGenerator.java	2013-03-05 19:01:02.000000000 -0800
--- src2/com/mojang/minecraft/level/generator/LevelGenerator.java	2013-03-05 17:16:41.498779000 -0800
***************
*** 46,54 ****
           var5.setProgress(var11 * 100 / (var5.width - 1));
  
           for(var12 = 0; var12 < var5.depth; ++var12) {
!             double var13 = var6.compute((double)((float)var11 * var10), (double)((float)var12 * var10)) / 6.0D + (double)-4;
!             double var15 = var7.compute((double)((float)var11 * var10), (double)((float)var12 * var10)) / 5.0D + 10.0D + (double)-4;
!             if(var8.compute((double)var11, (double)var12) / 8.0D > 0.0D) {
                 var15 = var13;
              }
  
--- 46,54 ----
           var5.setProgress(var11 * 100 / (var5.width - 1));
  
           for(var12 = 0; var12 < var5.depth; ++var12) {
!             double var13 = var6.compute(var11 * var10, var12 * var10) / 6.0D + -4;
!             double var15 = var7.compute(var11 * var10, var12 * var10) / 5.0D + 10.0D + -4;
!             if(var8.compute(var11, var12) / 8.0D > 0.0D) {
                 var15 = var13;
              }
  
***************
*** 74,81 ****
           var5.setProgress(var51 * 100 / (var5.width - 1));
  
           for(var54 = 0; var54 < var5.depth; ++var54) {
!             double var21 = var7.compute((double)(var51 << 1), (double)(var54 << 1)) / 8.0D;
!             var12 = var49.compute((double)(var51 << 1), (double)(var54 << 1)) > 0.0D?1:0;
              if(var21 > 2.0D) {
                 var23 = ((var42[var51 + var54 * var5.width] - var12) / 2 << 1) + var12;
                 var42[var51 + var54 * var5.width] = var23;
--- 74,81 ----
           var5.setProgress(var51 * 100 / (var5.width - 1));
  
           for(var54 = 0; var54 < var5.depth; ++var54) {
!             double var21 = var7.compute(var51 << 1, var54 << 1) / 8.0D;
!             var12 = var49.compute(var51 << 1, var54 << 1) > 0.0D?1:0;
              if(var21 > 2.0D) {
                 var23 = ((var42[var51 + var54 * var5.width] - var12) / 2 << 1) + var12;
                 var42[var51 + var54 * var5.width] = var23;
***************
*** 100,106 ****
           var5.setProgress(var24 * 100 / (var5.width - 1));
  
           for(var11 = 0; var11 < var48; ++var11) {
!             var12 = (int)(var53.compute((double)var24, (double)var11) / 24.0D) - 4;
              var25 = (var23 = var42[var24 + var11 * var46] + var5.waterLevel) + var12;
              var42[var24 + var11 * var46] = Math.max(var23, var25);
              if(var42[var24 + var11 * var46] > var51 - 2) {
--- 100,106 ----
           var5.setProgress(var24 * 100 / (var5.width - 1));
  
           for(var11 = 0; var11 < var48; ++var11) {
!             var12 = (int)(var53.compute(var24, var11) / 24.0D) - 4;
              var25 = (var23 = var42[var24 + var11 * var46] + var5.waterLevel) + var12;
              var42[var24 + var11 * var46] = Math.max(var23, var25);
              if(var42[var24 + var11 * var46] > var51 - 2) {
***************
*** 132,139 ****
        }
  
        this.progressBar.setText("Carving..");
-       boolean var45 = true;
-       boolean var44 = false;
        var5 = this;
        var48 = this.width;
        var51 = this.depth;
--- 132,137 ----
***************
*** 142,150 ****
  
        for(var11 = 0; var11 < var24; ++var11) {
           var5.setProgress(var11 * 100 / (var24 - 1) / 4);
!          float var55 = var5.random.nextFloat() * (float)var48;
!          float var59 = var5.random.nextFloat() * (float)var54;
!          float var56 = var5.random.nextFloat() * (float)var51;
           var26 = (int)((var5.random.nextFloat() + var5.random.nextFloat()) * 200.0F);
           float var61 = var5.random.nextFloat() * 3.1415927F * 2.0F;
           float var64 = 0.0F;
--- 140,148 ----
  
        for(var11 = 0; var11 < var24; ++var11) {
           var5.setProgress(var11 * 100 / (var24 - 1) / 4);
!          float var55 = var5.random.nextFloat() * var48;
!          float var59 = var5.random.nextFloat() * var54;
!          float var56 = var5.random.nextFloat() * var51;
           var26 = (int)((var5.random.nextFloat() + var5.random.nextFloat()) * 200.0F);
           float var61 = var5.random.nextFloat() * 3.1415927F * 2.0F;
           float var64 = 0.0F;
***************
*** 164,179 ****
                 float var43 = var55 + (var5.random.nextFloat() * 4.0F - 2.0F) * 0.2F;
                 float var50 = var59 + (var5.random.nextFloat() * 4.0F - 2.0F) * 0.2F;
                 float var33 = var56 + (var5.random.nextFloat() * 4.0F - 2.0F) * 0.2F;
!                float var34 = ((float)var5.height - var50) / (float)var5.height;
                 var34 = 1.2F + (var34 * 3.5F + 1.0F) * var31;
!                var34 = MathHelper.sin((float)var32 * 3.1415927F / (float)var26) * var34;
  
                 for(int var35 = (int)(var43 - var34); var35 <= (int)(var43 + var34); ++var35) {
                    for(int var36 = (int)(var50 - var34); var36 <= (int)(var50 + var34); ++var36) {
                       for(int var37 = (int)(var33 - var34); var37 <= (int)(var33 + var34); ++var37) {
!                         float var38 = (float)var35 - var43;
!                         float var39 = (float)var36 - var50;
!                         float var40 = (float)var37 - var33;
                          if(var38 * var38 + var39 * var39 * 2.0F + var40 * var40 < var34 * var34 && var35 >= 1 && var36 >= 1 && var37 >= 1 && var35 < var5.width - 1 && var36 < var5.height - 1 && var37 < var5.depth - 1) {
                             int var66 = (var36 * var5.depth + var37) * var5.width + var35;
                             if(var5.blocks[var66] == Block.STONE.id) {
--- 162,177 ----
                 float var43 = var55 + (var5.random.nextFloat() * 4.0F - 2.0F) * 0.2F;
                 float var50 = var59 + (var5.random.nextFloat() * 4.0F - 2.0F) * 0.2F;
                 float var33 = var56 + (var5.random.nextFloat() * 4.0F - 2.0F) * 0.2F;
!                float var34 = (var5.height - var50) / var5.height;
                 var34 = 1.2F + (var34 * 3.5F + 1.0F) * var31;
!                var34 = MathHelper.sin(var32 * 3.1415927F / var26) * var34;
  
                 for(int var35 = (int)(var43 - var34); var35 <= (int)(var43 + var34); ++var35) {
                    for(int var36 = (int)(var50 - var34); var36 <= (int)(var50 + var34); ++var36) {
                       for(int var37 = (int)(var33 - var34); var37 <= (int)(var33 + var34); ++var37) {
!                         float var38 = var35 - var43;
!                         float var39 = var36 - var50;
!                         float var40 = var37 - var33;
                          if(var38 * var38 + var39 * var39 * 2.0F + var40 * var40 < var34 * var34 && var35 >= 1 && var36 >= 1 && var37 >= 1 && var35 < var5.width - 1 && var36 < var5.height - 1 && var37 < var5.depth - 1) {
                             int var66 = (var36 * var5.depth + var37) * var5.width + var35;
                             if(var5.blocks[var66] == Block.STONE.id) {
***************
*** 231,237 ****
           }
  
           var51 = var5.random.nextInt(var5.width);
!          var54 = (int)(var5.random.nextFloat() * var5.random.nextFloat() * (float)(var5.waterLevel - 3));
           var24 = var5.random.nextInt(var5.depth);
           if(var5.blocks[(var54 * var5.depth + var24) * var5.width + var51] == 0) {
              var5.flood(var51, var54, var24, 0, Block.STATIONARY_LAVA.id);
--- 229,235 ----
           }
  
           var51 = var5.random.nextInt(var5.width);
!          var54 = (int)(var5.random.nextFloat() * var5.random.nextFloat() * (var5.waterLevel - 3));
           var24 = var5.random.nextInt(var5.depth);
           if(var5.blocks[(var54 * var5.depth + var24) * var5.width + var51] == 0) {
              var5.flood(var51, var54, var24, 0, Block.STATIONARY_LAVA.id);
***************
*** 253,260 ****
           var5.setProgress(var11 * 100 / (var5.width - 1));
  
           for(var12 = 0; var12 < var48; ++var12) {
!             boolean var60 = var53.compute((double)var11, (double)var12) > 8.0D;
!             boolean var57 = var58.compute((double)var11, (double)var12) > 12.0D;
              var27 = ((var26 = var42[var11 + var12 * var46]) * var5.depth + var12) * var5.width + var11;
              if(((var28 = var5.blocks[((var26 + 1) * var5.depth + var12) * var5.width + var11] & 255) == Block.WATER.id || var28 == Block.STATIONARY_WATER.id) && var26 <= var51 / 2 - 1 && var57) {
                 var5.blocks[var27] = (byte)Block.GRAVEL.id;
--- 251,258 ----
           var5.setProgress(var11 * 100 / (var5.width - 1));
  
           for(var12 = 0; var12 < var48; ++var12) {
!             boolean var60 = var53.compute(var11, var12) > 8.0D;
!             boolean var57 = var58.compute(var11, var12) > 12.0D;
              var27 = ((var26 = var42[var11 + var12 * var46]) * var5.depth + var12) * var5.width + var11;
              if(((var28 = var5.blocks[((var26 + 1) * var5.depth + var12) * var5.width + var11] & 255) == Block.WATER.id || var28 == Block.STATIONARY_WATER.id) && var26 <= var51 / 2 - 1 && var57) {
                 var5.blocks[var27] = (byte)Block.GRAVEL.id;
***************
*** 388,397 ****
  
        for(int var8 = 0; var8 < var7; ++var8) {
           this.setProgress(var8 * 100 / (var7 - 1) / 4 + var3 * 100 / 4);
!          float var9 = this.random.nextFloat() * (float)var4;
!          float var10 = this.random.nextFloat() * (float)var6;
!          float var11 = this.random.nextFloat() * (float)var5;
!          int var12 = (int)((this.random.nextFloat() + this.random.nextFloat()) * 75.0F * (float)var2 / 100.0F);
           float var13 = this.random.nextFloat() * 3.1415927F * 2.0F;
           float var14 = 0.0F;
           float var15 = this.random.nextFloat() * 3.1415927F * 2.0F;
--- 386,395 ----
  
        for(int var8 = 0; var8 < var7; ++var8) {
           this.setProgress(var8 * 100 / (var7 - 1) / 4 + var3 * 100 / 4);
!          float var9 = this.random.nextFloat() * var4;
!          float var10 = this.random.nextFloat() * var6;
!          float var11 = this.random.nextFloat() * var5;
!          int var12 = (int)((this.random.nextFloat() + this.random.nextFloat()) * 75.0F * var2 / 100.0F);
           float var13 = this.random.nextFloat() * 3.1415927F * 2.0F;
           float var14 = 0.0F;
           float var15 = this.random.nextFloat() * 3.1415927F * 2.0F;
***************
*** 405,418 ****
              var14 = (var14 *= 0.9F) + (this.random.nextFloat() - this.random.nextFloat());
              var15 = (var15 + var16 * 0.5F) * 0.5F;
              var16 = (var16 *= 0.9F) + (this.random.nextFloat() - this.random.nextFloat());
!             float var18 = MathHelper.sin((float)var17 * 3.1415927F / (float)var12) * (float)var2 / 100.0F + 1.0F;
  
              for(int var19 = (int)(var9 - var18); var19 <= (int)(var9 + var18); ++var19) {
                 for(int var20 = (int)(var10 - var18); var20 <= (int)(var10 + var18); ++var20) {
                    for(int var21 = (int)(var11 - var18); var21 <= (int)(var11 + var18); ++var21) {
!                      float var22 = (float)var19 - var9;
!                      float var23 = (float)var20 - var10;
!                      float var24 = (float)var21 - var11;
                       if(var22 * var22 + var23 * var23 * 2.0F + var24 * var24 < var18 * var18 && var19 >= 1 && var20 >= 1 && var21 >= 1 && var19 < this.width - 1 && var20 < this.height - 1 && var21 < this.depth - 1) {
                          int var26 = (var20 * this.depth + var21) * this.width + var19;
                          if(this.blocks[var26] == Block.STONE.id) {
--- 403,416 ----
              var14 = (var14 *= 0.9F) + (this.random.nextFloat() - this.random.nextFloat());
              var15 = (var15 + var16 * 0.5F) * 0.5F;
              var16 = (var16 *= 0.9F) + (this.random.nextFloat() - this.random.nextFloat());
!             float var18 = MathHelper.sin(var17 * 3.1415927F / var12) * var2 / 100.0F + 1.0F;
  
              for(int var19 = (int)(var9 - var18); var19 <= (int)(var9 + var18); ++var19) {
                 for(int var20 = (int)(var10 - var18); var20 <= (int)(var10 + var18); ++var20) {
                    for(int var21 = (int)(var11 - var18); var21 <= (int)(var11 + var18); ++var21) {
!                      float var22 = var19 - var9;
!                      float var23 = var20 - var10;
!                      float var24 = var21 - var11;
                       if(var22 * var22 + var23 * var23 * 2.0F + var24 * var24 < var18 * var18 && var19 >= 1 && var20 >= 1 && var21 >= 1 && var19 < this.width - 1 && var20 < this.height - 1 && var21 < this.depth - 1) {
                          int var26 = (var20 * this.depth + var21) * this.width + var19;
                          if(this.blocks[var26] == Block.STONE.id) {
***************
*** 433,445 ****
  
     private long flood(int var1, int var2, int var3, int var4, int var5) {
        byte var20 = (byte)var5;
!       ArrayList var21 = new ArrayList();
        byte var6 = 0;
        int var7 = 1;
  
        int var8;
        for(var8 = 1; 1 << var7 < this.width; ++var7) {
-          ;
        }
  
        while(1 << var8 < this.depth) {
--- 431,442 ----
  
     private long flood(int var1, int var2, int var3, int var4, int var5) {
        byte var20 = (byte)var5;
!       ArrayList<int[]> var21 = new ArrayList<int[]>();
        byte var6 = 0;
        int var7 = 1;
  
        int var8;
        for(var8 = 1; 1 << var7 < this.width; ++var7) {
        }
  
        while(1 << var8 < this.depth) {
***************
*** 457,463 ****
           --var22;
           var2 = this.h[var22];
           if(var22 == 0 && var21.size() > 0) {
!             this.h = (int[])var21.remove(var21.size() - 1);
              var22 = this.h.length;
           }
  
--- 454,460 ----
           --var22;
           var2 = this.h[var22];
           if(var22 == 0 && var21.size() > 0) {
!             this.h = var21.remove(var21.size() - 1);
              var22 = this.h.length;
           }
  
***************
*** 483,491 ****
           boolean var23 = false;
           boolean var24 = false;
           boolean var18 = false;
!          var11 += (long)(var15 - var14);
  
!          for(var14 = var14; var14 < var15; ++var14) {
              this.blocks[var2] = var20;
              boolean var19;
              if(var3 > 0) {
--- 480,488 ----
           boolean var23 = false;
           boolean var24 = false;
           boolean var18 = false;
!          var11 += var15 - var14;
  
!          for(; var14 < var15; ++var14) {
              this.blocks[var2] = var20;
              boolean var19;
              if(var3 > 0) {
diff -crB src/com/mojang/minecraft/level/generator/noise/PerlinNoise.java src2/com/mojang/minecraft/level/generator/noise/PerlinNoise.java
*** src/com/mojang/minecraft/level/generator/noise/PerlinNoise.java	2013-03-05 19:01:02.000000000 -0800
--- src2/com/mojang/minecraft/level/generator/noise/PerlinNoise.java	2013-03-05 17:38:43.122822000 -0800
***************
*** 17,23 ****
  
        int var2;
        for(var2 = 0; var2 < 256; this.noise[var2] = var2++) {
-          ;
        }
  
        for(var2 = 0; var2 < 256; ++var2) {
--- 17,22 ----
diff -crB src/com/mojang/minecraft/level/LevelIO.java src2/com/mojang/minecraft/level/LevelIO.java
*** src/com/mojang/minecraft/level/LevelIO.java	2013-03-05 19:01:02.000000000 -0800
--- src2/com/mojang/minecraft/level/LevelIO.java	2013-03-05 17:35:26.750815000 -0800
***************
*** 31,37 ****
     public final boolean save(Level var1, File var2) {
        try {
           FileOutputStream var5 = new FileOutputStream(var2);
!          save(var1, (OutputStream)var5);
           var5.close();
           return true;
        } catch (Exception var4) {
--- 31,37 ----
     public final boolean save(Level var1, File var2) {
        try {
           FileOutputStream var5 = new FileOutputStream(var2);
!          save(var1, var5);
           var5.close();
           return true;
        } catch (Exception var4) {
***************
*** 43,49 ****
           try {
              Thread.sleep(1000L);
           } catch (InterruptedException var3) {
-             ;
           }
  
           return false;
--- 43,48 ----
***************
*** 53,59 ****
     public final Level load(File var1) {
        try {
           FileInputStream var5 = new FileInputStream(var1);
!          Level var2 = this.load((InputStream)var5);
           var5.close();
           return var2;
        } catch (Exception var4) {
--- 52,58 ----
     public final Level load(File var1) {
        try {
           FileInputStream var5 = new FileInputStream(var1);
!          Level var2 = this.load(var5);
           var5.close();
           return var2;
        } catch (Exception var4) {
***************
*** 65,71 ****
           try {
              Thread.sleep(1000L);
           } catch (InterruptedException var3) {
-             ;
           }
  
           return null;
--- 64,69 ----
***************
*** 87,93 ****
           }
  
           ByteArrayOutputStream var7 = new ByteArrayOutputStream();
!          save(var1, (OutputStream)var7);
           var7.close();
           byte[] var10 = var7.toByteArray();
           if(this.progressBar != null && this.progressBar != null) {
--- 85,91 ----
           }
  
           ByteArrayOutputStream var7 = new ByteArrayOutputStream();
!          save(var1, var7);
           var7.close();
           byte[] var10 = var7.toByteArray();
           if(this.progressBar != null && this.progressBar != null) {
***************
*** 132,138 ****
           try {
              Thread.sleep(1000L);
           } catch (InterruptedException var8) {
!             ;
           }
  
           return false;
--- 130,136 ----
           try {
              Thread.sleep(1000L);
           } catch (InterruptedException var8) {
!             
           }
  
           return false;
***************
*** 157,163 ****
  
           DataInputStream var7;
           if((var7 = new DataInputStream(var6.getInputStream())).readUTF().equalsIgnoreCase("ok")) {
!             return this.load((InputStream)var7);
           } else {
              if(this.progressBar != null) {
                 this.progressBar.setText("Failed: " + var7.readUTF());
--- 155,161 ----
  
           DataInputStream var7;
           if((var7 = new DataInputStream(var6.getInputStream())).readUTF().equalsIgnoreCase("ok")) {
!             return this.load(var7);
           } else {
              if(this.progressBar != null) {
                 this.progressBar.setText("Failed: " + var7.readUTF());
***************
*** 176,182 ****
           try {
              Thread.sleep(3000L);
           } catch (InterruptedException var4) {
-             ;
           }
  
           return null;
--- 174,179 ----
***************
*** 226,232 ****
           }
        } catch (Exception var9) {
           var9.printStackTrace();
!          "Failed to load level: " + var9.toString();
           return null;
        }
     }
--- 223,229 ----
           }
        } catch (Exception var9) {
           var9.printStackTrace();
!          this.progressBar.setText("Failed to load level: " + var9.toString());
           return null;
        }
     }
diff -crB src/com/mojang/minecraft/level/Level.java src2/com/mojang/minecraft/level/Level.java
*** src/com/mojang/minecraft/level/Level.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/level/Level.java	2013-03-05 17:16:03.142778000 -0800
***************
*** 35,45 ****
     public int ySpawn;
     public int zSpawn;
     public float rotSpawn;
!    private transient ArrayList renderers = new ArrayList();
     private transient int[] blockers;
     public transient Random random = new Random();
     private transient int randId;
!    private transient ArrayList tickList;
     public BlockMap blockMap;
     private boolean networkMode;
     public transient Minecraft rendererContext$5cd64a7f;
--- 35,45 ----
     public int ySpawn;
     public int zSpawn;
     public float rotSpawn;
!    private transient ArrayList<LevelRenderer> renderers = new ArrayList<LevelRenderer>();
     private transient int[] blockers;
     public transient Random random = new Random();
     private transient int randId;
!    private transient ArrayList<NextTickListEntry> tickList;
     public BlockMap blockMap;
     private boolean networkMode;
     public transient Minecraft rendererContext$5cd64a7f;
***************
*** 58,64 ****
  
     public Level() {
        this.randId = this.random.nextInt();
!       this.tickList = new ArrayList();
        this.networkMode = false;
        this.unprocessed = 0;
        this.tickCount = 0;
--- 58,64 ----
  
     public Level() {
        this.randId = this.random.nextInt();
!       this.tickList = new ArrayList<NextTickListEntry>();
        this.networkMode = false;
        this.unprocessed = 0;
        this.tickCount = 0;
***************
*** 69,81 ****
        if(this.blocks == null) {
           throw new RuntimeException("The level is corrupt!");
        } else {
!          this.renderers = new ArrayList();
           this.blockers = new int[this.width * this.height];
           Arrays.fill(this.blockers, this.depth);
           this.calcLightDepths(0, 0, this.width, this.height);
           this.random = new Random();
           this.randId = this.random.nextInt();
!          this.tickList = new ArrayList();
           if(this.waterLevel == 0) {
              this.waterLevel = this.depth / 2;
           }
--- 69,81 ----
        if(this.blocks == null) {
           throw new RuntimeException("The level is corrupt!");
        } else {
!          this.renderers = new ArrayList<LevelRenderer>();
           this.blockers = new int[this.width * this.height];
           Arrays.fill(this.blockers, this.depth);
           this.calcLightDepths(0, 0, this.width, this.height);
           this.random = new Random();
           this.randId = this.random.nextInt();
!          this.tickList = new ArrayList<NextTickListEntry>();
           if(this.waterLevel == 0) {
              this.waterLevel = this.depth / 2;
           }
***************
*** 113,125 ****
        this.calcLightDepths(0, 0, var1, var3);
  
        for(var1 = 0; var1 < this.renderers.size(); ++var1) {
!          ((LevelRenderer)this.renderers.get(var1)).refresh();
        }
  
        this.tickList.clear();
        this.findSpawn();
        this.initTransient();
-       System.gc();
     }
  
     public void findSpawn() {
--- 113,124 ----
        this.calcLightDepths(0, 0, var1, var3);
  
        for(var1 = 0; var1 < this.renderers.size(); ++var1) {
!          this.renderers.get(var1).refresh();
        }
  
        this.tickList.clear();
        this.findSpawn();
        this.initTransient();
     }
  
     public void findSpawn() {
***************
*** 140,146 ****
              this.zSpawn = var4;
              return;
           }
!       } while((float)var5 <= this.getWaterLevel());
  
        this.xSpawn = var3;
        this.ySpawn = var5;
--- 139,145 ----
              this.zSpawn = var4;
              return;
           }
!       } while(var5 <= this.getWaterLevel());
  
        this.xSpawn = var3;
        this.ySpawn = var5;
***************
*** 154,160 ****
  
              int var8;
              for(var8 = this.depth - 1; var8 > 0 && !this.isLightBlocker(var5, var8, var6); --var8) {
-                ;
              }
  
              this.blockers[var5 + var6 * this.width] = var8;
--- 153,158 ----
***************
*** 163,169 ****
                 var7 = var7 > var8?var7:var8;
  
                 for(var8 = 0; var8 < this.renderers.size(); ++var8) {
!                   ((LevelRenderer)this.renderers.get(var8)).queueChunks(var5 - 1, var9 - 1, var6 - 1, var5 + 1, var7 + 1, var6 + 1);
                 }
              }
           }
--- 161,167 ----
                 var7 = var7 > var8?var7:var8;
  
                 for(var8 = 0; var8 < this.renderers.size(); ++var8) {
!                   this.renderers.get(var8).queueChunks(var5 - 1, var9 - 1, var6 - 1, var5 + 1, var7 + 1, var6 + 1);
                 }
              }
           }
***************
*** 186,193 ****
        return (var4 = Block.blocks[this.getTile(var1, var2, var3)]) == null?false:var4.isOpaque();
     }
  
!    public ArrayList getCubes(AABB var1) {
!       ArrayList var2 = new ArrayList();
        int var3 = (int)var1.x0;
        int var4 = (int)var1.x1 + 1;
        int var5 = (int)var1.y0;
--- 184,191 ----
        return (var4 = Block.blocks[this.getTile(var1, var2, var3)]) == null?false:var4.isOpaque();
     }
  
!    public ArrayList<AABB> getCubes(AABB var1) {
!       ArrayList<AABB> var2 = new ArrayList<AABB>();
        int var3 = (int)var1.x0;
        int var4 = (int)var1.x1 + 1;
        int var5 = (int)var1.y0;
***************
*** 206,212 ****
           --var7;
        }
  
!       for(var3 = var3; var3 < var4; ++var3) {
           for(int var9 = var5; var9 < var6; ++var9) {
              for(int var10 = var7; var10 < var8; ++var10) {
                 AABB var11;
--- 204,210 ----
           --var7;
        }
  
!       for(; var3 < var4; ++var3) {
           for(int var9 = var5; var9 < var6; ++var9) {
              for(int var10 = var7; var10 < var8; ++var10) {
                 AABB var11;
***************
*** 245,251 ****
           if(var4 == this.blocks[(var2 * this.height + var3) * this.width + var1]) {
              return false;
           } else {
!             if(var4 == 0 && (var1 == 0 || var3 == 0 || var1 == this.width - 1 || var3 == this.height - 1) && (float)var2 >= this.getGroundLevel() && (float)var2 < this.getWaterLevel()) {
                 var4 = Block.WATER.id;
              }
  
--- 243,249 ----
           if(var4 == this.blocks[(var2 * this.height + var3) * this.width + var1]) {
              return false;
           } else {
!             if(var4 == 0 && (var1 == 0 || var3 == 0 || var1 == this.width - 1 || var3 == this.height - 1) && var2 >= this.getGroundLevel() && var2 < this.getWaterLevel()) {
                 var4 = Block.WATER.id;
              }
  
***************
*** 262,268 ****
              this.calcLightDepths(var1, var3, 1, 1);
  
              for(var4 = 0; var4 < this.renderers.size(); ++var4) {
!                ((LevelRenderer)this.renderers.get(var4)).queueChunks(var1 - 1, var2 - 1, var3 - 1, var1 + 1, var2 + 1, var3 + 1);
              }
  
              return true;
--- 260,266 ----
              this.calcLightDepths(var1, var3, 1, 1);
  
              for(var4 = 0; var4 < this.renderers.size(); ++var4) {
!                this.renderers.get(var4).queueChunks(var1 - 1, var2 - 1, var3 - 1, var1 + 1, var2 + 1, var3 + 1);
              }
  
              return true;
***************
*** 347,353 ****
  
        int var2;
        for(var2 = 1; 1 << var1 < this.width; ++var1) {
-          ;
        }
  
        while(1 << var2 < this.height) {
--- 345,350 ----
***************
*** 363,370 ****
           var6 = this.tickList.size();
  
           for(var7 = 0; var7 < var6; ++var7) {
!             NextTickListEntry var8;
!             if((var8 = (NextTickListEntry)this.tickList.remove(0)).ticks > 0) {
                 --var8.ticks;
                 this.tickList.add(var8);
              } else {
--- 360,367 ----
           var6 = this.tickList.size();
  
           for(var7 = 0; var7 < var6; ++var7) {
!             NextTickListEntry var8 = this.tickList.remove(0);
!             if(var8.ticks > 0) {
                 --var8.ticks;
                 this.tickList.add(var8);
              } else {
***************
*** 394,404 ****
  
     }
  
!    public int countInstanceOf(Class var1) {
        int var2 = 0;
  
        for(int var3 = 0; var3 < this.blockMap.all.size(); ++var3) {
!          Entity var4 = (Entity)this.blockMap.all.get(var3);
           if(var1.isAssignableFrom(var4.getClass())) {
              ++var2;
           }
--- 391,401 ----
  
     }
  
!    public int countInstanceOf(Class<? extends Entity> var1) {
        int var2 = 0;
  
        for(int var3 = 0; var3 < this.blockMap.all.size(); ++var3) {
!          Entity var4 = this.blockMap.all.get(var3);
           if(var1.isAssignableFrom(var4.getClass())) {
              ++var2;
           }
***************
*** 416,422 ****
     }
  
     public float getWaterLevel() {
!       return (float)this.waterLevel;
     }
  
     public boolean containsAnyLiquid(AABB var1) {
--- 413,419 ----
     }
  
     public float getWaterLevel() {
!       return this.waterLevel;
     }
  
     public boolean containsAnyLiquid(AABB var1) {
***************
*** 549,555 ****
        return this.blockMap.getEntities((Entity)null, var1).size() == 0;
     }
  
!    public List findEntities(Entity var1, AABB var2) {
        return this.blockMap.getEntities(var1, var2);
     }
  
--- 546,552 ----
        return this.blockMap.getEntities((Entity)null, var1).size() == 0;
     }
  
!    public List<Entity> findEntities(Entity var1, AABB var2) {
        return this.blockMap.getEntities(var1, var2);
     }
  
***************
*** 565,571 ****
     public int getHighestTile(int var1, int var2) {
        int var3;
        for(var3 = this.depth; (this.getTile(var1, var3 - 1, var2) == 0 || Block.blocks[this.getTile(var1, var3 - 1, var2)].getLiquidType() != LiquidType.NOT_LIQUID) && var3 > 0; --var3) {
-          ;
        }
  
        return var3;
--- 562,567 ----
***************
*** 592,603 ****
        for(int var9 = var5 - 6; var9 <= var5 + 6; ++var9) {
           for(int var10 = var6 - 6; var10 <= var6 + 6; ++var10) {
              if(this.isInBounds(var9, var14, var10) && !this.isSolidTile(var9, var14, var10)) {
!                float var11 = (float)var9 + 0.5F - var1;
  
                 float var12;
                 float var13;
!                for(var13 = (float)(Math.atan2((double)(var12 = (float)var10 + 0.5F - var3), (double)var11) - (double)(var4 * 3.1415927F / 180.0F) + 1.5707963705062866D); var13 < -3.1415927F; var13 += 6.2831855F) {
!                   ;
                 }
  
                 while(var13 >= 3.1415927F) {
--- 588,598 ----
        for(int var9 = var5 - 6; var9 <= var5 + 6; ++var9) {
           for(int var10 = var6 - 6; var10 <= var6 + 6; ++var10) {
              if(this.isInBounds(var9, var14, var10) && !this.isSolidTile(var9, var14, var10)) {
!                float var11 = var9 + 0.5F - var1;
  
                 float var12;
                 float var13;
!                for(var13 = (float)(Math.atan2(var12 = var10 + 0.5F - var3, var11) - var4 * 3.1415927F / 180.0F + 1.5707963705062866D); var13 < -3.1415927F; var13 += 6.2831855F) {
                 }
  
                 while(var13 >= 3.1415927F) {
***************
*** 654,668 ****
              float var16 = var4 * var14 + var5;
              var14 = var4 - var5 * var14;
              float var17 = var2 * var12 + var3 * var14;
-             var16 = var16;
              var14 = var2 * var14 - var3 * var12;
              int var15 = 0;
  
              while(true) {
                 if(var15 < 10) {
!                   float var18 = var6 + var17 * (float)var15 * 0.8F;
!                   float var19 = var7 + var16 * (float)var15 * 0.8F;
!                   float var20 = var21 + var14 * (float)var15 * 0.8F;
                    if(!this.isSolid(var18, var19, var20)) {
                       ++var9;
                       if(this.isLit((int)var18, (int)var19, (int)var20)) {
--- 649,662 ----
              float var16 = var4 * var14 + var5;
              var14 = var4 - var5 * var14;
              float var17 = var2 * var12 + var3 * var14;
              var14 = var2 * var14 - var3 * var12;
              int var15 = 0;
  
              while(true) {
                 if(var15 < 10) {
!                   float var18 = var6 + var17 * var15 * 0.8F;
!                   float var19 = var7 + var16 * var15 * 0.8F;
!                   float var20 = var21 + var14 * var15 * 0.8F;
                    if(!this.isSolid(var18, var19, var20)) {
                       ++var9;
                       if(this.isLit((int)var18, (int)var19, (int)var20)) {
***************
*** 714,725 ****
     public MovingObjectPosition clip(Vec3D var1, Vec3D var2) {
        if(!Float.isNaN(var1.x) && !Float.isNaN(var1.y) && !Float.isNaN(var1.z)) {
           if(!Float.isNaN(var2.x) && !Float.isNaN(var2.y) && !Float.isNaN(var2.z)) {
!             int var3 = (int)Math.floor((double)var2.x);
!             int var4 = (int)Math.floor((double)var2.y);
!             int var5 = (int)Math.floor((double)var2.z);
!             int var6 = (int)Math.floor((double)var1.x);
!             int var7 = (int)Math.floor((double)var1.y);
!             int var8 = (int)Math.floor((double)var1.z);
              int var9 = 20;
  
              while(var9-- >= 0) {
--- 708,719 ----
     public MovingObjectPosition clip(Vec3D var1, Vec3D var2) {
        if(!Float.isNaN(var1.x) && !Float.isNaN(var1.y) && !Float.isNaN(var1.z)) {
           if(!Float.isNaN(var2.x) && !Float.isNaN(var2.y) && !Float.isNaN(var2.z)) {
!             int var3 = (int)Math.floor(var2.x);
!             int var4 = (int)Math.floor(var2.y);
!             int var5 = (int)Math.floor(var2.z);
!             int var6 = (int)Math.floor(var1.x);
!             int var7 = (int)Math.floor(var1.y);
!             int var8 = (int)Math.floor(var1.z);
              int var9 = 20;
  
              while(var9-- >= 0) {
***************
*** 735,761 ****
                 float var11 = 999.0F;
                 float var12 = 999.0F;
                 if(var3 > var6) {
!                   var10 = (float)var6 + 1.0F;
                 }
  
                 if(var3 < var6) {
!                   var10 = (float)var6;
                 }
  
                 if(var4 > var7) {
!                   var11 = (float)var7 + 1.0F;
                 }
  
                 if(var4 < var7) {
!                   var11 = (float)var7;
                 }
  
                 if(var5 > var8) {
!                   var12 = (float)var8 + 1.0F;
                 }
  
                 if(var5 < var8) {
!                   var12 = (float)var8;
                 }
  
                 float var13 = 999.0F;
--- 729,755 ----
                 float var11 = 999.0F;
                 float var12 = 999.0F;
                 if(var3 > var6) {
!                   var10 = var6 + 1.0F;
                 }
  
                 if(var3 < var6) {
!                   var10 = var6;
                 }
  
                 if(var4 > var7) {
!                   var11 = var7 + 1.0F;
                 }
  
                 if(var4 < var7) {
!                   var11 = var7;
                 }
  
                 if(var5 > var8) {
!                   var12 = var8 + 1.0F;
                 }
  
                 if(var5 < var8) {
!                   var12 = var8;
                 }
  
                 float var13 = 999.0F;
***************
*** 776,782 ****
                    var15 = (var12 - var1.z) / var18;
                 }
  
-                boolean var19 = false;
                 byte var24;
                 if(var13 < var14 && var13 < var15) {
                    if(var3 > var6) {
--- 770,775 ----
***************
*** 811,829 ****
                 }
  
                 Vec3D var20;
!                var6 = (int)((var20 = new Vec3D(var1.x, var1.y, var1.z)).x = (float)Math.floor((double)var1.x));
                 if(var24 == 5) {
                    --var6;
                    ++var20.x;
                 }
  
!                var7 = (int)(var20.y = (float)Math.floor((double)var1.y));
                 if(var24 == 1) {
                    --var7;
                    ++var20.y;
                 }
  
!                var8 = (int)(var20.z = (float)Math.floor((double)var1.z));
                 if(var24 == 3) {
                    --var8;
                    ++var20.z;
--- 804,822 ----
                 }
  
                 Vec3D var20;
!                var6 = (int)((var20 = new Vec3D(var1.x, var1.y, var1.z)).x = (float)Math.floor(var1.x));
                 if(var24 == 5) {
                    --var6;
                    ++var20.x;
                 }
  
!                var7 = (int)(var20.y = (float)Math.floor(var1.y));
                 if(var24 == 1) {
                    --var7;
                    ++var20.y;
                 }
  
!                var8 = (int)(var20.z = (float)Math.floor(var1.z));
                 if(var24 == 3) {
                    --var8;
                    ++var20.z;
***************
*** 966,979 ****
        int var11 = (int)(var4 + var5 + 1.0F);
  
        int var13;
-       float var15;
        float var16;
        for(int var12 = var6; var12 < var7; ++var12) {
           for(var13 = var9 - 1; var13 >= var8; --var13) {
              for(int var14 = var10; var14 < var11; ++var14) {
!                var15 = (float)var12 + 0.5F - var2;
!                var16 = (float)var13 + 0.5F - var3;
!                float var17 = (float)var14 + 0.5F - var4;
                 int var19;
                 if(var12 >= 0 && var13 >= 0 && var14 >= 0 && var12 < this.width && var13 < this.depth && var14 < this.height && var15 * var15 + var16 * var16 + var17 * var17 < var5 * var5 && (var19 = this.getTile(var12, var13, var14)) > 0 && Block.blocks[var19].canExplode()) {
                    Block.blocks[var19].dropItems(this, var12, var13, var14, 0.3F);
--- 959,971 ----
        int var11 = (int)(var4 + var5 + 1.0F);
  
        int var13;
        float var16;
        for(int var12 = var6; var12 < var7; ++var12) {
           for(var13 = var9 - 1; var13 >= var8; --var13) {
              for(int var14 = var10; var14 < var11; ++var14) {
!                float var15 = var12 + 0.5F - var2;
!                var16 = var13 + 0.5F - var3;
!                float var17 = var14 + 0.5F - var4;
                 int var19;
                 if(var12 >= 0 && var13 >= 0 && var14 >= 0 && var12 < this.width && var13 < this.depth && var14 < this.height && var15 * var15 + var16 * var16 + var17 * var17 < var5 * var5 && (var19 = this.getTile(var12, var13, var14)) > 0 && Block.blocks[var19].canExplode()) {
                    Block.blocks[var19].dropItems(this, var12, var13, var14, 0.3F);
***************
*** 984,994 ****
           }
        }
  
!       List var18 = this.blockMap.getEntities(var1, (float)var6, (float)var8, (float)var10, (float)var7, (float)var9, (float)var11);
  
        for(var13 = 0; var13 < var18.size(); ++var13) {
!          Entity var20;
!          if((var15 = (var20 = (Entity)var18.get(var13)).distanceTo(var2, var3, var4) / var5) <= 1.0F) {
              var16 = 1.0F - var15;
              var20.hurt(var1, (int)(var16 * 15.0F + 1.0F));
           }
--- 976,987 ----
           }
        }
  
!       List<Entity> var18 = this.blockMap.getEntities(var1, var6, var8, var10, var7, var9, var11);
  
        for(var13 = 0; var13 < var18.size(); ++var13) {
!          Entity var20 = var18.get(var13);
!          float var15 = var20.distanceTo(var2, var3, var4) / var5;
!          if(var15 <= 1.0F) {
              var16 = 1.0F - var15;
              var20.hurt(var1, (int)(var16 * 15.0F + 1.0F));
           }
***************
*** 996,1004 ****
  
     }
  
!    public Entity findSubclassOf(Class var1) {
        for(int var2 = 0; var2 < this.blockMap.all.size(); ++var2) {
!          Entity var3 = (Entity)this.blockMap.all.get(var2);
           if(var1.isAssignableFrom(var3.getClass())) {
              return var3;
           }
--- 989,997 ----
  
     }
  
!    public Entity findSubclassOf(Class<? extends Entity> var1) {
        for(int var2 = 0; var2 < this.blockMap.all.size(); ++var2) {
!          Entity var3 = this.blockMap.all.get(var2);
           if(var1.isAssignableFrom(var3.getClass())) {
              return var3;
           }
diff -crB src/com/mojang/minecraft/level/LevelObjectInputStream.java src2/com/mojang/minecraft/level/LevelObjectInputStream.java
*** src/com/mojang/minecraft/level/LevelObjectInputStream.java	2013-03-05 19:01:02.000000000 -0800
--- src2/com/mojang/minecraft/level/LevelObjectInputStream.java	2013-03-05 15:46:33.502606000 -0800
***************
*** 1,5 ****
--- 1,6 ----
  package com.mojang.minecraft.level;
  
+ import java.io.IOException;
  import java.io.InputStream;
  import java.io.ObjectInputStream;
  import java.io.ObjectStreamClass;
***************
*** 8,24 ****
  
  public final class LevelObjectInputStream extends ObjectInputStream {
  
!    private Set classes = new HashSet();
  
! 
!    public LevelObjectInputStream(InputStream var1) {
        super(var1);
        this.classes.add("com.mojang.minecraft.player.Player$1");
        this.classes.add("com.mojang.minecraft.mob.Creeper$1");
        this.classes.add("com.mojang.minecraft.mob.Skeleton$1");
     }
  
!    protected final ObjectStreamClass readClassDescriptor() {
        ObjectStreamClass var1 = super.readClassDescriptor();
        return this.classes.contains(var1.getName())?ObjectStreamClass.lookup(Class.forName(var1.getName())):var1;
     }
--- 9,24 ----
  
  public final class LevelObjectInputStream extends ObjectInputStream {
  
!    private Set<String> classes = new HashSet<String>();
  
!    public LevelObjectInputStream(InputStream var1) throws IOException {
        super(var1);
        this.classes.add("com.mojang.minecraft.player.Player$1");
        this.classes.add("com.mojang.minecraft.mob.Creeper$1");
        this.classes.add("com.mojang.minecraft.mob.Skeleton$1");
     }
  
!    protected final ObjectStreamClass readClassDescriptor() throws ClassNotFoundException, IOException {
        ObjectStreamClass var1 = super.readClassDescriptor();
        return this.classes.contains(var1.getName())?ObjectStreamClass.lookup(Class.forName(var1.getName())):var1;
     }
diff -crB src/com/mojang/minecraft/level/MobSpawner.java src2/com/mojang/minecraft/level/MobSpawner.java
*** src/com/mojang/minecraft/level/MobSpawner.java	2013-03-05 19:01:02.000000000 -0800
--- src2/com/mojang/minecraft/level/MobSpawner.java	2013-03-05 17:28:17.798802000 -0800
***************
*** 31,37 ****
  
           int var6 = this.level.random.nextInt(6);
           int var7 = this.level.random.nextInt(this.level.width);
!          int var8 = (int)(Math.min(this.level.random.nextFloat(), this.level.random.nextFloat()) * (float)this.level.depth);
           int var9 = this.level.random.nextInt(this.level.height);
           if(!this.level.isSolidTile(var7, var8, var9) && this.level.getLiquid(var7, var8, var9) == LiquidType.NOT_LIQUID && (!this.level.isLit(var7, var8, var9) || this.level.random.nextInt(5) == 0)) {
              for(int var10 = 0; var10 < 3; ++var10) {
--- 31,37 ----
  
           int var6 = this.level.random.nextInt(6);
           int var7 = this.level.random.nextInt(this.level.width);
!          int var8 = (int)(Math.min(this.level.random.nextFloat(), this.level.random.nextFloat()) * this.level.depth);
           int var9 = this.level.random.nextInt(this.level.height);
           if(!this.level.isSolidTile(var7, var8, var9) && this.level.getLiquid(var7, var8, var9) == LiquidType.NOT_LIQUID && (!this.level.isLit(var7, var8, var9) || this.level.random.nextInt(5) == 0)) {
              for(int var10 = 0; var10 < 3; ++var10) {
***************
*** 44,52 ****
                    var12 += this.level.random.nextInt(1) - this.level.random.nextInt(1);
                    var13 += this.level.random.nextInt(6) - this.level.random.nextInt(6);
                    if(var11 >= 0 && var13 >= 1 && var12 >= 0 && var12 < this.level.depth - 2 && var11 < this.level.width && var13 < this.level.height && this.level.isSolidTile(var11, var12 - 1, var13) && !this.level.isSolidTile(var11, var12, var13) && !this.level.isSolidTile(var11, var12 + 1, var13)) {
!                      float var15 = (float)var11 + 0.5F;
!                      float var16 = (float)var12 + 1.0F;
!                      float var17 = (float)var13 + 0.5F;
                       float var19;
                       float var18;
                       float var20;
--- 44,52 ----
                    var12 += this.level.random.nextInt(1) - this.level.random.nextInt(1);
                    var13 += this.level.random.nextInt(6) - this.level.random.nextInt(6);
                    if(var11 >= 0 && var13 >= 1 && var12 >= 0 && var12 < this.level.depth - 2 && var11 < this.level.width && var13 < this.level.height && this.level.isSolidTile(var11, var12 - 1, var13) && !this.level.isSolidTile(var11, var12, var13) && !this.level.isSolidTile(var11, var12 + 1, var13)) {
!                      float var15 = var11 + 0.5F;
!                      float var16 = var12 + 1.0F;
!                      float var17 = var13 + 0.5F;
                       float var19;
                       float var18;
                       float var20;
***************
*** 58,66 ****
                             continue;
                          }
                       } else {
!                         var18 = var15 - (float)this.level.xSpawn;
!                         var19 = var16 - (float)this.level.ySpawn;
!                         var20 = var17 - (float)this.level.zSpawn;
                          if(var18 * var18 + var19 * var19 + var20 * var20 < 256.0F) {
                             continue;
                          }
--- 58,66 ----
                             continue;
                          }
                       } else {
!                         var18 = var15 - this.level.xSpawn;
!                         var19 = var16 - this.level.ySpawn;
!                         var20 = var17 - this.level.zSpawn;
                          if(var18 * var18 + var19 * var19 + var20 * var20 < 256.0F) {
                             continue;
                          }
Only in src/com/mojang/minecraft/level: SyntheticClass.java
diff -crB src/com/mojang/minecraft/level/tile/Block.java src2/com/mojang/minecraft/level/tile/Block.java
*** src/com/mojang/minecraft/level/tile/Block.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/level/tile/Block.java	2013-03-05 16:58:52.378745000 -0800
***************
*** 183,208 ****
     public final void renderSide(ShapeRenderer var1, int var2, int var3, int var4, int var5, int var6) {
        int var7 = var6 % 16 << 4;
        int var8 = var6 / 16 << 4;
!       float var9 = (float)var7 / 256.0F;
!       float var17 = ((float)var7 + 15.99F) / 256.0F;
!       float var10 = (float)var8 / 256.0F;
!       float var11 = ((float)var8 + 15.99F) / 256.0F;
        if(var5 >= 2 && var6 < 240) {
           if(this.y1 >= 0.0F && this.y2 <= 1.0F) {
!             var10 = ((float)var8 + this.y1 * 15.99F) / 256.0F;
!             var11 = ((float)var8 + this.y2 * 15.99F) / 256.0F;
           } else {
!             var10 = (float)var8 / 256.0F;
!             var11 = ((float)var8 + 15.99F) / 256.0F;
           }
        }
  
!       float var16 = (float)var2 + this.x1;
!       float var14 = (float)var2 + this.x2;
!       float var18 = (float)var3 + this.y1;
!       float var15 = (float)var3 + this.y2;
!       float var12 = (float)var4 + this.z1;
!       float var13 = (float)var4 + this.z2;
        if(var5 == 0) {
           var1.vertexUV(var16, var18, var13, var9, var11);
           var1.vertexUV(var16, var18, var12, var9, var10);
--- 183,208 ----
     public final void renderSide(ShapeRenderer var1, int var2, int var3, int var4, int var5, int var6) {
        int var7 = var6 % 16 << 4;
        int var8 = var6 / 16 << 4;
!       float var9 = var7 / 256.0F;
!       float var17 = (var7 + 15.99F) / 256.0F;
!       float var10 = var8 / 256.0F;
!       float var11 = (var8 + 15.99F) / 256.0F;
        if(var5 >= 2 && var6 < 240) {
           if(this.y1 >= 0.0F && this.y2 <= 1.0F) {
!             var10 = (var8 + this.y1 * 15.99F) / 256.0F;
!             var11 = (var8 + this.y2 * 15.99F) / 256.0F;
           } else {
!             var10 = var8 / 256.0F;
!             var11 = (var8 + 15.99F) / 256.0F;
           }
        }
  
!       float var16 = var2 + this.x1;
!       float var14 = var2 + this.x2;
!       float var18 = var3 + this.y1;
!       float var15 = var3 + this.y2;
!       float var12 = var4 + this.z1;
!       float var13 = var4 + this.z2;
        if(var5 == 0) {
           var1.vertexUV(var16, var18, var13, var9, var11);
           var1.vertexUV(var16, var18, var12, var9, var10);
***************
*** 239,253 ****
     public final void renderSide(ShapeRenderer var1, int var2, int var3, int var4, int var5) {
        int var6;
        float var7;
!       float var8 = (var7 = (float)((var6 = this.getTextureId(var5)) % 16) / 16.0F) + 0.0624375F;
        float var16;
!       float var9 = (var16 = (float)(var6 / 16) / 16.0F) + 0.0624375F;
!       float var10 = (float)var2 + this.x1;
!       float var14 = (float)var2 + this.x2;
!       float var11 = (float)var3 + this.y1;
!       float var15 = (float)var3 + this.y2;
!       float var12 = (float)var4 + this.z1;
!       float var13 = (float)var4 + this.z2;
        if(var5 == 0) {
           var1.vertexUV(var14, var11, var13, var8, var9);
           var1.vertexUV(var14, var11, var12, var8, var16);
--- 239,253 ----
     public final void renderSide(ShapeRenderer var1, int var2, int var3, int var4, int var5) {
        int var6;
        float var7;
!       float var8 = (var7 = (var6 = this.getTextureId(var5)) % 16 / 16.0F) + 0.0624375F;
        float var16;
!       float var9 = (var16 = var6 / 16 / 16.0F) + 0.0624375F;
!       float var10 = var2 + this.x1;
!       float var14 = var2 + this.x2;
!       float var11 = var3 + this.y1;
!       float var15 = var3 + this.y2;
!       float var12 = var4 + this.z1;
!       float var13 = var4 + this.z2;
        if(var5 == 0) {
           var1.vertexUV(var14, var11, var13, var8, var9);
           var1.vertexUV(var14, var11, var12, var8, var16);
***************
*** 293,303 ****
     }
  
     public final AABB getSelectionBox(int var1, int var2, int var3) {
!       return new AABB((float)var1 + this.x1, (float)var2 + this.y1, (float)var3 + this.z1, (float)var1 + this.x2, (float)var2 + this.y2, (float)var3 + this.z2);
     }
  
     public AABB getCollisionBox(int var1, int var2, int var3) {
!       return new AABB((float)var1 + this.x1, (float)var2 + this.y1, (float)var3 + this.z1, (float)var1 + this.x2, (float)var2 + this.y2, (float)var3 + this.z2);
     }
  
     public boolean isOpaque() {
--- 293,303 ----
     }
  
     public final AABB getSelectionBox(int var1, int var2, int var3) {
!       return new AABB(var1 + this.x1, var2 + this.y1, var3 + this.z1, var1 + this.x2, var2 + this.y2, var3 + this.z2);
     }
  
     public AABB getCollisionBox(int var1, int var2, int var3) {
!       return new AABB(var1 + this.x1, var2 + this.y1, var3 + this.z1, var1 + this.x2, var2 + this.y2, var3 + this.z2);
     }
  
     public boolean isOpaque() {
***************
*** 314,323 ****
        for(int var6 = 0; var6 < 4; ++var6) {
           for(int var7 = 0; var7 < 4; ++var7) {
              for(int var8 = 0; var8 < 4; ++var8) {
!                float var9 = (float)var2 + ((float)var6 + 0.5F) / (float)4;
!                float var10 = (float)var3 + ((float)var7 + 0.5F) / (float)4;
!                float var11 = (float)var4 + ((float)var8 + 0.5F) / (float)4;
!                var5.spawnParticle(new TerrainParticle(var1, var9, var10, var11, var9 - (float)var2 - 0.5F, var10 - (float)var3 - 0.5F, var11 - (float)var4 - 0.5F, this));
              }
           }
        }
--- 314,323 ----
        for(int var6 = 0; var6 < 4; ++var6) {
           for(int var7 = 0; var7 < 4; ++var7) {
              for(int var8 = 0; var8 < 4; ++var8) {
!                float var9 = var2 + (var6 + 0.5F) / 4;
!                float var10 = var3 + (var7 + 0.5F) / 4;
!                float var11 = var4 + (var8 + 0.5F) / 4;
!                var5.spawnParticle(new TerrainParticle(var1, var9, var10, var11, var9 - var2 - 0.5F, var10 - var3 - 0.5F, var11 - var4 - 0.5F, this));
              }
           }
        }
***************
*** 326,356 ****
  
     public final void spawnBlockParticles(Level var1, int var2, int var3, int var4, int var5, ParticleManager var6) {
        float var7 = 0.1F;
!       float var8 = (float)var2 + random.nextFloat() * (this.x2 - this.x1 - var7 * 2.0F) + var7 + this.x1;
!       float var9 = (float)var3 + random.nextFloat() * (this.y2 - this.y1 - var7 * 2.0F) + var7 + this.y1;
!       float var10 = (float)var4 + random.nextFloat() * (this.z2 - this.z1 - var7 * 2.0F) + var7 + this.z1;
        if(var5 == 0) {
!          var9 = (float)var3 + this.y1 - var7;
        }
  
        if(var5 == 1) {
!          var9 = (float)var3 + this.y2 + var7;
        }
  
        if(var5 == 2) {
!          var10 = (float)var4 + this.z1 - var7;
        }
  
        if(var5 == 3) {
!          var10 = (float)var4 + this.z2 + var7;
        }
  
        if(var5 == 4) {
!          var8 = (float)var2 + this.x1 - var7;
        }
  
        if(var5 == 5) {
!          var8 = (float)var2 + this.x2 + var7;
        }
  
        var6.spawnParticle((new TerrainParticle(var1, var8, var9, var10, 0.0F, 0.0F, 0.0F, this)).setPower(0.2F).scale(0.6F));
--- 326,356 ----
  
     public final void spawnBlockParticles(Level var1, int var2, int var3, int var4, int var5, ParticleManager var6) {
        float var7 = 0.1F;
!       float var8 = var2 + random.nextFloat() * (this.x2 - this.x1 - var7 * 2.0F) + var7 + this.x1;
!       float var9 = var3 + random.nextFloat() * (this.y2 - this.y1 - var7 * 2.0F) + var7 + this.y1;
!       float var10 = var4 + random.nextFloat() * (this.z2 - this.z1 - var7 * 2.0F) + var7 + this.z1;
        if(var5 == 0) {
!          var9 = var3 + this.y1 - var7;
        }
  
        if(var5 == 1) {
!          var9 = var3 + this.y2 + var7;
        }
  
        if(var5 == 2) {
!          var10 = var4 + this.z1 - var7;
        }
  
        if(var5 == 3) {
!          var10 = var4 + this.z2 + var7;
        }
  
        if(var5 == 4) {
!          var8 = var2 + this.x1 - var7;
        }
  
        if(var5 == 5) {
!          var8 = var2 + this.x2 + var7;
        }
  
        var6.spawnParticle((new TerrainParticle(var1, var8, var9, var10, 0.0F, 0.0F, 0.0F, this)).setPower(0.2F).scale(0.6F));
***************
*** 398,404 ****
                 float var9 = random.nextFloat() * var8 + (1.0F - var8) * 0.5F;
                 float var10 = random.nextFloat() * var8 + (1.0F - var8) * 0.5F;
                 var8 = random.nextFloat() * var8 + (1.0F - var8) * 0.5F;
!                var1.addEntity(new Item(var1, (float)var2 + var9, (float)var3 + var10, (float)var4 + var8, this.getDrop()));
              }
           }
  
--- 398,404 ----
                 float var9 = random.nextFloat() * var8 + (1.0F - var8) * 0.5F;
                 float var10 = random.nextFloat() * var8 + (1.0F - var8) * 0.5F;
                 var8 = random.nextFloat() * var8 + (1.0F - var8) * 0.5F;
!                var1.addEntity(new Item(var1, var2 + var9, var3 + var10, var4 + var8, this.getDrop()));
              }
           }
  
***************
*** 444,451 ****
     }
  
     public final MovingObjectPosition clip(int var1, int var2, int var3, Vec3D var4, Vec3D var5) {
!       var4 = var4.add((float)(-var1), (float)(-var2), (float)(-var3));
!       var5 = var5.add((float)(-var1), (float)(-var2), (float)(-var3));
        Vec3D var6 = var4.getXIntersection(var5, this.x1);
        Vec3D var7 = var4.getXIntersection(var5, this.x2);
        Vec3D var8 = var4.getYIntersection(var5, this.y1);
--- 444,451 ----
     }
  
     public final MovingObjectPosition clip(int var1, int var2, int var3, Vec3D var4, Vec3D var5) {
!       var4 = var4.add((-var1), (-var2), (-var3));
!       var5 = var5.add((-var1), (-var2), (-var3));
        Vec3D var6 = var4.getXIntersection(var5, this.x1);
        Vec3D var7 = var4.getXIntersection(var5, this.x2);
        Vec3D var8 = var4.getYIntersection(var5, this.y1);
***************
*** 529,535 ****
              var12 = 3;
           }
  
!          return new MovingObjectPosition(var1, var2, var3, var12, var11.add((float)var1, (float)var2, (float)var3));
        }
     }
  
--- 529,535 ----
              var12 = 3;
           }
  
!          return new MovingObjectPosition(var1, var2, var3, var12, var11.add(var1, var2, var3));
        }
     }
  
***************
*** 604,624 ****
  
     static {
        Block var10000 = (new StoneBlock(1, 1)).setData(Tile$SoundType.stone, 1.0F, 1.0F, 1.0F);
-       boolean var0 = false;
        Block var1 = var10000;
        var10000.explodes = false;
        STONE = var1;
        GRASS = (new GrassBlock(2)).setData(Tile$SoundType.grass, 0.9F, 1.0F, 0.6F);
        DIRT = (new DirtBlock(3, 2)).setData(Tile$SoundType.grass, 0.8F, 1.0F, 0.5F);
        var10000 = (new Block(4, 16)).setData(Tile$SoundType.stone, 1.0F, 1.0F, 1.5F);
-       var0 = false;
        var1 = var10000;
        var10000.explodes = false;
        COBBLESTONE = var1;
        WOOD = (new Block(5, 4)).setData(Tile$SoundType.wood, 1.0F, 1.0F, 1.5F);
        SAPLING = (new SaplingBlock(6, 15)).setData(Tile$SoundType.none, 0.7F, 1.0F, 0.0F);
        var10000 = (new Block(7, 17)).setData(Tile$SoundType.stone, 1.0F, 1.0F, 999.0F);
-       var0 = false;
        var1 = var10000;
        var10000.explodes = false;
        BEDROCK = var1;
--- 604,621 ----
***************
*** 629,645 ****
        SAND = (new SandBlock(12, 18)).setData(Tile$SoundType.gravel, 0.8F, 1.0F, 0.5F);
        GRAVEL = (new SandBlock(13, 19)).setData(Tile$SoundType.gravel, 0.8F, 1.0F, 0.6F);
        var10000 = (new OreBlock(14, 32)).setData(Tile$SoundType.stone, 1.0F, 1.0F, 3.0F);
-       var0 = false;
        var1 = var10000;
        var10000.explodes = false;
        GOLD_ORE = var1;
        var10000 = (new OreBlock(15, 33)).setData(Tile$SoundType.stone, 1.0F, 1.0F, 3.0F);
-       var0 = false;
        var1 = var10000;
        var10000.explodes = false;
        IRON_ORE = var1;
        var10000 = (new OreBlock(16, 34)).setData(Tile$SoundType.stone, 1.0F, 1.0F, 3.0F);
-       var0 = false;
        var1 = var10000;
        var10000.explodes = false;
        COAL_ORE = var1;
--- 626,639 ----
***************
*** 668,706 ****
        BROWN_MUSHROOM = (new MushroomBlock(39, 29)).setData(Tile$SoundType.none, 0.7F, 1.0F, 0.0F);
        RED_MUSHROOM = (new MushroomBlock(40, 28)).setData(Tile$SoundType.none, 0.7F, 1.0F, 0.0F);
        var10000 = (new MetalBlock(41, 40)).setData(Tile$SoundType.metal, 0.7F, 1.0F, 3.0F);
-       var0 = false;
        var1 = var10000;
        var10000.explodes = false;
        GOLD_BLOCK = var1;
        var10000 = (new MetalBlock(42, 39)).setData(Tile$SoundType.metal, 0.7F, 1.0F, 5.0F);
-       var0 = false;
        var1 = var10000;
        var10000.explodes = false;
        IRON_BLOCK = var1;
        var10000 = (new SlabBlock(43, true)).setData(Tile$SoundType.stone, 1.0F, 1.0F, 2.0F);
-       var0 = false;
        var1 = var10000;
        var10000.explodes = false;
        DOUBLE_SLAB = var1;
        var10000 = (new SlabBlock(44, false)).setData(Tile$SoundType.stone, 1.0F, 1.0F, 2.0F);
-       var0 = false;
        var1 = var10000;
        var10000.explodes = false;
        SLAB = var1;
        var10000 = (new Block(45, 7)).setData(Tile$SoundType.stone, 1.0F, 1.0F, 2.0F);
-       var0 = false;
        var1 = var10000;
        var10000.explodes = false;
        BRICK = var1;
        TNT = (new TNTBlock(46, 8)).setData(Tile$SoundType.cloth, 1.0F, 1.0F, 0.0F);
        BOOKSHELF = (new BookshelfBlock(47, 35)).setData(Tile$SoundType.wood, 1.0F, 1.0F, 1.5F);
        var10000 = (new Block(48, 36)).setData(Tile$SoundType.stone, 1.0F, 1.0F, 1.0F);
-       var0 = false;
        var1 = var10000;
        var10000.explodes = false;
        MOSSY_COBBLESTONE = var1;
        var10000 = (new StoneBlock(49, 37)).setData(Tile$SoundType.stone, 1.0F, 1.0F, 10.0F);
-       var0 = false;
        var1 = var10000;
        var10000.explodes = false;
        OBSIDIAN = var1;
--- 662,693 ----
diff -crB src/com/mojang/minecraft/level/tile/FlowerBlock.java src2/com/mojang/minecraft/level/tile/FlowerBlock.java
*** src/com/mojang/minecraft/level/tile/FlowerBlock.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/level/tile/FlowerBlock.java	2013-03-05 17:28:17.558802000 -0800
***************
*** 31,44 ****
        int var15;
        int var5 = (var15 = this.getTextureId(15)) % 16 << 4;
        int var6 = var15 / 16 << 4;
!       float var16 = (float)var5 / 256.0F;
!       float var17 = ((float)var5 + 15.99F) / 256.0F;
!       float var7 = (float)var6 / 256.0F;
!       float var18 = ((float)var6 + 15.99F) / 256.0F;
  
        for(int var8 = 0; var8 < 2; ++var8) {
!          float var9 = (float)((double)MathHelper.sin((float)var8 * 3.1415927F / 2.0F + 0.7853982F) * 0.5D);
!          float var10 = (float)((double)MathHelper.cos((float)var8 * 3.1415927F / 2.0F + 0.7853982F) * 0.5D);
           float var11 = var2 + 0.5F - var9;
           var9 += var2 + 0.5F;
           float var13 = var3 + 1.0F;
--- 31,44 ----
        int var15;
        int var5 = (var15 = this.getTextureId(15)) % 16 << 4;
        int var6 = var15 / 16 << 4;
!       float var16 = var5 / 256.0F;
!       float var17 = (var5 + 15.99F) / 256.0F;
!       float var7 = var6 / 256.0F;
!       float var18 = (var6 + 15.99F) / 256.0F;
  
        for(int var8 = 0; var8 < 2; ++var8) {
!          float var9 = (float)(MathHelper.sin(var8 * 3.1415927F / 2.0F + 0.7853982F) * 0.5D);
!          float var10 = (float)(MathHelper.cos(var8 * 3.1415927F / 2.0F + 0.7853982F) * 0.5D);
           float var11 = var2 + 0.5F - var9;
           var9 += var2 + 0.5F;
           float var13 = var3 + 1.0F;
***************
*** 56,62 ****
  
     }
  
!    public final AABB getSelectionBox(int var1, int var2, int var3) {
        return null;
     }
  
--- 56,62 ----
  
     }
  
!    public final AABB getCollisionBox(int var1, int var2, int var3) {
        return null;
     }
  
***************
*** 82,93 ****
     public final boolean render(Level var1, int var2, int var3, int var4, ShapeRenderer var5) {
        float var6 = var1.getBrightness(var2, var3, var4);
        var5.color(var6, var6, var6);
!       this.render(var5, (float)var2, (float)var3, (float)var4);
        return true;
     }
  
     public final void renderFullbright(ShapeRenderer var1) {
        var1.color(1.0F, 1.0F, 1.0F);
!       this.render(var1, (float)-2, 0.0F, 0.0F);
     }
  }
--- 82,93 ----
     public final boolean render(Level var1, int var2, int var3, int var4, ShapeRenderer var5) {
        float var6 = var1.getBrightness(var2, var3, var4);
        var5.color(var6, var6, var6);
!       this.render(var5, var2, var3, var4);
        return true;
     }
  
     public final void renderFullbright(ShapeRenderer var1) {
        var1.color(1.0F, 1.0F, 1.0F);
!       this.render(var1, -2, 0.0F, 0.0F);
     }
  }
diff -crB src/com/mojang/minecraft/level/tile/LiquidBlock.java src2/com/mojang/minecraft/level/tile/LiquidBlock.java
*** src/com/mojang/minecraft/level/tile/LiquidBlock.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/level/tile/LiquidBlock.java	2013-03-05 17:31:19.786807000 -0800
***************
*** 43,55 ****
        var1.addToTickNextTick(var2, var3, var4, this.movingId);
     }
  
!    public void update(Level var1, int var2, int var3, int var4, Random var5) {
!       boolean var7 = false;
!       var4 = var4;
!       var3 = var3;
!       var2 = var2;
!       var1 = var1;
!       this = this;
        boolean var8 = false;
  
        boolean var6;
--- 43,49 ----
        var1.addToTickNextTick(var2, var3, var4, this.movingId);
     }
  
!    public void update(Level var1, int var2, int var3, int var4, Random var5) {
        boolean var8 = false;
  
        boolean var6;
***************
*** 58,65 ****
           if(var1.getTile(var2, var3, var4) != 0 || !this.canFlow(var1, var2, var3, var4)) {
              break;
           }
! 
!          if(var6 = var1.setTile(var2, var3, var4, this.movingId)) {
              var8 = true;
           }
        } while(var6 && this.type != LiquidType.LAVA);
--- 52,60 ----
           if(var1.getTile(var2, var3, var4) != 0 || !this.canFlow(var1, var2, var3, var4)) {
              break;
           }
! 
!          var6 = var1.setTile(var2, var3, var4, this.movingId);
!          if(var6) {
              var8 = true;
           }
        } while(var6 && this.type != LiquidType.LAVA);
***************
*** 121,127 ****
        super.renderSide(var1, var2, var3, var4, var5);
     }
  
!    public final AABB getSelectionBox(int var1, int var2, int var3) {
        return null;
     }
  
--- 116,122 ----
        super.renderSide(var1, var2, var3, var4, var5);
     }
  
!    public final AABB getCollisionBox(int var1, int var2, int var3) {
        return null;
     }
  
diff -crB src/com/mojang/minecraft/level/tile/SlabBlock.java src2/com/mojang/minecraft/level/tile/SlabBlock.java
*** src/com/mojang/minecraft/level/tile/SlabBlock.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/level/tile/SlabBlock.java	2013-03-05 17:39:05.582822000 -0800
***************
*** 25,36 ****
        return this.doubleSlab;
     }
  
-    public final void onNeighborChange(Level var1, int var2, int var3, int var4, int var5) {
-       if(this == Block.SLAB) {
-          ;
-       }
-    }
- 
     public final void onAdded(Level var1, int var2, int var3, int var4) {
        if(this != Block.SLAB) {
           super.onAdded(var1, var2, var3, var4);
--- 25,30 ----
diff -crB src/com/mojang/minecraft/level/tile/Tile$SoundType.java src2/com/mojang/minecraft/level/tile/Tile$SoundType.java
*** src/com/mojang/minecraft/level/tile/Tile$SoundType.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/level/tile/Tile$SoundType.java	2013-03-05 17:03:21.458754000 -0800
***************
*** 14,22 ****
     public final String name;
     private final float volume;
     private final float pitch;
-    // $FF: synthetic field
-    private static final Tile$SoundType[] values = new Tile$SoundType[]{none, grass, cloth, gravel, stone, metal, wood};
- 
  
     private Tile$SoundType(String var1, int var2, String var3, float var4, float var5) {
        this.name = var3;
--- 14,19 ----
diff -crB src/com/mojang/minecraft/level/tile/TNTBlock.java src2/com/mojang/minecraft/level/tile/TNTBlock.java
*** src/com/mojang/minecraft/level/tile/TNTBlock.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/level/tile/TNTBlock.java	2013-03-05 17:28:17.826802000 -0800
***************
*** 22,28 ****
     public final void explode(Level var1, int var2, int var3, int var4) {
        if(!var1.creativeMode) {
           PrimedTnt var5;
!          (var5 = new PrimedTnt(var1, (float)var2 + 0.5F, (float)var3 + 0.5F, (float)var4 + 0.5F)).life = random.nextInt(var5.life / 4) + var5.life / 8;
           var1.addEntity(var5);
        }
  
--- 22,28 ----
     public final void explode(Level var1, int var2, int var3, int var4) {
        if(!var1.creativeMode) {
           PrimedTnt var5;
!          (var5 = new PrimedTnt(var1, var2 + 0.5F, var3 + 0.5F, var4 + 0.5F)).life = random.nextInt(var5.life / 4) + var5.life / 8;
           var1.addEntity(var5);
        }
  
***************
*** 30,36 ****
  
     public final void spawnBreakParticles(Level var1, int var2, int var3, int var4, ParticleManager var5) {
        if(!var1.creativeMode) {
!          var1.addEntity(new PrimedTnt(var1, (float)var2 + 0.5F, (float)var3 + 0.5F, (float)var4 + 0.5F));
        } else {
           super.spawnBreakParticles(var1, var2, var3, var4, var5);
        }
--- 30,36 ----
  
     public final void spawnBreakParticles(Level var1, int var2, int var3, int var4, ParticleManager var5) {
        if(!var1.creativeMode) {
!          var1.addEntity(new PrimedTnt(var1, var2 + 0.5F, var3 + 0.5F, var4 + 0.5F));
        } else {
           super.spawnBreakParticles(var1, var2, var3, var4, var5);
        }
diff -crB src/com/mojang/minecraft/MinecraftApplet.java src2/com/mojang/minecraft/MinecraftApplet.java
*** src/com/mojang/minecraft/MinecraftApplet.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/MinecraftApplet.java	2013-03-05 16:58:14.002744000 -0800
***************
*** 78,84 ****
  
     public void stopGameThread() {
        if(this.thread != null) {
-          Minecraft var1 = this.minecraft;
           this.minecraft.running = false;
  
           try {
--- 78,83 ----
diff -crB src/com/mojang/minecraft/Minecraft.java src2/com/mojang/minecraft/Minecraft.java
*** src/com/mojang/minecraft/Minecraft.java	2013-03-05 19:01:02.000000000 -0800
--- src2/com/mojang/minecraft/Minecraft.java	2013-03-05 18:59:38.394977000 -0800
***************
*** 1,12 ****
  package com.mojang.minecraft;
  
- import com.mojang.minecraft.ChatLine;
  import com.mojang.minecraft.Entity;
  import com.mojang.minecraft.GameSettings;
  import com.mojang.minecraft.Minecraft$OS;
  import com.mojang.minecraft.MinecraftApplet;
  import com.mojang.minecraft.MovingObjectPosition;
- import com.mojang.minecraft.OperatingSystemLookup;
  import com.mojang.minecraft.ProgressBarDisplay;
  import com.mojang.minecraft.ResourceDownloadThread;
  import com.mojang.minecraft.SessionData;
--- 1,10 ----
***************
*** 32,45 ****
  import com.mojang.minecraft.level.liquid.LiquidType;
  import com.mojang.minecraft.level.tile.Block;
  import com.mojang.minecraft.mob.Mob;
- import com.mojang.minecraft.model.HumanoidModel;
  import com.mojang.minecraft.model.ModelManager;
  import com.mojang.minecraft.model.ModelPart;
  import com.mojang.minecraft.model.Vec3D;
  import com.mojang.minecraft.net.NetworkManager;
  import com.mojang.minecraft.net.NetworkPlayer;
  import com.mojang.minecraft.net.PacketType;
- import com.mojang.minecraft.particle.Particle;
  import com.mojang.minecraft.particle.ParticleManager;
  import com.mojang.minecraft.particle.WaterDropParticle;
  import com.mojang.minecraft.phys.AABB;
--- 30,41 ----
***************
*** 73,80 ****
  import java.io.FileInputStream;
  import java.io.FileOutputStream;
  import java.io.IOException;
- import java.io.InputStream;
- import java.io.OutputStream;
  import java.nio.IntBuffer;
  import java.util.Collections;
  import java.util.List;
--- 69,74 ----
***************
*** 84,90 ****
  import javax.swing.UIManager;
  import org.lwjgl.BufferUtils;
  import org.lwjgl.LWJGLException;
- import org.lwjgl.input.Controllers;
  import org.lwjgl.input.Cursor;
  import org.lwjgl.input.Keyboard;
  import org.lwjgl.input.Mouse;
--- 78,83 ----
***************
*** 147,153 ****
        this.levelName = null;
        this.levelId = 0;
        this.online = false;
-       new HumanoidModel(0.0F);
        this.selected = null;
        this.server = null;
        this.port = 0;
--- 140,145 ----
***************
*** 164,170 ****
        }
  
        this.applet = var2;
!       new SleepForeverThread(this);
        this.canvas = var1;
        this.width = var3;
        this.height = var4;
--- 156,162 ----
        }
  
        this.applet = var2;
!       new SleepForeverThread(this).start();
        this.canvas = var1;
        this.width = var3;
        this.height = var4;
***************
*** 190,196 ****
              var1 = new GameOverScreen();
           }
  
!          this.currentScreen = (GuiScreen)var1;
           if(var1 != null) {
              if(this.hasMouse) {
                 this.player.releaseAllKeys();
--- 182,188 ----
              var1 = new GameOverScreen();
           }
  
!          this.currentScreen = var1;
           if(var1 != null) {
              if(this.hasMouse) {
                 this.player.releaseAllKeys();
***************
*** 208,214 ****
  
              int var2 = this.width * 240 / this.height;
              int var3 = this.height * 240 / this.height;
!             ((GuiScreen)var1).open(this, var2, var3);
              this.online = false;
           } else {
              this.grabMouse();
--- 200,206 ----
  
              int var2 = this.width * 240 / this.height;
              int var3 = this.height * 240 / this.height;
!             var1.open(this, var2, var3);
              this.online = false;
           } else {
              this.grabMouse();
***************
*** 231,252 ****
     public final void shutdown() {
        try {
           if(this.soundPlayer != null) {
-             SoundPlayer var1 = this.soundPlayer;
              this.soundPlayer.running = false;
           }
  
           if(this.resourceThread != null) {
-             ResourceDownloadThread var4 = this.resourceThread;
              this.resourceThread.stopping = true;
           }
        } catch (Exception var3) {
-          ;
        }
  
-       Minecraft var5 = this;
        if(!this.levelLoaded) {
           try {
!             LevelIO.save(var5.level, (OutputStream)(new FileOutputStream(new File("level.dat"))));
           } catch (Exception var2) {
              var2.printStackTrace();
           }
--- 223,240 ----
     public final void shutdown() {
        try {
           if(this.soundPlayer != null) {
              this.soundPlayer.running = false;
           }
  
           if(this.resourceThread != null) {
              this.resourceThread.stopping = true;
           }
        } catch (Exception var3) {
        }
  
        if(!this.levelLoaded) {
           try {
!             LevelIO.save(this.level, (new FileOutputStream(new File("level.dat"))));
           } catch (Exception var2) {
              var2.printStackTrace();
           }
***************
*** 261,267 ****
        this.running = true;
  
        try {
-          Minecraft var1 = this;
           if(this.canvas != null) {
              Display.setParent(this.canvas);
           } else if(this.fullscreen) {
--- 249,254 ----
***************
*** 282,288 ****
              try {
                 Thread.sleep(1000L);
              } catch (InterruptedException var56) {
-                ;
              }
  
              Display.create();
--- 269,274 ----
***************
*** 291,302 ****
           Keyboard.create();
           Mouse.create();
  
-          try {
-             Controllers.create();
-          } catch (Exception var55) {
-             var55.printStackTrace();
-          }
- 
           checkGLError("Pre startup");
           GL11.glEnable(3553);
           GL11.glShadeModel(7425);
--- 277,282 ----
***************
*** 312,325 ****
           checkGLError("Startup");
           String var3 = "minecraft";
           String var5 = System.getProperty("user.home", ".");
!          String var6;
           File var7;
!          switch(OperatingSystemLookup.lookup[((var6 = System.getProperty("os.name").toLowerCase()).contains("win")?Minecraft$OS.windows:(var6.contains("mac")?Minecraft$OS.macos:(var6.contains("solaris")?Minecraft$OS.solaris:(var6.contains("sunos")?Minecraft$OS.solaris:(var6.contains("linux")?Minecraft$OS.linux:(var6.contains("unix")?Minecraft$OS.linux:Minecraft$OS.unknown)))))).ordinal()]) {
           case 1:
-          case 2:
              var7 = new File(var5, '.' + var3 + '/');
              break;
!          case 3:
              String var8;
              if((var8 = System.getenv("APPDATA")) != null) {
                 var7 = new File(var8, "." + var3 + '/');
--- 292,305 ----
           checkGLError("Startup");
           String var3 = "minecraft";
           String var5 = System.getProperty("user.home", ".");
!          String var6 = System.getProperty("os.name").toLowerCase();
           File var7;
!          switch((var6.contains("win")?Minecraft$OS.windows:(var6.contains("mac")?Minecraft$OS.macos:(var6.contains("solaris")?Minecraft$OS.solaris:(var6.contains("sunos")?Minecraft$OS.solaris:(var6.contains("linux")?Minecraft$OS.linux:(var6.contains("unix")?Minecraft$OS.linux:Minecraft$OS.unknown)))))).ordinal()) {
!          case 0:
           case 1:
              var7 = new File(var5, '.' + var3 + '/');
              break;
!          case 2:
              String var8;
              if((var8 = System.getenv("APPDATA")) != null) {
                 var7 = new File(var8, "." + var3 + '/');
***************
*** 327,333 ****
                 var7 = new File(var5, '.' + var3 + '/');
              }
              break;
!          case 4:
              var7 = new File(var5, "Library/Application Support/" + var3);
              break;
           default:
--- 307,313 ----
                 var7 = new File(var5, '.' + var3 + '/');
              }
              break;
!          case 3:
              var7 = new File(var5, "Library/Application Support/" + var3);
              break;
           default:
***************
*** 355,369 ****
              (var85 = new Level()).setData(8, 8, 8, new byte[512]);
              this.setLevel(var85);
           } else {
-             boolean var10 = false;
- 
              try {
!                if(var1.levelName != null) {
!                   var1.loadOnlineLevel(var1.levelName, var1.levelId);
!                } else if(!var1.levelLoaded) {
                    Level var11 = null;
!                   if((var11 = var1.levelIo.load((InputStream)(new FileInputStream(new File("level.dat"))))) != null) {
!                      var1.setLevel(var11);
                    }
                 }
              } catch (Exception var54) {
--- 335,347 ----
              (var85 = new Level()).setData(8, 8, 8, new byte[512]);
              this.setLevel(var85);
           } else {
              try {
!                if(this.levelName != null) {
!                   this.loadOnlineLevel(this.levelName, this.levelId);
!                } else if(!this.levelLoaded) {
                    Level var11 = null;
!                   if((var11 = this.levelIo.load((new FileInputStream(new File("level.dat"))))) != null) {
!                      this.setLevel(var11);
                    }
                 }
              } catch (Exception var54) {
***************
*** 378,392 ****
           this.particleManager = new ParticleManager(this.level, this.textureManager);
           if(this.levelLoaded) {
              try {
!                var1.cursor = new Cursor(16, 16, 0, 0, 1, var9, (IntBuffer)null);
              } catch (LWJGLException var53) {
                 var53.printStackTrace();
              }
           }
  
           try {
!             var1.soundPlayer = new SoundPlayer(var1.settings);
!             SoundPlayer var4 = var1.soundPlayer;
  
              try {
                 AudioFormat var67 = new AudioFormat(44100.0F, 16, 2, true, true);
--- 356,370 ----
           this.particleManager = new ParticleManager(this.level, this.textureManager);
           if(this.levelLoaded) {
              try {
!                this.cursor = new Cursor(16, 16, 0, 0, 1, var9, (IntBuffer)null);
              } catch (LWJGLException var53) {
                 var53.printStackTrace();
              }
           }
  
           try {
!             this.soundPlayer = new SoundPlayer(this.settings);
!             SoundPlayer var4 = this.soundPlayer;
  
              try {
                 AudioFormat var67 = new AudioFormat(44100.0F, 16, 2, true, true);
***************
*** 403,412 ****
                 var4.running = false;
              }
  
!             var1.resourceThread = new ResourceDownloadThread(var2, var1);
!             var1.resourceThread.start();
           } catch (Exception var52) {
-             ;
           }
  
           checkGLError("Post startup");
--- 381,389 ----
                 var4.running = false;
              }
  
!             this.resourceThread = new ResourceDownloadThread(var2, this);
!             this.resourceThread.start();
           } catch (Exception var52) {
           }
  
           checkGLError("Post startup");
***************
*** 453,459 ****
                    }
  
                    double var95;
!                   var24 = ((var95 = (double)var20 / 1000.0D) - var63.lastHR) * var63.adjustment;
                    var63.lastHR = var95;
                    if(var24 < 0.0D) {
                       var24 = 0.0D;
--- 430,436 ----
                    }
  
                    double var95;
!                   var24 = ((var95 = var20 / 1000.0D) - var63.lastHR) * var63.adjustment;
                    var63.lastHR = var95;
                    if(var24 < 0.0D) {
                       var24 = 0.0D;
***************
*** 463,475 ****
                       var24 = 1.0D;
                    }
  
!                   var63.elapsedDelta = (float)((double)var63.elapsedDelta + var24 * (double)var63.speed * (double)var63.tps);
                    var63.elapsedTicks = (int)var63.elapsedDelta;
                    if(var63.elapsedTicks > 100) {
                       var63.elapsedTicks = 100;
                    }
  
!                   var63.elapsedDelta -= (float)var63.elapsedTicks;
                    var63.delta = var63.elapsedDelta;
  
                    for(int var64 = 0; var64 < this.timer.elapsedTicks; ++var64) {
--- 440,452 ----
                       var24 = 1.0D;
                    }
  
!                   var63.elapsedDelta = (float)(var63.elapsedDelta + var24 * var63.speed * var63.tps);
                    var63.elapsedTicks = (int)var63.elapsedDelta;
                    if(var63.elapsedTicks > 100) {
                       var63.elapsedTicks = 100;
                    }
  
!                   var63.elapsedDelta -= var63.elapsedTicks;
                    var63.delta = var63.elapsedDelta;
  
                    for(int var64 = 0; var64 < this.timer.elapsedTicks; ++var64) {
***************
*** 517,523 ****
                             var91 = -1;
                          }
  
!                         var66.minecraft.player.turn((float)var81, (float)(var86 * var91));
                       }
  
                       if(!var66.minecraft.online) {
--- 494,500 ----
                             var91 = -1;
                          }
  
!                         var66.minecraft.player.turn(var81, var86 * var91);
                       }
  
                       if(!var66.minecraft.online) {
***************
*** 556,567 ****
  
                             var71 = var31.add(var34 * var36, var33 * var36, var87 * var36);
                             var66.entity = null;
!                            List var37 = var66.minecraft.level.blockMap.getEntities(var28, var28.bb.expand(var34 * var36, var33 * var36, var87 * var36));
                             float var35 = 0.0F;
  
                             for(var81 = 0; var81 < var37.size(); ++var81) {
                                Entity var88;
!                               if((var88 = (Entity)var37.get(var81)).isPickable()) {
                                   var74 = 0.1F;
                                   MovingObjectPosition var78;
                                   if((var78 = var88.bb.grow(var74, var74, var74).clip(var31, var71)) != null && ((var74 = var31.distance(var78.vec)) < var35 || var35 == 0.0F)) {
--- 533,544 ----
  
                             var71 = var31.add(var34 * var36, var33 * var36, var87 * var36);
                             var66.entity = null;
!                            List<Entity> var37 = var66.minecraft.level.blockMap.getEntities(var28, var28.bb.expand(var34 * var36, var33 * var36, var87 * var36));
                             float var35 = 0.0F;
  
                             for(var81 = 0; var81 < var37.size(); ++var81) {
                                Entity var88;
!                               if((var88 = var37.get(var81)).isPickable()) {
                                   var74 = 0.1F;
                                   MovingObjectPosition var78;
                                   if((var78 = var88.bb.grow(var74, var74, var74).clip(var31, var71)) != null && ((var74 = var31.distance(var78.vec)) < var35 || var35 == 0.0F)) {
***************
*** 598,611 ****
                                GL11.glViewport(0, 0, var82.minecraft.width, var82.minecraft.height);
                                Level var26 = var82.minecraft.level;
                                var28 = var82.minecraft.player;
!                               var29 = 1.0F / (float)(4 - var82.minecraft.settings.viewDistance);
!                               var29 = 1.0F - (float)Math.pow((double)var29, 0.25D);
!                               var30 = (float)(var26.skyColor >> 16 & 255) / 255.0F;
!                               float var117 = (float)(var26.skyColor >> 8 & 255) / 255.0F;
!                               var32 = (float)(var26.skyColor & 255) / 255.0F;
!                               var82.fogRed = (float)(var26.fogColor >> 16 & 255) / 255.0F;
!                               var82.fogBlue = (float)(var26.fogColor >> 8 & 255) / 255.0F;
!                               var82.fogGreen = (float)(var26.fogColor & 255) / 255.0F;
                                var82.fogRed += (var30 - var82.fogRed) * var29;
                                var82.fogBlue += (var117 - var82.fogBlue) * var29;
                                var82.fogGreen += (var32 - var82.fogGreen) * var29;
--- 575,588 ----
                                GL11.glViewport(0, 0, var82.minecraft.width, var82.minecraft.height);
                                Level var26 = var82.minecraft.level;
                                var28 = var82.minecraft.player;
!                               var29 = 1.0F / (4 - var82.minecraft.settings.viewDistance);
!                               var29 = 1.0F - (float)Math.pow(var29, 0.25D);
!                               var30 = (var26.skyColor >> 16 & 255) / 255.0F;
!                               float var117 = (var26.skyColor >> 8 & 255) / 255.0F;
!                               var32 = (var26.skyColor & 255) / 255.0F;
!                               var82.fogRed = (var26.fogColor >> 16 & 255) / 255.0F;
!                               var82.fogBlue = (var26.fogColor >> 8 & 255) / 255.0F;
!                               var82.fogGreen = (var26.fogColor & 255) / 255.0F;
                                var82.fogRed += (var30 - var82.fogRed) * var29;
                                var82.fogBlue += (var117 - var82.fogBlue) * var29;
                                var82.fogGreen += (var32 - var82.fogGreen) * var29;
***************
*** 639,656 ****
                                GL11.glClear(16640);
                                var82.fogColorMultiplier = 1.0F;
                                GL11.glEnable(2884);
!                               var82.fogEnd = (float)(512 >> (var82.minecraft.settings.viewDistance << 1));
                                GL11.glMatrixMode(5889);
                                GL11.glLoadIdentity();
                                var29 = 0.07F;
                                if(var82.minecraft.settings.anaglyph) {
!                                  GL11.glTranslatef((float)(-((var77 << 1) - 1)) * var29, 0.0F, 0.0F);
                                }
  
                                Player var116 = var82.minecraft.player;
                                var69 = 70.0F;
                                if(var116.health <= 0) {
!                                  var74 = (float)var116.deathTime + var80;
                                   var69 /= (1.0F - 500.0F / (var74 + 500.0F)) * 2.0F + 1.0F;
                                }
  
--- 616,633 ----
                                GL11.glClear(16640);
                                var82.fogColorMultiplier = 1.0F;
                                GL11.glEnable(2884);
!                               var82.fogEnd = 512 >> (var82.minecraft.settings.viewDistance << 1);
                                GL11.glMatrixMode(5889);
                                GL11.glLoadIdentity();
                                var29 = 0.07F;
                                if(var82.minecraft.settings.anaglyph) {
!                                  GL11.glTranslatef((-((var77 << 1) - 1)) * var29, 0.0F, 0.0F);
                                }
  
                                Player var116 = var82.minecraft.player;
                                var69 = 70.0F;
                                if(var116.health <= 0) {
!                                  var74 = var116.deathTime + var80;
                                   var69 /= (1.0F - 500.0F / (var74 + 500.0F)) * 2.0F + 1.0F;
                                }
  
***************
*** 658,664 ****
                                GL11.glMatrixMode(5888);
                                GL11.glLoadIdentity();
                                if(var82.minecraft.settings.anaglyph) {
!                                  GL11.glTranslatef((float)((var77 << 1) - 1) * 0.1F, 0.0F, 0.0F);
                                }
  
                                var82.hurtEffect(var80);
--- 635,641 ----
                                GL11.glMatrixMode(5888);
                                GL11.glLoadIdentity();
                                if(var82.minecraft.settings.anaglyph) {
!                                  GL11.glTranslatef(((var77 << 1) - 1) * 0.1F, 0.0F, 0.0F);
                                }
  
                                var82.hurtEffect(var80);
***************
*** 694,700 ****
                                int var104;
                                for(var104 = 0; var104 < var105; ++var104) {
                                   Chunk var118;
!                                  (var118 = (Chunk)var101.chunks.remove(var98 - var104)).update();
                                   var118.loaded = false;
                                }
  
--- 671,677 ----
                                int var104;
                                for(var104 = 0; var104 < var105; ++var104) {
                                   Chunk var118;
!                                  (var118 = var101.chunks.remove(var98 - var104)).update();
                                   var118.loaded = false;
                                }
  
***************
*** 774,780 ****
                                      ShapeRenderer.instance.begin();
  
                                      for(var120 = 0; var120 < var96.particles[var83].size(); ++var120) {
!                                        ((Particle)var96.particles[var83].get(var120)).render(var121, var107, var29, var69, var30, var117, var32);
                                      }
  
                                      var121.end();
--- 751,757 ----
                                      ShapeRenderer.instance.begin();
  
                                      for(var120 = 0; var120 < var96.particles[var83].size(); ++var120) {
!                                        var96.particles[var83].get(var120).render(var121, var107, var29, var69, var30, var117, var32);
                                      }
  
                                      var121.end();
***************
*** 788,796 ****
                                var101 = var89;
                                GL11.glBindTexture(3553, var89.textureManager.load("/clouds.png"));
                                GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
!                               var107 = (float)(var89.level.cloudColor >> 16 & 255) / 255.0F;
!                               var29 = (float)(var89.level.cloudColor >> 8 & 255) / 255.0F;
!                               var30 = (float)(var89.level.cloudColor & 255) / 255.0F;
                                if(var89.minecraft.settings.anaglyph) {
                                   var117 = (var107 * 30.0F + var29 * 59.0F + var30 * 11.0F) / 100.0F;
                                   var32 = (var107 * 30.0F + var29 * 70.0F) / 100.0F;
--- 765,773 ----
                                var101 = var89;
                                GL11.glBindTexture(3553, var89.textureManager.load("/clouds.png"));
                                GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
!                               var107 = (var89.level.cloudColor >> 16 & 255) / 255.0F;
!                               var29 = (var89.level.cloudColor >> 8 & 255) / 255.0F;
!                               var30 = (var89.level.cloudColor & 255) / 255.0F;
                                if(var89.minecraft.settings.anaglyph) {
                                   var117 = (var107 * 30.0F + var29 * 59.0F + var30 * 11.0F) / 100.0F;
                                   var32 = (var107 * 30.0F + var29 * 70.0F) / 100.0F;
***************
*** 803,833 ****
                                var115 = ShapeRenderer.instance;
                                var74 = 0.0F;
                                var33 = 4.8828125E-4F;
!                               var74 = (float)(var89.level.depth + 2);
!                               var34 = ((float)var89.ticks + var80) * var33 * 0.03F;
                                var35 = 0.0F;
                                var115.begin();
                                var115.color(var107, var29, var30);
  
                                for(var86 = -2048; var86 < var101.level.width + 2048; var86 += 512) {
                                   for(var125 = -2048; var125 < var101.level.height + 2048; var125 += 512) {
!                                     var115.vertexUV((float)var86, var74, (float)(var125 + 512), (float)var86 * var33 + var34, (float)(var125 + 512) * var33);
!                                     var115.vertexUV((float)(var86 + 512), var74, (float)(var125 + 512), (float)(var86 + 512) * var33 + var34, (float)(var125 + 512) * var33);
!                                     var115.vertexUV((float)(var86 + 512), var74, (float)var125, (float)(var86 + 512) * var33 + var34, (float)var125 * var33);
!                                     var115.vertexUV((float)var86, var74, (float)var125, (float)var86 * var33 + var34, (float)var125 * var33);
!                                     var115.vertexUV((float)var86, var74, (float)var125, (float)var86 * var33 + var34, (float)var125 * var33);
!                                     var115.vertexUV((float)(var86 + 512), var74, (float)var125, (float)(var86 + 512) * var33 + var34, (float)var125 * var33);
!                                     var115.vertexUV((float)(var86 + 512), var74, (float)(var125 + 512), (float)(var86 + 512) * var33 + var34, (float)(var125 + 512) * var33);
!                                     var115.vertexUV((float)var86, var74, (float)(var125 + 512), (float)var86 * var33 + var34, (float)(var125 + 512) * var33);
                                   }
                                }
  
                                var115.end();
                                GL11.glDisable(3553);
                                var115.begin();
!                               var34 = (float)(var101.level.skyColor >> 16 & 255) / 255.0F;
!                               var35 = (float)(var101.level.skyColor >> 8 & 255) / 255.0F;
!                               var87 = (float)(var101.level.skyColor & 255) / 255.0F;
                                if(var101.minecraft.settings.anaglyph) {
                                   var36 = (var34 * 30.0F + var35 * 59.0F + var87 * 11.0F) / 100.0F;
                                   var69 = (var34 * 30.0F + var35 * 70.0F) / 100.0F;
--- 780,810 ----
                                var115 = ShapeRenderer.instance;
                                var74 = 0.0F;
                                var33 = 4.8828125E-4F;
!                               var74 = var89.level.depth + 2;
!                               var34 = (var89.ticks + var80) * var33 * 0.03F;
                                var35 = 0.0F;
                                var115.begin();
                                var115.color(var107, var29, var30);
  
                                for(var86 = -2048; var86 < var101.level.width + 2048; var86 += 512) {
                                   for(var125 = -2048; var125 < var101.level.height + 2048; var125 += 512) {
!                                     var115.vertexUV(var86, var74, var125 + 512, var86 * var33 + var34, (var125 + 512) * var33);
!                                     var115.vertexUV(var86 + 512, var74, var125 + 512, (var86 + 512) * var33 + var34, (var125 + 512) * var33);
!                                     var115.vertexUV(var86 + 512, var74, var125, (var86 + 512) * var33 + var34, var125 * var33);
!                                     var115.vertexUV(var86, var74, var125, var86 * var33 + var34, var125 * var33);
!                                     var115.vertexUV(var86, var74, var125, var86 * var33 + var34, var125 * var33);
!                                     var115.vertexUV(var86 + 512, var74, var125, (var86 + 512) * var33 + var34, var125 * var33);
!                                     var115.vertexUV(var86 + 512, var74, var125 + 512, (var86 + 512) * var33 + var34, (var125 + 512) * var33);
!                                     var115.vertexUV(var86, var74, var125 + 512, var86 * var33 + var34, (var125 + 512) * var33);
                                   }
                                }
  
                                var115.end();
                                GL11.glDisable(3553);
                                var115.begin();
!                               var34 = (var101.level.skyColor >> 16 & 255) / 255.0F;
!                               var35 = (var101.level.skyColor >> 8 & 255) / 255.0F;
!                               var87 = (var101.level.skyColor & 255) / 255.0F;
                                if(var101.minecraft.settings.anaglyph) {
                                   var36 = (var34 * 30.0F + var35 * 59.0F + var87 * 11.0F) / 100.0F;
                                   var69 = (var34 * 30.0F + var35 * 70.0F) / 100.0F;
***************
*** 838,851 ****
                                }
  
                                var115.color(var34, var35, var87);
!                               var74 = (float)(var101.level.depth + 10);
  
                                for(var125 = -2048; var125 < var101.level.width + 2048; var125 += 512) {
                                   for(var68 = -2048; var68 < var101.level.height + 2048; var68 += 512) {
!                                     var115.vertex((float)var125, var74, (float)var68);
!                                     var115.vertex((float)(var125 + 512), var74, (float)var68);
!                                     var115.vertex((float)(var125 + 512), var74, (float)(var68 + 512));
!                                     var115.vertex((float)var125, var74, (float)(var68 + 512));
                                   }
                                }
  
--- 815,828 ----
                                }
  
                                var115.color(var34, var35, var87);
!                               var74 = var101.level.depth + 10;
  
                                for(var125 = -2048; var125 < var101.level.width + 2048; var125 += 512) {
                                   for(var68 = -2048; var68 < var101.level.height + 2048; var68 += 512) {
!                                     var115.vertex(var125, var74, var68);
!                                     var115.vertex(var125 + 512, var74, var68);
!                                     var115.vertex(var125 + 512, var74, var68 + 512);
!                                     var115.vertex(var125, var74, var68 + 512);
                                   }
                                }
  
***************
*** 855,891 ****
                                int var108;
                                if(var82.minecraft.selected != null) {
                                   GL11.glDisable(3008);
-                                  MovingObjectPosition var10001 = var82.minecraft.selected;
                                   var105 = var126.inventory.getSelected();
!                                  boolean var106 = false;
!                                  MovingObjectPosition var102 = var10001;
                                   var101 = var89;
                                   ShapeRenderer var113 = ShapeRenderer.instance;
                                   GL11.glEnable(3042);
                                   GL11.glEnable(3008);
                                   GL11.glBlendFunc(770, 1);
!                                  GL11.glColor4f(1.0F, 1.0F, 1.0F, (MathHelper.sin((float)System.currentTimeMillis() / 100.0F) * 0.2F + 0.4F) * 0.5F);
                                   if(var89.cracks > 0.0F) {
                                      GL11.glBlendFunc(774, 768);
                                      var108 = var89.textureManager.load("/terrain.png");
                                      GL11.glBindTexture(3553, var108);
                                      GL11.glColor4f(1.0F, 1.0F, 1.0F, 0.5F);
                                      GL11.glPushMatrix();
!                                     Block var10000 = (var114 = var89.level.getTile(var102.x, var102.y, var102.z)) > 0?Block.blocks[var114]:null;
!                                     var73 = var10000;
!                                     var74 = (var10000.x1 + var73.x2) / 2.0F;
                                      var33 = (var73.y1 + var73.y2) / 2.0F;
                                      var34 = (var73.z1 + var73.z2) / 2.0F;
!                                     GL11.glTranslatef((float)var102.x + var74, (float)var102.y + var33, (float)var102.z + var34);
                                      var35 = 1.01F;
                                      GL11.glScalef(1.01F, var35, var35);
!                                     GL11.glTranslatef(-((float)var102.x + var74), -((float)var102.y + var33), -((float)var102.z + var34));
                                      var113.begin();
                                      var113.noColor();
                                      GL11.glDepthMask(false);
-                                     if(var73 == null) {
-                                        var73 = Block.STONE;
-                                     }
  
                                      for(var86 = 0; var86 < 6; ++var86) {
                                         var73.renderSide(var113, var102.x, var102.y, var102.z, var86, 240 + (int)(var101.cracks * 10.0F));
--- 832,866 ----
                                int var108;
                                if(var82.minecraft.selected != null) {
                                   GL11.glDisable(3008);
                                   var105 = var126.inventory.getSelected();
!                                  MovingObjectPosition var102 = var82.minecraft.selected;
                                   var101 = var89;
                                   ShapeRenderer var113 = ShapeRenderer.instance;
                                   GL11.glEnable(3042);
                                   GL11.glEnable(3008);
                                   GL11.glBlendFunc(770, 1);
!                                  GL11.glColor4f(1.0F, 1.0F, 1.0F, (MathHelper.sin(System.currentTimeMillis() / 100.0F) * 0.2F + 0.4F) * 0.5F);
                                   if(var89.cracks > 0.0F) {
                                      GL11.glBlendFunc(774, 768);
                                      var108 = var89.textureManager.load("/terrain.png");
                                      GL11.glBindTexture(3553, var108);
                                      GL11.glColor4f(1.0F, 1.0F, 1.0F, 0.5F);
                                      GL11.glPushMatrix();
!                                     var73 = (var114 = var89.level.getTile(var102.x, var102.y, var102.z)) > 0?Block.blocks[var114]:null;
!                                     if(var73 == null) {
!                                         var73 = Block.STONE;
!                                      }
!                                     
!                                     var74 = (var73.x1 + var73.x2) / 2.0F;
                                      var33 = (var73.y1 + var73.y2) / 2.0F;
                                      var34 = (var73.z1 + var73.z2) / 2.0F;
!                                     GL11.glTranslatef(var102.x + var74, var102.y + var33, var102.z + var34);
                                      var35 = 1.01F;
                                      GL11.glScalef(1.01F, var35, var35);
!                                     GL11.glTranslatef(-(var102.x + var74), -(var102.y + var33), -(var102.z + var34));
                                      var113.begin();
                                      var113.noColor();
                                      GL11.glDepthMask(false);
  
                                      for(var86 = 0; var86 < 6; ++var86) {
                                         var73.renderSide(var113, var102.x, var102.y, var102.z, var86, 240 + (int)(var101.cracks * 10.0F));
***************
*** 898,907 ****
  
                                   GL11.glDisable(3042);
                                   GL11.glDisable(3008);
!                                  var10001 = var82.minecraft.selected;
                                   var126.inventory.getSelected();
-                                  var106 = false;
-                                  var102 = var10001;
                                   GL11.glEnable(3042);
                                   GL11.glBlendFunc(770, 771);
                                   GL11.glColor4f(0.0F, 0.0F, 0.0F, 0.4F);
--- 873,880 ----
  
                                   GL11.glDisable(3042);
                                   GL11.glDisable(3008);
!                                  var102 = var82.minecraft.selected;
                                   var126.inventory.getSelected();
                                   GL11.glEnable(3042);
                                   GL11.glBlendFunc(770, 771);
                                   GL11.glColor4f(0.0F, 0.0F, 0.0F, 0.4F);
***************
*** 999,1018 ****
                                         }
  
                                         if(var86 != var125) {
!                                           var74 = ((float)((var27.levelTicks + var110 * 3121 + var122 * 418711) % 32) + var97) / 32.0F;
!                                           float var124 = (float)var110 + 0.5F - var28.x;
!                                           var35 = (float)var122 + 0.5F - var28.z;
!                                           float var92 = MathHelper.sqrt(var124 * var124 + var35 * var35) / (float)5;
                                            GL11.glColor4f(1.0F, 1.0F, 1.0F, (1.0F - var92 * var92) * 0.7F);
                                            var84.begin();
!                                           var84.vertexUV((float)var110, (float)var86, (float)var122, 0.0F, (float)var86 * 2.0F / 8.0F + var74 * 2.0F);
!                                           var84.vertexUV((float)(var110 + 1), (float)var86, (float)(var122 + 1), 2.0F, (float)var86 * 2.0F / 8.0F + var74 * 2.0F);
!                                           var84.vertexUV((float)(var110 + 1), (float)var125, (float)(var122 + 1), 2.0F, (float)var125 * 2.0F / 8.0F + var74 * 2.0F);
!                                           var84.vertexUV((float)var110, (float)var125, (float)var122, 0.0F, (float)var125 * 2.0F / 8.0F + var74 * 2.0F);
!                                           var84.vertexUV((float)var110, (float)var86, (float)(var122 + 1), 0.0F, (float)var86 * 2.0F / 8.0F + var74 * 2.0F);
!                                           var84.vertexUV((float)(var110 + 1), (float)var86, (float)var122, 2.0F, (float)var86 * 2.0F / 8.0F + var74 * 2.0F);
!                                           var84.vertexUV((float)(var110 + 1), (float)var125, (float)var122, 2.0F, (float)var125 * 2.0F / 8.0F + var74 * 2.0F);
!                                           var84.vertexUV((float)var110, (float)var125, (float)(var122 + 1), 0.0F, (float)var125 * 2.0F / 8.0F + var74 * 2.0F);
                                            var84.end();
                                         }
                                      }
--- 972,991 ----
                                         }
  
                                         if(var86 != var125) {
!                                           var74 = ((var27.levelTicks + var110 * 3121 + var122 * 418711) % 32 + var97) / 32.0F;
!                                           float var124 = var110 + 0.5F - var28.x;
!                                           var35 = var122 + 0.5F - var28.z;
!                                           float var92 = MathHelper.sqrt(var124 * var124 + var35 * var35) / 5;
                                            GL11.glColor4f(1.0F, 1.0F, 1.0F, (1.0F - var92 * var92) * 0.7F);
                                            var84.begin();
!                                           var84.vertexUV(var110, var86, var122, 0.0F, var86 * 2.0F / 8.0F + var74 * 2.0F);
!                                           var84.vertexUV(var110 + 1, var86, var122 + 1, 2.0F, var86 * 2.0F / 8.0F + var74 * 2.0F);
!                                           var84.vertexUV(var110 + 1, var125, var122 + 1, 2.0F, var125 * 2.0F / 8.0F + var74 * 2.0F);
!                                           var84.vertexUV(var110, var125, var122, 0.0F, var125 * 2.0F / 8.0F + var74 * 2.0F);
!                                           var84.vertexUV(var110, var86, var122 + 1, 0.0F, var86 * 2.0F / 8.0F + var74 * 2.0F);
!                                           var84.vertexUV(var110 + 1, var86, var122, 2.0F, var86 * 2.0F / 8.0F + var74 * 2.0F);
!                                           var84.vertexUV(var110 + 1, var125, var122, 2.0F, var125 * 2.0F / 8.0F + var74 * 2.0F);
!                                           var84.vertexUV(var110, var125, var122 + 1, 0.0F, var125 * 2.0F / 8.0F + var74 * 2.0F);
                                            var84.end();
                                         }
                                      }
***************
*** 1029,1035 ****
                                GL11.glClear(256);
                                GL11.glLoadIdentity();
                                if(var82.minecraft.settings.anaglyph) {
!                                  GL11.glTranslatef((float)((var77 << 1) - 1) * 0.1F, 0.0F, 0.0F);
                                }
  
                                var82.hurtEffect(var80);
--- 1002,1008 ----
                                GL11.glClear(256);
                                GL11.glLoadIdentity();
                                if(var82.minecraft.settings.anaglyph) {
!                                  GL11.glTranslatef(((var77 << 1) - 1) * 0.1F, 0.0F, 0.0F);
                                }
  
                                var82.hurtEffect(var80);
***************
*** 1048,1054 ****
                                GL11.glPushMatrix();
                                var69 = 0.8F;
                                if(var112.moving) {
!                                  var33 = MathHelper.sin((var74 = ((float)var112.offset + var80) / 7.0F) * 3.1415927F);
                                   GL11.glTranslatef(-MathHelper.sin(MathHelper.sqrt(var74) * 3.1415927F) * 0.4F, MathHelper.sin(MathHelper.sqrt(var74) * 3.1415927F * 2.0F) * 0.2F, -var33 * 0.2F);
                                }
  
--- 1021,1027 ----
                                GL11.glPushMatrix();
                                var69 = 0.8F;
                                if(var112.moving) {
!                                  var33 = MathHelper.sin((var74 = (var112.offset + var80) / 7.0F) * 3.1415927F);
                                   GL11.glTranslatef(-MathHelper.sin(MathHelper.sqrt(var74) * 3.1415927F) * 0.4F, MathHelper.sin(MathHelper.sqrt(var74) * 3.1415927F * 2.0F) * 0.2F, -var33 * 0.2F);
                                }
  
***************
*** 1056,1062 ****
                                GL11.glRotatef(45.0F, 0.0F, 1.0F, 0.0F);
                                GL11.glEnable(2977);
                                if(var112.moving) {
!                                  var33 = MathHelper.sin((var74 = ((float)var112.offset + var80) / 7.0F) * var74 * 3.1415927F);
                                   GL11.glRotatef(MathHelper.sin(MathHelper.sqrt(var74) * 3.1415927F) * 80.0F, 0.0F, 1.0F, 0.0F);
                                   GL11.glRotatef(-var33 * 20.0F, 1.0F, 0.0F, 0.0F);
                                }
--- 1029,1035 ----
                                GL11.glRotatef(45.0F, 0.0F, 1.0F, 0.0F);
                                GL11.glEnable(2977);
                                if(var112.moving) {
!                                  var33 = MathHelper.sin((var74 = (var112.offset + var80) / 7.0F) * var74 * 3.1415927F);
                                   GL11.glRotatef(MathHelper.sin(MathHelper.sqrt(var74) * 3.1415927F) * 80.0F, 0.0F, 1.0F, 0.0F);
                                   GL11.glRotatef(-var33 * 20.0F, 1.0F, 0.0F, 0.0F);
                                }
***************
*** 1134,1149 ****
                 }
              }
           }
! 
!          return;
!       } catch (StopGameException var59) {
!          return;
        } catch (Exception var60) {
           var60.printStackTrace();
        } finally {
           this.shutdown();
        }
- 
     }
  
     public final void grabMouse() {
--- 1107,1120 ----
                 }
              }
           }
!       } catch (StopGameException var59) {
!           return;
        } catch (Exception var60) {
           var60.printStackTrace();
+          return;
        } finally {
           this.shutdown();
        }
     }
  
     public final void grabMouse() {
***************
*** 1269,1275 ****
           SoundPlayer var1 = this.soundPlayer;
           SoundManager var2 = this.sound;
           if(System.currentTimeMillis() > var2.lastMusic && var2.playMusic(var1, "calm")) {
!             var2.lastMusic = System.currentTimeMillis() + (long)var2.random.nextInt(900000) + 300000L;
           }
        }
  
--- 1240,1246 ----
           SoundPlayer var1 = this.soundPlayer;
           SoundManager var2 = this.sound;
           if(System.currentTimeMillis() > var2.lastMusic && var2.playMusic(var1, "calm")) {
!             var2.lastMusic = System.currentTimeMillis() + var2.random.nextInt(900000) + 300000L;
           }
        }
  
***************
*** 1279,1285 ****
  
        int var16;
        for(var16 = 0; var16 < var17.chat.size(); ++var16) {
!          ++((ChatLine)var17.chat.get(var16)).time;
        }
  
        GL11.glBindTexture(3553, this.textureManager.load("/terrain.png"));
--- 1250,1256 ----
  
        int var16;
        for(var16 = 0; var16 < var17.chat.size(); ++var16) {
!          ++var17.chat.get(var16).time;
        }
  
        GL11.glBindTexture(3553, this.textureManager.load("/terrain.png"));
***************
*** 1287,1293 ****
  
        for(var16 = 0; var16 < var19.animations.size(); ++var16) {
           AnimatedTexture var3;
!          (var3 = (AnimatedTexture)var19.animations.get(var16)).anaglyph = var19.settings.anaglyph;
           var3.animate();
           var19.textureBuffer.clear();
           var19.textureBuffer.put(var3.textureData);
--- 1258,1264 ----
  
        for(var16 = 0; var16 < var19.animations.size(); ++var16) {
           AnimatedTexture var3;
!          (var3 = var19.animations.get(var16)).anaglyph = var19.settings.anaglyph;
           var3.animate();
           var19.textureBuffer.clear();
           var19.textureBuffer.put(var3.textureData);
***************
*** 1307,1313 ****
           } else {
              NetworkManager var20 = this.networkManager;
              if(this.networkManager.successful) {
-                NetworkHandler var18 = var20.netHandler;
                 if(var20.netHandler.connected) {
                    try {
                       NetworkHandler var22 = var20.netHandler;
--- 1278,1283 ----
***************
*** 1345,1351 ****
                                var42.levelData = new ByteArrayOutputStream();
                             } else if(var6 == PacketType.LEVEL_DATA) {
                                short var11 = ((Short)var7[0]).shortValue();
!                               byte[] var12 = (byte[])((byte[])var7[1]);
                                byte var13 = ((Byte)var7[2]).byteValue();
                                var42.minecraft.progressBar.setProgress(var13);
                                var42.levelData.write(var12, 0, var11);
--- 1315,1321 ----
                                var42.levelData = new ByteArrayOutputStream();
                             } else if(var6 == PacketType.LEVEL_DATA) {
                                short var11 = ((Short)var7[0]).shortValue();
!                               byte[] var12 = ((byte[])var7[1]);
                                byte var13 = ((Byte)var7[2]).byteValue();
                                var42.minecraft.progressBar.setProgress(var13);
                                var42.levelData.write(var12, 0, var11);
***************
*** 1397,1408 ****
                                   if(var5 >= 0) {
                                      var9 = (byte)(var9 + 128);
                                      var47 = (short)(var47 - 22);
!                                     var33 = new NetworkPlayer(var42.minecraft, var5, var34, var36, var47, var10, (float)(var9 * 360) / 256.0F, (float)(var58 * 360) / 256.0F);
                                      var42.players.put(Byte.valueOf(var5), var33);
                                      var42.minecraft.level.addEntity(var33);
                                   } else {
!                                     var42.minecraft.level.setSpawnPos(var36 / 32, var47 / 32, var10 / 32, (float)(var9 * 320 / 256));
!                                     var42.minecraft.player.moveTo((float)var36 / 32.0F, (float)var47 / 32.0F, (float)var10 / 32.0F, (float)(var9 * 360) / 256.0F, (float)(var58 * 360) / 256.0F);
                                   }
                                } else {
                                   byte var53;
--- 1367,1378 ----
                                   if(var5 >= 0) {
                                      var9 = (byte)(var9 + 128);
                                      var47 = (short)(var47 - 22);
!                                     var33 = new NetworkPlayer(var42.minecraft, var5, var34, var36, var47, var10, var9 * 360 / 256.0F, var58 * 360 / 256.0F);
                                      var42.players.put(Byte.valueOf(var5), var33);
                                      var42.minecraft.level.addEntity(var33);
                                   } else {
!                                     var42.minecraft.level.setSpawnPos(var36 / 32, var47 / 32, var10 / 32, var9 * 320 / 256);
!                                     var42.minecraft.player.moveTo(var36 / 32.0F, var47 / 32.0F, var10 / 32.0F, var9 * 360 / 256.0F, var58 * 360 / 256.0F);
                                   }
                                } else {
                                   byte var53;
***************
*** 1421,1432 ****
                                      short var38 = var66;
                                      var5 = var10001;
                                      if(var5 < 0) {
!                                        var42.minecraft.player.moveTo((float)var38 / 32.0F, (float)var36 / 32.0F, (float)var47 / 32.0F, (float)(var53 * 360) / 256.0F, (float)(var9 * 360) / 256.0F);
                                      } else {
                                         var53 = (byte)(var53 + 128);
                                         var36 = (short)(var36 - 22);
!                                        if((var61 = (NetworkPlayer)var42.players.get(Byte.valueOf(var5))) != null) {
!                                           var61.teleport(var38, var36, var47, (float)(var53 * 360) / 256.0F, (float)(var9 * 360) / 256.0F);
                                         }
                                      }
                                   } else {
--- 1391,1402 ----
                                      short var38 = var66;
                                      var5 = var10001;
                                      if(var5 < 0) {
!                                        var42.minecraft.player.moveTo(var38 / 32.0F, var36 / 32.0F, var47 / 32.0F, var53 * 360 / 256.0F, var9 * 360 / 256.0F);
                                      } else {
                                         var53 = (byte)(var53 + 128);
                                         var36 = (short)(var36 - 22);
!                                        if((var61 = var42.players.get(Byte.valueOf(var5))) != null) {
!                                           var61.teleport(var38, var36, var47, var53 * 360 / 256.0F, var9 * 360 / 256.0F);
                                         }
                                      }
                                   } else {
***************
*** 1449,1456 ****
                                         var5 = var10001;
                                         if(var5 >= 0) {
                                            var53 = (byte)(var53 + 128);
!                                           if((var61 = (NetworkPlayer)var42.players.get(Byte.valueOf(var5))) != null) {
!                                              var61.queue(var37, var44, var49, (float)(var53 * 360) / 256.0F, (float)(var9 * 360) / 256.0F);
                                            }
                                         }
                                      } else if(var6 == PacketType.ROTATION_UPDATE) {
--- 1419,1426 ----
                                         var5 = var10001;
                                         if(var5 >= 0) {
                                            var53 = (byte)(var53 + 128);
!                                           if((var61 = var42.players.get(Byte.valueOf(var5))) != null) {
!                                              var61.queue(var37, var44, var49, var53 * 360 / 256.0F, var9 * 360 / 256.0F);
                                            }
                                         }
                                      } else if(var6 == PacketType.ROTATION_UPDATE) {
***************
*** 1462,1469 ****
                                         if(var5 >= 0) {
                                            var37 = (byte)(var37 + 128);
                                            NetworkPlayer var54;
!                                           if((var54 = (NetworkPlayer)var42.players.get(Byte.valueOf(var5))) != null) {
!                                              var54.queue((float)(var37 * 360) / 256.0F, (float)(var44 * 360) / 256.0F);
                                            }
                                         }
                                      } else if(var6 == PacketType.POSITION_UPDATE) {
--- 1432,1439 ----
                                         if(var5 >= 0) {
                                            var37 = (byte)(var37 + 128);
                                            NetworkPlayer var54;
!                                           if((var54 = var42.players.get(Byte.valueOf(var5))) != null) {
!                                              var54.queue(var37 * 360 / 256.0F, var44 * 360 / 256.0F);
                                            }
                                         }
                                      } else if(var6 == PacketType.POSITION_UPDATE) {
***************
*** 1475,1486 ****
                                         var37 = var67;
                                         var5 = var10001;
                                         NetworkPlayer var59;
!                                        if(var5 >= 0 && (var59 = (NetworkPlayer)var42.players.get(Byte.valueOf(var5))) != null) {
                                            var59.queue(var37, var44, var49);
                                         }
                                      } else if(var6 == PacketType.DESPAWN_PLAYER) {
                                         var5 = ((Byte)var7[0]).byteValue();
!                                        if(var5 >= 0 && (var33 = (NetworkPlayer)var42.players.remove(Byte.valueOf(var5))) != null) {
                                            var33.clear();
                                            var42.minecraft.level.removeEntity(var33);
                                         }
--- 1445,1456 ----
                                         var37 = var67;
                                         var5 = var10001;
                                         NetworkPlayer var59;
!                                        if(var5 >= 0 && (var59 = var42.players.get(Byte.valueOf(var5))) != null) {
                                            var59.queue(var37, var44, var49);
                                         }
                                      } else if(var6 == PacketType.DESPAWN_PLAYER) {
                                         var5 = ((Byte)var7[0]).byteValue();
!                                        if(var5 >= 0 && (var33 = var42.players.remove(Byte.valueOf(var5))) != null) {
                                            var33.clear();
                                            var42.minecraft.level.removeEntity(var33);
                                         }
***************
*** 1648,1666 ****
           }
  
           if(this.currentScreen == null) {
!             if(Mouse.isButtonDown(0) && (float)(this.ticks - this.lastClick) >= this.timer.tps / 4.0F && this.hasMouse) {
                 this.onMouseClick(0);
                 this.lastClick = this.ticks;
              }
  
!             if(Mouse.isButtonDown(1) && (float)(this.ticks - this.lastClick) >= this.timer.tps / 4.0F && this.hasMouse) {
                 this.onMouseClick(1);
                 this.lastClick = this.ticks;
              }
           }
  
           boolean var26 = this.currentScreen == null && Mouse.isButtonDown(0) && this.hasMouse;
-          boolean var35 = false;
           if(!this.gamemode.instantBreak && this.blockHitTime <= 0) {
              if(var26 && this.selected != null && this.selected.entityPos == 0) {
                 var4 = this.selected.x;
--- 1618,1635 ----
           }
  
           if(this.currentScreen == null) {
!             if(Mouse.isButtonDown(0) && this.ticks - this.lastClick >= this.timer.tps / 4.0F && this.hasMouse) {
                 this.onMouseClick(0);
                 this.lastClick = this.ticks;
              }
  
!             if(Mouse.isButtonDown(1) && this.ticks - this.lastClick >= this.timer.tps / 4.0F && this.hasMouse) {
                 this.onMouseClick(1);
                 this.lastClick = this.ticks;
              }
           }
  
           boolean var26 = this.currentScreen == null && Mouse.isButtonDown(0) && this.hasMouse;
           if(!this.gamemode.instantBreak && this.blockHitTime <= 0) {
              if(var26 && this.selected != null && this.selected.entityPos == 0) {
                 var4 = this.selected.x;
***************
*** 1734,1745 ****
                 if((var57 = var32.getHighestTile(var60, var52)) <= var45 + 4 && var57 >= var45 - 4) {
                    float var56 = var39.random.nextFloat();
                    float var62 = var39.random.nextFloat();
!                   var39.minecraft.particleManager.spawnParticle(new WaterDropParticle(var32, (float)var60 + var56, (float)var57 + 0.1F, (float)var52 + var62));
                 }
              }
           }
  
-          LevelRenderer var31 = this.levelRenderer;
           ++this.levelRenderer.ticks;
           this.level.tickEntities();
           if(!this.isOnline()) {
--- 1703,1713 ----
                 if((var57 = var32.getHighestTile(var60, var52)) <= var45 + 4 && var57 >= var45 - 4) {
                    float var56 = var39.random.nextFloat();
                    float var62 = var39.random.nextFloat();
!                   var39.minecraft.particleManager.spawnParticle(new WaterDropParticle(var32, var60 + var56, var57 + 0.1F, var52 + var62));
                 }
              }
           }
  
           ++this.levelRenderer.ticks;
           this.level.tickEntities();
           if(!this.isOnline()) {
diff -crB src/com/mojang/minecraft/Minecraft$OS.java src2/com/mojang/minecraft/Minecraft$OS.java
*** src/com/mojang/minecraft/Minecraft$OS.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/Minecraft$OS.java	2013-03-05 16:55:50.754739000 -0800
***************
*** 8,16 ****
     windows("windows", 2),
     macos("macos", 3),
     unknown("unknown", 4);
-    // $FF: synthetic field
-    private static final Minecraft$OS[] values = new Minecraft$OS[]{linux, solaris, windows, macos, unknown};
- 
  
     private Minecraft$OS(String var1, int var2) {}
  
--- 8,13 ----
diff -crB src/com/mojang/minecraft/mob/ai/BasicAI.java src2/com/mojang/minecraft/mob/ai/BasicAI.java
*** src/com/mojang/minecraft/mob/ai/BasicAI.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/mob/ai/BasicAI.java	2013-03-05 17:33:23.002811000 -0800
***************
*** 68,78 ****
        this.yya *= 0.98F;
        this.yRotA *= 0.9F;
        var2.travel(this.xxa, this.yya);
!       List var11;
!       if((var11 = var1.findEntities(var2, var2.bb.grow(0.2F, 0.0F, 0.2F))) != null && var11.size() > 0) {
           for(int var8 = 0; var8 < var11.size(); ++var8) {
              Entity var10;
!             if((var10 = (Entity)var11.get(var8)).isPushable()) {
                 var10.push(var2);
              }
           }
--- 68,78 ----
        this.yya *= 0.98F;
        this.yRotA *= 0.9F;
        var2.travel(this.xxa, this.yya);
!       List<Entity> var11 = var1.findEntities(var2, var2.bb.grow(0.2F, 0.0F, 0.2F));
!       if(var11 != null && var11.size() > 0) {
           for(int var8 = 0; var8 < var11.size(); ++var8) {
              Entity var10;
!             if((var10 = var11.get(var8)).isPushable()) {
                 var10.push(var2);
              }
           }
***************
*** 96,102 ****
        }
  
        this.mob.yRot += this.yRotA;
!       this.mob.xRot = (float)this.defaultLookAngle;
        if(this.attackTarget != null) {
           this.yya = this.runSpeed;
           this.jumping = this.random.nextFloat() < 0.04F;
--- 96,102 ----
        }
  
        this.mob.yRot += this.yRotA;
!       this.mob.xRot = this.defaultLookAngle;
        if(this.attackTarget != null) {
           this.yya = this.runSpeed;
           this.jumping = this.random.nextFloat() < 0.04F;
diff -crB src/com/mojang/minecraft/mob/ai/BasicAttackAI.java src2/com/mojang/minecraft/mob/ai/BasicAttackAI.java
*** src/com/mojang/minecraft/mob/ai/BasicAttackAI.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/mob/ai/BasicAttackAI.java	2013-03-05 17:28:17.638802000 -0800
***************
*** 11,18 ****
     public static final long serialVersionUID = 0L;
     public int damage = 6;
  
! 
!    protected void update() {
        super.update();
        if(this.mob.health > 0) {
           this.doAttack();
--- 11,17 ----
     public static final long serialVersionUID = 0L;
     public int damage = 6;
  
!    public void update() {
        super.update();
        if(this.mob.health > 0) {
           this.doAttack();
***************
*** 50,57 ****
  
           if(this.attackTarget != null) {
              var6 = MathHelper.sqrt(var6);
!             this.mob.yRot = (float)(Math.atan2((double)var5, (double)var3) * 180.0D / 3.1415927410125732D) - 90.0F;
!             this.mob.xRot = -((float)(Math.atan2((double)var4, (double)var6) * 180.0D / 3.1415927410125732D));
              if(MathHelper.sqrt(var3 * var3 + var4 * var4 + var5 * var5) < 2.0F && this.attackDelay == 0) {
                 this.attack(this.attackTarget);
              }
--- 49,56 ----
  
           if(this.attackTarget != null) {
              var6 = MathHelper.sqrt(var6);
!             this.mob.yRot = (float)(Math.atan2(var5, var3) * 180.0D / 3.1415927410125732D) - 90.0F;
!             this.mob.xRot = -((float)(Math.atan2(var4, var6) * 180.0D / 3.1415927410125732D));
              if(MathHelper.sqrt(var3 * var3 + var4 * var4 + var5 * var5) < 2.0F && this.attackDelay == 0) {
                 this.attack(this.attackTarget);
              }
***************
*** 66,72 ****
        } else {
           this.mob.attackTime = 5;
           this.attackDelay = this.random.nextInt(20) + 10;
!          int var2 = (int)((this.random.nextFloat() + this.random.nextFloat()) / 2.0F * (float)this.damage + 1.0F);
           var1.hurt(this.mob, var2);
           this.noActionTime = 0;
           return true;
--- 65,71 ----
        } else {
           this.mob.attackTime = 5;
           this.attackDelay = this.random.nextInt(20) + 10;
!          int var2 = (int)((this.random.nextFloat() + this.random.nextFloat()) / 2.0F * this.damage + 1.0F);
           var1.hurt(this.mob, var2);
           this.noActionTime = 0;
           return true;
diff -crB src/com/mojang/minecraft/mob/Creeper$1.java src2/com/mojang/minecraft/mob/Creeper$1.java
*** src/com/mojang/minecraft/mob/Creeper$1.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/mob/Creeper$1.java	2013-03-05 15:49:32.058612000 -0800
***************
*** 18,24 ****
        this.creeper = var1;
     }
  
!    protected final boolean attack(Entity var1) {
        if(!super.attack(var1)) {
           return false;
        } else {
--- 18,24 ----
        this.creeper = var1;
     }
  
!    public final boolean attack(Entity var1) {
        if(!super.attack(var1)) {
           return false;
        } else {
diff -crB src/com/mojang/minecraft/mob/Creeper.java src2/com/mojang/minecraft/mob/Creeper.java
*** src/com/mojang/minecraft/mob/Creeper.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/mob/Creeper.java	2013-03-05 17:28:17.918802000 -0800
***************
*** 22,28 ****
     }
  
     public float getBrightness(float var1) {
!       float var2 = (float)(20 - this.health) / 20.0F;
!       return ((MathHelper.sin((float)this.tickCount + var1) * 0.5F + 0.5F) * var2 * 0.5F + 0.25F + var2 * 0.25F) * super.getBrightness(var1);
     }
  }
--- 22,28 ----
     }
  
     public float getBrightness(float var1) {
!       float var2 = (20 - this.health) / 20.0F;
!       return ((MathHelper.sin(this.tickCount + var1) * 0.5F + 0.5F) * var2 * 0.5F + 0.25F + var2 * 0.25F) * super.getBrightness(var1);
     }
  }
diff -crB src/com/mojang/minecraft/mob/Mob.java src2/com/mojang/minecraft/mob/Mob.java
*** src/com/mojang/minecraft/mob/Mob.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/mob/Mob.java	2013-03-05 17:35:51.934816000 -0800
***************
*** 128,134 ****
        if(var3 > 0.05F) {
           var6 = 1.0F;
           var5 = var3 * 3.0F;
!          var4 = (float)Math.atan2((double)var2, (double)var1) * 180.0F / 3.1415927F - 90.0F;
        }
  
        if(!this.onGround) {
--- 128,134 ----
        if(var3 > 0.05F) {
           var6 = 1.0F;
           var5 = var3 * 3.0F;
!          var4 = (float)Math.atan2(var2, var1) * 180.0F / 3.1415927F - 90.0F;
        }
  
        if(!this.onGround) {
***************
*** 138,144 ****
        this.run += (var6 - this.run) * 0.3F;
  
        for(var1 = var4 - this.yBodyRot; var1 < -180.0F; var1 += 360.0F) {
-          ;
        }
  
        while(var1 >= 180.0F) {
--- 138,143 ----
***************
*** 148,154 ****
        this.yBodyRot += var1 * 0.1F;
  
        for(var1 = this.yRot - this.yBodyRot; var1 < -180.0F; var1 += 360.0F) {
-          ;
        }
  
        while(var1 >= 180.0F) {
--- 147,152 ----
***************
*** 212,218 ****
     public void render(TextureManager var1, float var2) {
        if(this.modelName != null) {
           float var3;
!          if((var3 = (float)this.attackTime - var2) < 0.0F) {
              var3 = 0.0F;
           }
  
--- 210,216 ----
     public void render(TextureManager var1, float var2) {
        if(this.modelName != null) {
           float var3;
!          if((var3 = this.attackTime - var2) < 0.0F) {
              var3 = 0.0F;
           }
  
***************
*** 253,268 ****
           float var10 = -Math.abs(MathHelper.cos(var8 * 0.6662F)) * 5.0F * var5 * this.bobStrength - 23.0F;
           GL11.glTranslatef(this.xo + (this.x - this.xo) * var2, this.yo + (this.y - this.yo) * var2 - 1.62F + this.renderOffset, this.zo + (this.z - this.zo) * var2);
           float var11;
!          if((var11 = (float)this.hurtTime - var2) > 0.0F || this.health <= 0) {
              if(var11 < 0.0F) {
                 var11 = 0.0F;
              } else {
!                var11 = MathHelper.sin((var11 /= (float)this.hurtDuration) * var11 * var11 * var11 * 3.1415927F) * 14.0F;
              }
  
              float var12 = 0.0F;
              if(this.health <= 0) {
!                var12 = ((float)this.deathTime + var2) / 20.0F;
                 if((var11 += var12 * var12 * 800.0F) > 90.0F) {
                    var11 = 90.0F;
                 }
--- 251,266 ----
           float var10 = -Math.abs(MathHelper.cos(var8 * 0.6662F)) * 5.0F * var5 * this.bobStrength - 23.0F;
           GL11.glTranslatef(this.xo + (this.x - this.xo) * var2, this.yo + (this.y - this.yo) * var2 - 1.62F + this.renderOffset, this.zo + (this.z - this.zo) * var2);
           float var11;
!          if((var11 = this.hurtTime - var2) > 0.0F || this.health <= 0) {
              if(var11 < 0.0F) {
                 var11 = 0.0F;
              } else {
!                var11 = MathHelper.sin((var11 /= this.hurtDuration) * var11 * var11 * var11 * 3.1415927F) * 14.0F;
              }
  
              float var12 = 0.0F;
              if(this.health <= 0) {
!                var12 = (this.deathTime + var2) / 20.0F;
                 if((var11 += var12 * var12 * 800.0F) > 90.0F) {
                    var11 = 90.0F;
                 }
***************
*** 311,317 ****
     }
  
     public void renderModel(TextureManager var1, float var2, float var3, float var4, float var5, float var6, float var7) {
!       modelCache.getModel(this.modelName).render(var2, var4, (float)this.tickCount + var3, var5, var6, var7);
     }
  
     public void heal(int var1) {
--- 309,315 ----
     }
  
     public void renderModel(TextureManager var1, float var2, float var3, float var4, float var5, float var6, float var7) {
!       modelCache.getModel(this.modelName).render(var2, var4, this.tickCount + var3, var5, var6, var7);
     }
  
     public void heal(int var1) {
***************
*** 329,335 ****
        if(!this.level.creativeMode) {
           if(this.health > 0) {
              this.ai.hurt(var1, var2);
!             if((float)this.invulnerableTime > (float)this.invulnerableDuration / 2.0F) {
                 if(this.lastHealth - var2 >= this.health) {
                    return;
                 }
--- 327,333 ----
        if(!this.level.creativeMode) {
           if(this.health > 0) {
              this.ai.hurt(var1, var2);
!             if(this.invulnerableTime > this.invulnerableDuration / 2.0F) {
                 if(this.lastHealth - var2 >= this.health) {
                    return;
                 }
***************
*** 346,355 ****
              if(var1 != null) {
                 float var3 = var1.x - this.x;
                 float var4 = var1.z - this.z;
!                this.hurtDir = (float)(Math.atan2((double)var4, (double)var3) * 180.0D / 3.1415927410125732D) - this.yRot;
                 this.knockback(var1, var2, var3, var4);
              } else {
!                this.hurtDir = (float)((int)(Math.random() * 2.0D) * 180);
              }
  
              if(this.health <= 0) {
--- 344,353 ----
              if(var1 != null) {
                 float var3 = var1.x - this.x;
                 float var4 = var1.z - this.z;
!                this.hurtDir = (float)(Math.atan2(var4, var3) * 180.0D / 3.1415927410125732D) - this.yRot;
                 this.knockback(var1, var2, var3, var4);
              } else {
!                this.hurtDir = (int)(Math.random() * 2.0D) * 180;
              }
  
              if(this.health <= 0) {
***************
*** 388,394 ****
     protected void causeFallDamage(float var1) {
        if(!this.level.creativeMode) {
           int var2;
!          if((var2 = (int)Math.ceil((double)(var1 - 3.0F))) > 0) {
              this.hurt((Entity)null, var2);
           }
  
--- 386,392 ----
     protected void causeFallDamage(float var1) {
        if(!this.level.creativeMode) {
           int var2;
!          if((var2 = (int)Math.ceil(var1 - 3.0F)) > 0) {
              this.hurt((Entity)null, var2);
           }
  
***************
*** 404,410 ****
           this.xd *= 0.8F;
           this.yd *= 0.8F;
           this.zd *= 0.8F;
!          this.yd = (float)((double)this.yd - 0.02D);
           if(this.horizontalCollision && this.isFree(this.xd, this.yd + 0.6F - this.y + var3, this.zd)) {
              this.yd = 0.3F;
           }
--- 402,408 ----
           this.xd *= 0.8F;
           this.yd *= 0.8F;
           this.zd *= 0.8F;
!          this.yd = (float)(this.yd - 0.02D);
           if(this.horizontalCollision && this.isFree(this.xd, this.yd + 0.6F - this.y + var3, this.zd)) {
              this.yd = 0.3F;
           }
***************
*** 416,422 ****
           this.xd *= 0.5F;
           this.yd *= 0.5F;
           this.zd *= 0.5F;
!          this.yd = (float)((double)this.yd - 0.02D);
           if(this.horizontalCollision && this.isFree(this.xd, this.yd + 0.6F - this.y + var3, this.zd)) {
              this.yd = 0.3F;
           }
--- 414,420 ----
           this.xd *= 0.5F;
           this.yd *= 0.5F;
           this.zd *= 0.5F;
!          this.yd = (float)(this.yd - 0.02D);
           if(this.horizontalCollision && this.isFree(this.xd, this.yd + 0.6F - this.y + var3, this.zd)) {
              this.yd = 0.3F;
           }
***************
*** 427,433 ****
           this.xd *= 0.91F;
           this.yd *= 0.98F;
           this.zd *= 0.91F;
!          this.yd = (float)((double)this.yd - 0.08D);
           if(this.onGround) {
              var3 = 0.6F;
              this.xd *= var3;
--- 425,431 ----
           this.xd *= 0.91F;
           this.yd *= 0.98F;
           this.zd *= 0.91F;
!          this.yd = (float)(this.yd - 0.08D);
           if(this.onGround) {
              var3 = 0.6F;
              this.xd *= var3;
diff -crB src/com/mojang/minecraft/mob/Sheep$1.java src2/com/mojang/minecraft/mob/Sheep$1.java
*** src/com/mojang/minecraft/mob/Sheep$1.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/mob/Sheep$1.java	2013-03-05 17:28:17.974802000 -0800
***************
*** 16,22 ****
        this.sheep = var1;
     }
  
!    protected final void update() {
        float var1 = MathHelper.sin(this.sheep.yRot * 3.1415927F / 180.0F);
        float var2 = MathHelper.cos(this.sheep.yRot * 3.1415927F / 180.0F);
        var1 = -0.7F * var1;
--- 16,22 ----
        this.sheep = var1;
     }
  
!    public final void update() {
        float var1 = MathHelper.sin(this.sheep.yRot * 3.1415927F / 180.0F);
        float var2 = MathHelper.cos(this.sheep.yRot * 3.1415927F / 180.0F);
        var1 = -0.7F * var1;
***************
*** 37,43 ****
  
              this.xxa = 0.0F;
              this.yya = 0.0F;
!             this.mob.xRot = (float)(40 + this.sheep.grazingTime / 2 % 2 * 10);
           }
        } else {
           if(this.level.getTile(var4, var3, var5) == Block.GRASS.id) {
--- 37,43 ----
  
              this.xxa = 0.0F;
              this.yya = 0.0F;
!             this.mob.xRot = 40 + this.sheep.grazingTime / 2 % 2 * 10;
           }
        } else {
           if(this.level.getTile(var4, var3, var5) == Block.GRASS.id) {
diff -crB src/com/mojang/minecraft/mob/Sheep.java src2/com/mojang/minecraft/mob/Sheep.java
*** src/com/mojang/minecraft/mob/Sheep.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/mob/Sheep.java	2013-03-05 15:49:44.798612000 -0800
***************
*** 31,37 ****
        this.ai = new Sheep$1(this);
     }
  
!    protected void aiStep() {
        super.aiStep();
        this.grazeO = this.graze;
        if(this.grazing) {
--- 31,37 ----
        this.ai = new Sheep$1(this);
     }
  
!    public void aiStep() {
        super.aiStep();
        this.grazeO = this.graze;
        if(this.grazing) {
diff -crB src/com/mojang/minecraft/mob/Skeleton.java src2/com/mojang/minecraft/mob/Skeleton.java
*** src/com/mojang/minecraft/mob/Skeleton.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/mob/Skeleton.java	2013-03-05 17:00:20.902748000 -0800
***************
*** 26,33 ****
     }
  
     // $FF: synthetic method
!    static void shootRandomArrow(Skeleton var0) {
!       var0 = var0;
        int var1 = (int)((Math.random() + Math.random()) * 3.0D + 4.0D);
  
        for(int var2 = 0; var2 < var1; ++var2) {
--- 26,32 ----
     }
  
     // $FF: synthetic method
!    static void shootRandomArrow(Skeleton var0) {
        int var1 = (int)((Math.random() + Math.random()) * 3.0D + 4.0D);
  
        for(int var2 = 0; var2 < var1; ++var2) {
diff -crB src/com/mojang/minecraft/model/AnimalModel.java src2/com/mojang/minecraft/model/AnimalModel.java
*** src/com/mojang/minecraft/model/AnimalModel.java	2013-03-05 19:00:54.000000000 -0800
--- src2/com/mojang/minecraft/model/AnimalModel.java	2013-03-05 17:28:17.466802000 -0800
***************
*** 16,37 ****
  
     public AnimalModel(int var1, float var2) {
        this.head.setBounds(-4.0F, -4.0F, -8.0F, 8, 8, 8, 0.0F);
!       this.head.setPosition(0.0F, (float)(18 - var1), -6.0F);
        this.body = new ModelPart(28, 8);
        this.body.setBounds(-5.0F, -10.0F, -7.0F, 10, 16, 8, 0.0F);
!       this.body.setPosition(0.0F, (float)(17 - var1), 2.0F);
        this.leg1 = new ModelPart(0, 16);
        this.leg1.setBounds(-2.0F, 0.0F, -2.0F, 4, var1, 4, 0.0F);
!       this.leg1.setPosition(-3.0F, (float)(24 - var1), 7.0F);
        this.leg2 = new ModelPart(0, 16);
        this.leg2.setBounds(-2.0F, 0.0F, -2.0F, 4, var1, 4, 0.0F);
!       this.leg2.setPosition(3.0F, (float)(24 - var1), 7.0F);
        this.leg3 = new ModelPart(0, 16);
        this.leg3.setBounds(-2.0F, 0.0F, -2.0F, 4, var1, 4, 0.0F);
!       this.leg3.setPosition(-3.0F, (float)(24 - var1), -5.0F);
        this.leg4 = new ModelPart(0, 16);
        this.leg4.setBounds(-2.0F, 0.0F, -2.0F, 4, var1, 4, 0.0F);
!       this.leg4.setPosition(3.0F, (float)(24 - var1), -5.0F);
     }
  
     public final void render(float var1, float var2, float var3, float var4, float var5, float var6) {
--- 16,37 ----
  
     public AnimalModel(int var1, float var2) {
        this.head.setBounds(-4.0F, -4.0F, -8.0F, 8, 8, 8, 0.0F);
!       this.head.setPosition(0.0F, 18 - var1, -6.0F);
        this.body = new ModelPart(28, 8);
        this.body.setBounds(-5.0F, -10.0F, -7.0F, 10, 16, 8, 0.0F);
!       this.body.setPosition(0.0F, 17 - var1, 2.0F);
        this.leg1 = new ModelPart(0, 16);
        this.leg1.setBounds(-2.0F, 0.0F, -2.0F, 4, var1, 4, 0.0F);
!       this.leg1.setPosition(-3.0F, 24 - var1, 7.0F);
        this.leg2 = new ModelPart(0, 16);
        this.leg2.setBounds(-2.0F, 0.0F, -2.0F, 4, var1, 4, 0.0F);
!       this.leg2.setPosition(3.0F, 24 - var1, 7.0F);
        this.leg3 = new ModelPart(0, 16);
        this.leg3.setBounds(-2.0F, 0.0F, -2.0F, 4, var1, 4, 0.0F);
!       this.leg3.setPosition(-3.0F, 24 - var1, -5.0F);
        this.leg4 = new ModelPart(0, 16);
        this.leg4.setBounds(-2.0F, 0.0F, -2.0F, 4, var1, 4, 0.0F);
!       this.leg4.setPosition(3.0F, 24 - var1, -5.0F);
     }
  
     public final void render(float var1, float var2, float var3, float var4, float var5, float var6) {
diff -crB src/com/mojang/minecraft/model/ModelManager.java src2/com/mojang/minecraft/model/ModelManager.java
*** src/com/mojang/minecraft/model/ModelManager.java	2013-03-05 19:00:54.000000000 -0800
--- src2/com/mojang/minecraft/model/ModelManager.java	2013-03-05 17:28:17.854802000 -0800
***************
*** 25,30 ****
  
  
     public final Model getModel(String var1) {
!       return (Model)(var1.equals("humanoid")?this.human:(var1.equals("humanoid.armor")?this.armoredHuman:(var1.equals("creeper")?this.creeper:(var1.equals("skeleton")?this.skeleton:(var1.equals("zombie")?this.zombie:(var1.equals("pig")?this.pig:(var1.equals("sheep")?this.sheep:(var1.equals("spider")?this.spider:(var1.equals("sheep.fur")?this.sheepFur:null)))))))));
     }
  }
--- 25,30 ----
  
  
     public final Model getModel(String var1) {
!       return var1.equals("humanoid")?this.human:(var1.equals("humanoid.armor")?this.armoredHuman:(var1.equals("creeper")?this.creeper:(var1.equals("skeleton")?this.skeleton:(var1.equals("zombie")?this.zombie:(var1.equals("pig")?this.pig:(var1.equals("sheep")?this.sheep:(var1.equals("spider")?this.spider:(var1.equals("sheep.fur")?this.sheepFur:null))))))));
     }
  }
diff -crB src/com/mojang/minecraft/model/ModelPart.java src2/com/mojang/minecraft/model/ModelPart.java
*** src/com/mojang/minecraft/model/ModelPart.java	2013-03-05 19:00:54.000000000 -0800
--- src2/com/mojang/minecraft/model/ModelPart.java	2013-03-05 16:56:10.334740000 -0800
***************
*** 21,27 ****
     public int list = 0;
     public boolean mirror = false;
     public boolean render = true;
-    private boolean unused = false;
  
  
     public ModelPart(int var1, int var2) {
--- 21,26 ----
***************
*** 32,40 ****
     public final void setBounds(float var1, float var2, float var3, int var4, int var5, int var6, float var7) {
        this.vertices = new Vertex[8];
        this.quads = new TexturedQuad[6];
!       float var8 = var1 + (float)var4;
!       float var9 = var2 + (float)var5;
!       float var10 = var3 + (float)var6;
        var1 -= var7;
        var2 -= var7;
        var3 -= var7;
--- 31,39 ----
     public final void setBounds(float var1, float var2, float var3, int var4, int var5, int var6, float var7) {
        this.vertices = new Vertex[8];
        this.quads = new TexturedQuad[6];
!       float var8 = var1 + var4;
!       float var9 = var2 + var5;
!       float var10 = var3 + var6;
        var1 -= var7;
        var2 -= var7;
        var3 -= var7;
diff -crB src/com/mojang/minecraft/model/TexturedQuad.java src2/com/mojang/minecraft/model/TexturedQuad.java
*** src/com/mojang/minecraft/model/TexturedQuad.java	2013-03-05 19:00:54.000000000 -0800
--- src2/com/mojang/minecraft/model/TexturedQuad.java	2013-03-05 17:28:17.650802000 -0800
***************
*** 15,24 ****
        this(var1);
        float var7 = 0.0015625F;
        float var6 = 0.003125F;
!       var1[0] = var1[0].create((float)var4 / 64.0F - var7, (float)var3 / 32.0F + var6);
!       var1[1] = var1[1].create((float)var2 / 64.0F + var7, (float)var3 / 32.0F + var6);
!       var1[2] = var1[2].create((float)var2 / 64.0F + var7, (float)var5 / 32.0F - var6);
!       var1[3] = var1[3].create((float)var4 / 64.0F - var7, (float)var5 / 32.0F - var6);
     }
  
     public TexturedQuad(Vertex[] var1, float var2, float var3, float var4, float var5) {
--- 15,24 ----
        this(var1);
        float var7 = 0.0015625F;
        float var6 = 0.003125F;
!       var1[0] = var1[0].create(var4 / 64.0F - var7, var3 / 32.0F + var6);
!       var1[1] = var1[1].create(var2 / 64.0F + var7, var3 / 32.0F + var6);
!       var1[2] = var1[2].create(var2 / 64.0F + var7, var5 / 32.0F - var6);
!       var1[3] = var1[3].create(var4 / 64.0F - var7, var5 / 32.0F - var6);
     }
  
     public TexturedQuad(Vertex[] var1, float var2, float var3, float var4, float var5) {
diff -crB src/com/mojang/minecraft/net/NetworkManager.java src2/com/mojang/minecraft/net/NetworkManager.java
*** src/com/mojang/minecraft/net/NetworkManager.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/net/NetworkManager.java	2013-03-05 16:24:21.610679000 -0800
***************
*** 19,25 ****
     public Minecraft minecraft;
     public boolean successful = false;
     public boolean levelLoaded = false;
!    public HashMap players = new HashMap();
  
  
     public NetworkManager(Minecraft var1, String var2, int var3, String var4, String var5) {
--- 19,25 ----
     public Minecraft minecraft;
     public boolean successful = false;
     public boolean levelLoaded = false;
!    public HashMap<Byte, NetworkPlayer> players = new HashMap<Byte, NetworkPlayer>();
  
  
     public NetworkManager(Minecraft var1, String var2, int var3, String var4, String var5) {
***************
*** 38,55 ****
        var1.printStackTrace();
     }
  
!    public final boolean isConnected() {
!       NetworkHandler var1;
!       return this.netHandler != null && (var1 = this.netHandler).connected;
     }
  
!    public final List getPlayers() {
!       ArrayList var1;
!       (var1 = new ArrayList()).add(this.minecraft.session.username);
!       Iterator var3 = this.players.values().iterator();
  
        while(var3.hasNext()) {
!          NetworkPlayer var2 = (NetworkPlayer)var3.next();
           var1.add(var2.name);
        }
  
--- 38,54 ----
        var1.printStackTrace();
     }
  
!    public final boolean isConnected() {
!       return this.netHandler != null && this.netHandler.connected;
     }
  
!    public final List<String> getPlayers() {
!       ArrayList<String> var1 = new ArrayList<String>();
!       var1.add(this.minecraft.session.username);
!       Iterator<NetworkPlayer> var3 = this.players.values().iterator();
  
        while(var3.hasNext()) {
!          NetworkPlayer var2 = var3.next();
           var1.add(var2.name);
        }
  
diff -crB src/com/mojang/minecraft/net/NetworkPlayer.java src2/com/mojang/minecraft/net/NetworkPlayer.java
*** src/com/mojang/minecraft/net/NetworkPlayer.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/net/NetworkPlayer.java	2013-03-05 17:30:14.946805000 -0800
***************
*** 14,20 ****
  public class NetworkPlayer extends HumanoidMob {
  
     public static final long serialVersionUID = 77479605454997290L;
!    private List moveQueue = new LinkedList();
     private Minecraft minecraft;
     private int xp;
     private int yp;
--- 14,20 ----
  public class NetworkPlayer extends HumanoidMob {
  
     public static final long serialVersionUID = 77479605454997290L;
!    private List<PositionUpdate> moveQueue = new LinkedList<PositionUpdate>();
     private Minecraft minecraft;
     private int xp;
     private int yp;
***************
*** 28,34 ****
  
  
     public NetworkPlayer(Minecraft var1, int var2, String var3, int var4, int var5, int var6, float var7, float var8) {
!       super(var1.level, (float)var4, (float)var5, (float)var6);
        this.minecraft = var1;
        this.displayName = var3;
        var3 = FontRenderer.stripColor(var3);
--- 28,34 ----
  
  
     public NetworkPlayer(Minecraft var1, int var2, String var3, int var4, int var5, int var6, float var7, float var8) {
!       super(var1.level, var4, var5, var6);
        this.minecraft = var1;
        this.displayName = var3;
        var3 = FontRenderer.stripColor(var3);
***************
*** 38,44 ****
        this.zp = var6;
        this.heightOffset = 0.0F;
        this.pushthrough = 0.8F;
!       this.setPos((float)var4 / 32.0F, (float)var5 / 32.0F, (float)var6 / 32.0F);
        this.xRot = var8;
        this.yRot = var7;
        this.armor = this.helmet = false;
--- 38,44 ----
        this.zp = var6;
        this.heightOffset = 0.0F;
        this.pushthrough = 0.8F;
!       this.setPos(var4 / 32.0F, var5 / 32.0F, var6 / 32.0F);
        this.xRot = var8;
        this.yRot = var7;
        this.armor = this.helmet = false;
***************
*** 52,58 ****
  
        do {
           if(this.moveQueue.size() > 0) {
!             this.setPos((PositionUpdate)this.moveQueue.remove(0));
           }
        } while(var1-- > 0 && this.moveQueue.size() > 10);
  
--- 52,58 ----
  
        do {
           if(this.moveQueue.size() > 0) {
!             this.setPos(this.moveQueue.remove(0));
           }
        } while(var1-- > 0 && this.moveQueue.size() > 10);
  
***************
*** 101,107 ****
        GL11.glRotatef(-this.minecraft.player.yRot, 0.0F, 1.0F, 0.0F);
        var2 = 0.05F;
        GL11.glScalef(0.05F, -var2, var2);
!       GL11.glTranslatef((float)(-var3.getWidth(this.displayName)) / 2.0F, 0.0F, 0.0F);
        GL11.glNormal3f(1.0F, -1.0F, 1.0F);
        GL11.glDisable(2896);
        GL11.glDisable(16384);
--- 101,107 ----
        GL11.glRotatef(-this.minecraft.player.yRot, 0.0F, 1.0F, 0.0F);
        var2 = 0.05F;
        GL11.glScalef(0.05F, -var2, var2);
!       GL11.glTranslatef((-var3.getWidth(this.displayName)) / 2.0F, 0.0F, 0.0F);
        GL11.glNormal3f(1.0F, -1.0F, 1.0F);
        GL11.glDisable(2896);
        GL11.glDisable(16384);
***************
*** 132,138 ****
  
        float var7;
        for(var7 = var5 - this.xRot; var6 >= 180.0F; var6 -= 360.0F) {
-          ;
        }
  
        while(var6 < -180.0F) {
--- 132,137 ----
***************
*** 149,159 ****
  
        var6 = this.yRot + var6 * 0.5F;
        var7 = this.xRot + var7 * 0.5F;
!       this.moveQueue.add(new PositionUpdate(((float)this.xp + (float)var1 / 2.0F) / 32.0F, ((float)this.yp + (float)var2 / 2.0F) / 32.0F, ((float)this.zp + (float)var3 / 2.0F) / 32.0F, var6, var7));
        this.xp += var1;
        this.yp += var2;
        this.zp += var3;
!       this.moveQueue.add(new PositionUpdate((float)this.xp / 32.0F, (float)this.yp / 32.0F, (float)this.zp / 32.0F, var4, var5));
     }
  
     public void teleport(short var1, short var2, short var3, float var4, float var5) {
--- 148,158 ----
  
        var6 = this.yRot + var6 * 0.5F;
        var7 = this.xRot + var7 * 0.5F;
!       this.moveQueue.add(new PositionUpdate((this.xp + var1 / 2.0F) / 32.0F, (this.yp + var2 / 2.0F) / 32.0F, (this.zp + var3 / 2.0F) / 32.0F, var6, var7));
        this.xp += var1;
        this.yp += var2;
        this.zp += var3;
!       this.moveQueue.add(new PositionUpdate(this.xp / 32.0F, this.yp / 32.0F, this.zp / 32.0F, var4, var5));
     }
  
     public void teleport(short var1, short var2, short var3, float var4, float var5) {
***************
*** 161,167 ****
  
        float var7;
        for(var7 = var5 - this.xRot; var6 >= 180.0F; var6 -= 360.0F) {
-          ;
        }
  
        while(var6 < -180.0F) {
--- 160,165 ----
***************
*** 178,196 ****
  
        var6 = this.yRot + var6 * 0.5F;
        var7 = this.xRot + var7 * 0.5F;
!       this.moveQueue.add(new PositionUpdate((float)(this.xp + var1) / 64.0F, (float)(this.yp + var2) / 64.0F, (float)(this.zp + var3) / 64.0F, var6, var7));
        this.xp = var1;
        this.yp = var2;
        this.zp = var3;
!       this.moveQueue.add(new PositionUpdate((float)this.xp / 32.0F, (float)this.yp / 32.0F, (float)this.zp / 32.0F, var4, var5));
     }
  
     public void queue(byte var1, byte var2, byte var3) {
!       this.moveQueue.add(new PositionUpdate(((float)this.xp + (float)var1 / 2.0F) / 32.0F, ((float)this.yp + (float)var2 / 2.0F) / 32.0F, ((float)this.zp + (float)var3 / 2.0F) / 32.0F));
        this.xp += var1;
        this.yp += var2;
        this.zp += var3;
!       this.moveQueue.add(new PositionUpdate((float)this.xp / 32.0F, (float)this.yp / 32.0F, (float)this.zp / 32.0F));
     }
  
     public void queue(float var1, float var2) {
--- 176,194 ----
  
        var6 = this.yRot + var6 * 0.5F;
        var7 = this.xRot + var7 * 0.5F;
!       this.moveQueue.add(new PositionUpdate((this.xp + var1) / 64.0F, (this.yp + var2) / 64.0F, (this.zp + var3) / 64.0F, var6, var7));
        this.xp = var1;
        this.yp = var2;
        this.zp = var3;
!       this.moveQueue.add(new PositionUpdate(this.xp / 32.0F, this.yp / 32.0F, this.zp / 32.0F, var4, var5));
     }
  
     public void queue(byte var1, byte var2, byte var3) {
!       this.moveQueue.add(new PositionUpdate((this.xp + var1 / 2.0F) / 32.0F, (this.yp + var2 / 2.0F) / 32.0F, (this.zp + var3 / 2.0F) / 32.0F));
        this.xp += var1;
        this.yp += var2;
        this.zp += var3;
!       this.moveQueue.add(new PositionUpdate(this.xp / 32.0F, this.yp / 32.0F, this.zp / 32.0F));
     }
  
     public void queue(float var1, float var2) {
***************
*** 198,204 ****
  
        float var4;
        for(var4 = var2 - this.xRot; var3 >= 180.0F; var3 -= 360.0F) {
-          ;
        }
  
        while(var3 < -180.0F) {
--- 196,201 ----
diff -crB src/com/mojang/minecraft/net/PacketType.java src2/com/mojang/minecraft/net/PacketType.java
*** src/com/mojang/minecraft/net/PacketType.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/net/PacketType.java	2013-03-05 17:01:16.706750000 -0800
***************
*** 4,10 ****
  public final class PacketType {
  
     public static final PacketType[] packets = new PacketType[256];
!    public static final PacketType IDENTIFICATION = new PacketType(new Class[]{Byte.TYPE, String.class, String.class, Byte.TYPE});
     public static final PacketType LEVEL_INIT;
     public static final PacketType LEVEL_DATA;
     public static final PacketType LEVEL_FINALIZE;
--- 4,11 ----
  public final class PacketType {
  
     public static final PacketType[] packets = new PacketType[256];
!    public static final PacketType IDENTIFICATION;
!    public static final PacketType PING;
     public static final PacketType LEVEL_INIT;
     public static final PacketType LEVEL_DATA;
     public static final PacketType LEVEL_FINALIZE;
***************
*** 22,38 ****
     public final int length;
     private static int nextOpcode;
     public final byte opcode;
!    public Class[] params;
  
  
!    private PacketType(Class ... var1) {
        this.opcode = (byte)(nextOpcode++);
        packets[this.opcode] = this;
        this.params = new Class[var1.length];
        int var2 = 0;
  
        for(int var3 = 0; var3 < var1.length; ++var3) {
!          Class var4 = var1[var3];
           this.params[var3] = var4;
           if(var4 == Long.TYPE) {
              var2 += 8;
--- 23,39 ----
     public final int length;
     private static int nextOpcode;
     public final byte opcode;
!    public Class<?>[] params;
  
  
!    private PacketType(Class<?> ... var1) {
        this.opcode = (byte)(nextOpcode++);
        packets[this.opcode] = this;
        this.params = new Class[var1.length];
        int var2 = 0;
  
        for(int var3 = 0; var3 < var1.length; ++var3) {
!          Class<?> var4 = var1[var3];
           this.params[var3] = var4;
           if(var4 == Long.TYPE) {
              var2 += 8;
***************
*** 57,63 ****
     }
  
     static {
!       new PacketType(new Class[0]);
        LEVEL_INIT = new PacketType(new Class[0]);
        LEVEL_DATA = new PacketType(new Class[]{Short.TYPE, byte[].class, Byte.TYPE});
        LEVEL_FINALIZE = new PacketType(new Class[]{Short.TYPE, Short.TYPE, Short.TYPE});
--- 58,65 ----
     }
  
     static {
! 	  IDENTIFICATION = new PacketType(new Class[]{Byte.TYPE, String.class, String.class, Byte.TYPE});
!       PING = new PacketType(new Class[0]);
        LEVEL_INIT = new PacketType(new Class[0]);
        LEVEL_DATA = new PacketType(new Class[]{Short.TYPE, byte[].class, Byte.TYPE});
        LEVEL_FINALIZE = new PacketType(new Class[]{Short.TYPE, Short.TYPE, Short.TYPE});
diff -crB src/com/mojang/minecraft/net/ServerConnectThread.java src2/com/mojang/minecraft/net/ServerConnectThread.java
*** src/com/mojang/minecraft/net/ServerConnectThread.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/net/ServerConnectThread.java	2013-03-05 17:32:21.930809000 -0800
***************
*** 9,25 ****
  
  final class ServerConnectThread extends Thread {
  
-    // $FF: synthetic field
     private String server;
-    // $FF: synthetic field
     private int port;
-    // $FF: synthetic field
     private String username;
-    // $FF: synthetic field
     private String key;
-    // $FF: synthetic field
     private Minecraft minecraft;
-    // $FF: synthetic field
     private NetworkManager netManager;
  
  
--- 9,19 ----
***************
*** 30,61 ****
        this.username = var4;
        this.key = var5;
        this.minecraft = var6;
-       super();
     }
  
!    public final void run() {
!       boolean var1;
!       NetworkManager var2;
        try {
-          NetworkManager var10000 = this.netManager;
           NetworkHandler var4 = new NetworkHandler(this.server, this.port);
!          var10000.netHandler = var4;
!          var2 = this.netManager;
!          NetworkManager var5 = this.netManager;
!          NetworkHandler var10001 = this.netManager.netHandler;
!          this.netManager.netHandler.netManager = var5;
!          var2 = this.netManager;
           this.netManager.netHandler.send(PacketType.IDENTIFICATION, new Object[]{Byte.valueOf((byte)7), this.username, this.key, Integer.valueOf(0)});
!          var1 = true;
!          var2 = this.netManager;
!          this.netManager.successful = var1;
        } catch (IOException var3) {
           this.minecraft.online = false;
           this.minecraft.networkManager = null;
           this.minecraft.setCurrentScreen(new ErrorScreen("Failed to connect", "You failed to connect to the server. It\'s probably down!"));
!          var1 = false;
!          var2 = this.netManager;
!          this.netManager.successful = var1;
        }
     }
  }
--- 24,43 ----
        this.username = var4;
        this.key = var5;
        this.minecraft = var6;
     }
  
!    public final void run() {
        try {
           NetworkHandler var4 = new NetworkHandler(this.server, this.port);
!          this.netManager.netHandler = var4;
!          this.netManager.netHandler.netManager = this.netManager;
           this.netManager.netHandler.send(PacketType.IDENTIFICATION, new Object[]{Byte.valueOf((byte)7), this.username, this.key, Integer.valueOf(0)});
!          this.netManager.successful = true;
        } catch (IOException var3) {
           this.minecraft.online = false;
           this.minecraft.networkManager = null;
           this.minecraft.setCurrentScreen(new ErrorScreen("Failed to connect", "You failed to connect to the server. It\'s probably down!"));
!          this.netManager.successful = false;
        }
     }
  }
diff -crB src/com/mojang/minecraft/net/SkinDownloadThread.java src2/com/mojang/minecraft/net/SkinDownloadThread.java
*** src/com/mojang/minecraft/net/SkinDownloadThread.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/net/SkinDownloadThread.java	2013-03-05 15:56:20.794625000 -0800
***************
*** 13,19 ****
  
     SkinDownloadThread(NetworkPlayer var1) {
        this.player = var1;
-       super();
     }
  
     public final void run() {
--- 13,18 ----
***************
*** 23,36 ****
           (var1 = (HttpURLConnection)(new URL("http://www.minecraft.net/skin/" + this.player.name + ".png")).openConnection()).setDoInput(true);
           var1.setDoOutput(false);
           var1.connect();
!          if(var1.getResponseCode() == 404) {
              return;
           }
- 
-          this.player.newTexture = ImageIO.read(var1.getInputStream());
-          return;
        } catch (Exception var5) {
           var5.printStackTrace();
        } finally {
           var1.disconnect();
        }
--- 22,34 ----
           (var1 = (HttpURLConnection)(new URL("http://www.minecraft.net/skin/" + this.player.name + ".png")).openConnection()).setDoInput(true);
           var1.setDoOutput(false);
           var1.connect();
!          if(var1.getResponseCode() != 404) {
!             this.player.newTexture = ImageIO.read(var1.getInputStream());
              return;
           }
        } catch (Exception var5) {
           var5.printStackTrace();
+          return;
        } finally {
           var1.disconnect();
        }
diff -crB src/com/mojang/minecraft/OperatingSystemLookup.java src2/com/mojang/minecraft/OperatingSystemLookup.java
*** src/com/mojang/minecraft/OperatingSystemLookup.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/OperatingSystemLookup.java	2013-03-05 17:36:02.146816000 -0800
***************
*** 13,37 ****
        try {
           lookup[Minecraft$OS.linux.ordinal()] = 1;
        } catch (NoSuchFieldError var3) {
-          ;
        }
  
        try {
           lookup[Minecraft$OS.solaris.ordinal()] = 2;
        } catch (NoSuchFieldError var2) {
-          ;
        }
  
        try {
           lookup[Minecraft$OS.windows.ordinal()] = 3;
        } catch (NoSuchFieldError var1) {
-          ;
        }
  
        try {
           lookup[Minecraft$OS.macos.ordinal()] = 4;
        } catch (NoSuchFieldError var0) {
-          ;
        }
     }
  }
--- 13,33 ----
diff -crB src/com/mojang/minecraft/particle/Particle.java src2/com/mojang/minecraft/particle/Particle.java
*** src/com/mojang/minecraft/particle/Particle.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/particle/Particle.java	2013-03-05 17:28:17.798802000 -0800
***************
*** 66,72 ****
           this.remove();
        }
  
!       this.yd = (float)((double)this.yd - 0.04D * (double)this.gravity);
        this.move(this.xd, this.yd, this.zd);
        this.xd *= 0.98F;
        this.yd *= 0.98F;
--- 66,72 ----
           this.remove();
        }
  
!       this.yd = (float)(this.yd - 0.04D * this.gravity);
        this.move(this.xd, this.yd, this.zd);
        this.xd *= 0.98F;
        this.yd *= 0.98F;
***************
*** 80,88 ****
  
     public void render(ShapeRenderer var1, float var2, float var3, float var4, float var5, float var6, float var7) {
        float var8;
!       float var9 = (var8 = (float)(this.tex % 16) / 16.0F) + 0.0624375F;
        float var10;
!       float var11 = (var10 = (float)(this.tex / 16) / 16.0F) + 0.0624375F;
        float var12 = 0.1F * this.size;
        float var13 = this.xo + (this.x - this.xo) * var2;
        float var14 = this.yo + (this.y - this.yo) * var2;
--- 80,88 ----
  
     public void render(ShapeRenderer var1, float var2, float var3, float var4, float var5, float var6, float var7) {
        float var8;
!       float var9 = (var8 = this.tex % 16 / 16.0F) + 0.0624375F;
        float var10;
!       float var11 = (var10 = this.tex / 16 / 16.0F) + 0.0624375F;
        float var12 = 0.1F * this.size;
        float var13 = this.xo + (this.x - this.xo) * var2;
        float var14 = this.yo + (this.y - this.yo) * var2;
diff -crB src/com/mojang/minecraft/particle/ParticleManager.java src2/com/mojang/minecraft/particle/ParticleManager.java
*** src/com/mojang/minecraft/particle/ParticleManager.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/particle/ParticleManager.java	2013-03-05 17:17:23.662781000 -0800
***************
*** 9,15 ****
  
  public final class ParticleManager {
  
!    public List[] particles = new List[2];
     public TextureManager textureManager;
  
  
--- 9,16 ----
  
  public final class ParticleManager {
  
!    @SuppressWarnings("unchecked")
!    public List<Particle>[] particles = new List[2];
     public TextureManager textureManager;
  
  
***************
*** 21,27 ****
        this.textureManager = var2;
  
        for(int var3 = 0; var3 < 2; ++var3) {
!          this.particles[var3] = new ArrayList();
        }
  
     }
--- 22,28 ----
        this.textureManager = var2;
  
        for(int var3 = 0; var3 < 2; ++var3) {
!          this.particles[var3] = new ArrayList<Particle>();
        }
  
     }
***************
*** 36,42 ****
        for(int var1 = 0; var1 < 2; ++var1) {
           for(int var2 = 0; var2 < this.particles[var1].size(); ++var2) {
              Particle var3;
!             (var3 = (Particle)this.particles[var1].get(var2)).tick();
              if(var3.removed) {
                 this.particles[var1].remove(var2--);
              }
--- 37,43 ----
        for(int var1 = 0; var1 < 2; ++var1) {
           for(int var2 = 0; var2 < this.particles[var1].size(); ++var2) {
              Particle var3;
!             (var3 = this.particles[var1].get(var2)).tick();
              if(var3.removed) {
                 this.particles[var1].remove(var2--);
              }
diff -crB src/com/mojang/minecraft/particle/SmokeParticle.java src2/com/mojang/minecraft/particle/SmokeParticle.java
*** src/com/mojang/minecraft/particle/SmokeParticle.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/particle/SmokeParticle.java	2013-03-05 17:28:17.730802000 -0800
***************
*** 32,38 ****
        }
  
        this.tex = 7 - (this.age << 3) / this.lifetime;
!       this.yd = (float)((double)this.yd + 0.004D);
        this.move(this.xd, this.yd, this.zd);
        this.xd *= 0.96F;
        this.yd *= 0.96F;
--- 32,38 ----
        }
  
        this.tex = 7 - (this.age << 3) / this.lifetime;
!       this.yd = (float)(this.yd + 0.004D);
        this.move(this.xd, this.yd, this.zd);
        this.xd *= 0.96F;
        this.yd *= 0.96F;
diff -crB src/com/mojang/minecraft/particle/TerrainParticle.java src2/com/mojang/minecraft/particle/TerrainParticle.java
*** src/com/mojang/minecraft/particle/TerrainParticle.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/particle/TerrainParticle.java	2013-03-05 17:28:17.566802000 -0800
***************
*** 23,31 ****
  
     public void render(ShapeRenderer var1, float var2, float var3, float var4, float var5, float var6, float var7) {
        float var8;
!       float var9 = (var8 = ((float)(this.tex % 16) + this.uo / 4.0F) / 16.0F) + 0.015609375F;
        float var10;
!       float var11 = (var10 = ((float)(this.tex / 16) + this.vo / 4.0F) / 16.0F) + 0.015609375F;
        float var12 = 0.1F * this.size;
        float var13 = this.xo + (this.x - this.xo) * var2;
        float var14 = this.yo + (this.y - this.yo) * var2;
--- 23,31 ----
  
     public void render(ShapeRenderer var1, float var2, float var3, float var4, float var5, float var6, float var7) {
        float var8;
!       float var9 = (var8 = (this.tex % 16 + this.uo / 4.0F) / 16.0F) + 0.015609375F;
        float var10;
!       float var11 = (var10 = (this.tex / 16 + this.vo / 4.0F) / 16.0F) + 0.015609375F;
        float var12 = 0.1F * this.size;
        float var13 = this.xo + (this.x - this.xo) * var2;
        float var14 = this.yo + (this.y - this.yo) * var2;
diff -crB src/com/mojang/minecraft/particle/WaterDropParticle.java src2/com/mojang/minecraft/particle/WaterDropParticle.java
*** src/com/mojang/minecraft/particle/WaterDropParticle.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/particle/WaterDropParticle.java	2013-03-05 17:28:17.434802000 -0800
***************
*** 30,36 ****
        this.xo = this.x;
        this.yo = this.y;
        this.zo = this.z;
!       this.yd = (float)((double)this.yd - 0.06D);
        this.move(this.xd, this.yd, this.zd);
        this.xd *= 0.98F;
        this.yd *= 0.98F;
--- 30,36 ----
        this.xo = this.x;
        this.yo = this.y;
        this.zo = this.z;
!       this.yd = (float)(this.yd - 0.06D);
        this.move(this.xd, this.yd, this.zd);
        this.xd *= 0.98F;
        this.yd *= 0.98F;
diff -crB src/com/mojang/minecraft/player/Inventory.java src2/com/mojang/minecraft/player/Inventory.java
*** src/com/mojang/minecraft/player/Inventory.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/player/Inventory.java	2013-03-05 17:30:38.762806000 -0800
***************
*** 58,64 ****
        }
  
        for(this.selected -= var1; this.selected < 0; this.selected += this.slots.length) {
-          ;
        }
  
        while(this.selected >= this.slots.length) {
--- 58,63 ----
***************
*** 69,75 ****
  
     public void replaceSlot(int var1) {
        if(var1 >= 0) {
!          this.replaceSlot((Block)SessionData.allowedBlocks.get(var1));
        }
  
     }
--- 68,74 ----
  
     public void replaceSlot(int var1) {
        if(var1 >= 0) {
!          this.replaceSlot(SessionData.allowedBlocks.get(var1));
        }
  
     }
diff -crB src/com/mojang/minecraft/player/Player$1.java src2/com/mojang/minecraft/player/Player$1.java
*** src/com/mojang/minecraft/player/Player$1.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/player/Player$1.java	2013-03-05 15:56:27.946625000 -0800
***************
*** 14,20 ****
        this.player = var1;
     }
  
!    protected final void update() {
        this.jumping = this.player.input.yya;
        this.xxa = this.player.input.xxa;
        this.yya = this.player.input.jumping;
--- 14,20 ----
        this.player = var1;
     }
  
!    public final void update() {
        this.jumping = this.player.input.yya;
        this.xxa = this.player.input.xxa;
        this.yya = this.player.input.jumping;
diff -crB src/com/mojang/minecraft/player/Player.java src2/com/mojang/minecraft/player/Player.java
*** src/com/mojang/minecraft/player/Player.java	2013-03-05 19:01:04.000000000 -0800
--- src2/com/mojang/minecraft/player/Player.java	2013-03-05 17:33:54.442812000 -0800
***************
*** 62,68 ****
        this.input.updateMovement();
        super.aiStep();
        float var1 = MathHelper.sqrt(this.xd * this.xd + this.zd * this.zd);
!       float var2 = (float)Math.atan((double)(-this.yd * 0.2F)) * 15.0F;
        if(var1 > 0.1F) {
           var1 = 0.1F;
        }
--- 62,68 ----
        this.input.updateMovement();
        super.aiStep();
        float var1 = MathHelper.sqrt(this.xd * this.xd + this.zd * this.zd);
!       float var2 = (float)Math.atan(-this.yd * 0.2F) * 15.0F;
        if(var1 > 0.1F) {
           var1 = 0.1F;
        }
***************
*** 77,86 ****
  
        this.bob += (var1 - this.bob) * 0.4F;
        this.tilt += (var2 - this.tilt) * 0.8F;
!       List var3;
!       if(this.health > 0 && (var3 = this.level.findEntities(this, this.bb.grow(1.0F, 0.0F, 1.0F))) != null) {
           for(int var4 = 0; var4 < var3.size(); ++var4) {
!             ((Entity)var3.get(var4)).playerTouch(this);
           }
        }
  
--- 77,86 ----
  
        this.bob += (var1 - this.bob) * 0.4F;
        this.tilt += (var2 - this.tilt) * 0.8F;
!       List<Entity> var3 = this.level.findEntities(this, this.bb.grow(1.0F, 0.0F, 1.0F));
!       if(this.health > 0 && var3 != null) {
           for(int var4 = 0; var4 < var3.size(); ++var4) {
!             var3.get(var4).playerTouch(this);
           }
        }
  
diff -crB src/com/mojang/minecraft/ProgressBarDisplay.java src2/com/mojang/minecraft/ProgressBarDisplay.java
*** src/com/mojang/minecraft/ProgressBarDisplay.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/ProgressBarDisplay.java	2013-03-05 17:38:34.198821000 -0800
***************
*** 28,34 ****
           GL11.glClear(256);
           GL11.glMatrixMode(5889);
           GL11.glLoadIdentity();
!          GL11.glOrtho(0.0D, (double)var3, (double)var2, 0.0D, 100.0D, 300.0D);
           GL11.glMatrixMode(5888);
           GL11.glLoadIdentity();
           GL11.glTranslatef(0.0F, 0.0F, -200.0F);
--- 28,34 ----
           GL11.glClear(256);
           GL11.glMatrixMode(5889);
           GL11.glLoadIdentity();
!          GL11.glOrtho(0.0D, var3, var2, 0.0D, 100.0D, 300.0D);
           GL11.glMatrixMode(5888);
           GL11.glLoadIdentity();
           GL11.glTranslatef(0.0F, 0.0F, -200.0F);
***************
*** 60,68 ****
              float var10 = 32.0F;
              var6.begin();
              var6.color(4210752);
!             var6.vertexUV(0.0F, (float)var5, 0.0F, 0.0F, (float)var5 / var10);
!             var6.vertexUV((float)var4, (float)var5, 0.0F, (float)var4 / var10, (float)var5 / var10);
!             var6.vertexUV((float)var4, 0.0F, 0.0F, (float)var4 / var10, 0.0F);
              var6.vertexUV(0.0F, 0.0F, 0.0F, 0.0F, 0.0F);
              var6.end();
              if(var1 >= 0) {
--- 60,68 ----
              float var10 = 32.0F;
              var6.begin();
              var6.color(4210752);
!             var6.vertexUV(0.0F, var5, 0.0F, 0.0F, var5 / var10);
!             var6.vertexUV(var4, var5, 0.0F, var4 / var10, var5 / var10);
!             var6.vertexUV(var4, 0.0F, 0.0F, var4 / var10, 0.0F);
              var6.vertexUV(0.0F, 0.0F, 0.0F, 0.0F, 0.0F);
              var6.end();
              if(var1 >= 0) {
***************
*** 71,85 ****
                 GL11.glDisable(3553);
                 var6.begin();
                 var6.color(8421504);
!                var6.vertex((float)var7, (float)var8, 0.0F);
!                var6.vertex((float)var7, (float)(var8 + 2), 0.0F);
!                var6.vertex((float)(var7 + 100), (float)(var8 + 2), 0.0F);
!                var6.vertex((float)(var7 + 100), (float)var8, 0.0F);
                 var6.color(8454016);
!                var6.vertex((float)var7, (float)var8, 0.0F);
!                var6.vertex((float)var7, (float)(var8 + 2), 0.0F);
!                var6.vertex((float)(var7 + var1), (float)(var8 + 2), 0.0F);
!                var6.vertex((float)(var7 + var1), (float)var8, 0.0F);
                 var6.end();
                 GL11.glEnable(3553);
              }
--- 71,85 ----
                 GL11.glDisable(3553);
                 var6.begin();
                 var6.color(8421504);
!                var6.vertex(var7, var8, 0.0F);
!                var6.vertex(var7, var8 + 2, 0.0F);
!                var6.vertex(var7 + 100, var8 + 2, 0.0F);
!                var6.vertex(var7 + 100, var8, 0.0F);
                 var6.color(8454016);
!                var6.vertex(var7, var8, 0.0F);
!                var6.vertex(var7, var8 + 2, 0.0F);
!                var6.vertex(var7 + var1, var8 + 2, 0.0F);
!                var6.vertex(var7 + var1, var8, 0.0F);
                 var6.end();
                 GL11.glEnable(3553);
              }
***************
*** 91,97 ****
              try {
                 Thread.yield();
              } catch (Exception var9) {
-                ;
              }
           }
        }
--- 91,96 ----
diff -crB src/com/mojang/minecraft/render/ChunkDistanceComparator.java src2/com/mojang/minecraft/render/ChunkDistanceComparator.java
*** src/com/mojang/minecraft/render/ChunkDistanceComparator.java	2013-03-05 19:00:56.000000000 -0800
--- src2/com/mojang/minecraft/render/ChunkDistanceComparator.java	2013-03-05 16:05:03.602642000 -0800
***************
*** 3,9 ****
  import com.mojang.minecraft.player.Player;
  import java.util.Comparator;
  
! public final class ChunkDistanceComparator implements Comparator {
  
     private Player player;
  
--- 3,9 ----
  import com.mojang.minecraft.player.Player;
  import java.util.Comparator;
  
! public final class ChunkDistanceComparator implements Comparator<Chunk> {
  
     private Player player;
  
***************
*** 11,14 ****
--- 11,29 ----
     public ChunkDistanceComparator(Player var1) {
        this.player = var1;
     }
+ 
+ 
+    @Override
+    public int compare(Chunk o1, Chunk o2) {
+ 	   float sqDist = o1.distanceSquared(this.player);
+ 	   float otherSqDist = o2.distanceSquared(this.player);
+ 
+ 	   if(sqDist == otherSqDist) {
+ 		   return 0;
+ 	   } else if (sqDist > otherSqDist) {
+ 		   return -1;
+ 	   } else {
+ 		   return 1;
+ 	   }
+    }
  }
diff -crB src/com/mojang/minecraft/render/Chunk.java src2/com/mojang/minecraft/render/Chunk.java
*** src/com/mojang/minecraft/render/Chunk.java	2013-03-05 19:00:56.000000000 -0800
--- src2/com/mojang/minecraft/render/Chunk.java	2013-03-05 17:28:17.926802000 -0800
***************
*** 31,37 ****
        this.y = var3;
        this.z = var4;
        this.width = this.height = this.depth = 16;
!       MathHelper.sqrt((float)(this.width * this.width + this.height * this.height + this.depth * this.depth));
        this.baseListId = var6;
        this.setAllDirty();
     }
--- 31,37 ----
        this.y = var3;
        this.z = var4;
        this.width = this.height = this.depth = 16;
!       MathHelper.sqrt(this.width * this.width + this.height * this.height + this.depth * this.depth);
        this.baseListId = var6;
        this.setAllDirty();
     }
***************
*** 86,94 ****
     }
  
     public final float distanceSquared(Player var1) {
!       float var2 = var1.x - (float)this.x;
!       float var3 = var1.y - (float)this.y;
!       float var4 = var1.z - (float)this.z;
        return var2 * var2 + var3 * var3 + var4 * var4;
     }
  
--- 86,94 ----
     }
  
     public final float distanceSquared(Player var1) {
!       float var2 = var1.x - this.x;
!       float var3 = var1.y - this.y;
!       float var4 = var1.z - this.z;
        return var2 * var2 + var3 * var3 + var4 * var4;
     }
  
***************
*** 117,123 ****
     }
  
     public final void clip(Frustrum var1) {
!       this.visible = var1.isBoxInFrustrum((float)this.x, (float)this.y, (float)this.z, (float)(this.x + this.width), (float)(this.y + this.height), (float)(this.z + this.depth));
     }
  
  }
--- 117,123 ----
     }
  
     public final void clip(Frustrum var1) {
!       this.visible = var1.isBoxInFrustrum(this.x, this.y, this.z, this.x + this.width, this.y + this.height, this.z + this.depth);
     }
  
  }
diff -crB src/com/mojang/minecraft/render/ChunkVisibleDistanceComparator.java src2/com/mojang/minecraft/render/ChunkVisibleDistanceComparator.java
*** src/com/mojang/minecraft/render/ChunkVisibleDistanceComparator.java	2013-03-05 19:00:54.000000000 -0800
--- src2/com/mojang/minecraft/render/ChunkVisibleDistanceComparator.java	2013-03-05 16:05:11.358642000 -0800
***************
*** 3,9 ****
  import com.mojang.minecraft.player.Player;
  import java.util.Comparator;
  
! public final class ChunkVisibleDistanceComparator implements Comparator {
  
     private Player player;
  
--- 3,9 ----
  import com.mojang.minecraft.player.Player;
  import java.util.Comparator;
  
! public final class ChunkVisibleDistanceComparator implements Comparator<Chunk> {
  
     private Player player;
  
***************
*** 11,14 ****
--- 11,37 ----
     public ChunkVisibleDistanceComparator(Player var1) {
        this.player = var1;
     }
+ 
+ 
+    @Override
+    public int compare(Chunk o1, Chunk o2) {
+ 	   if (o1.visible || !o2.visible) {
+ 		   if (o2.visible) {
+ 			   float sqDist = o1.distanceSquared(this.player);
+ 			   float otherSqDist = o2.distanceSquared(this.player);
+ 	
+ 			   if(sqDist == otherSqDist) {
+ 				   return 0;
+ 			   } else if (sqDist > otherSqDist) {
+ 				   return -1;
+ 			   } else {
+ 				   return 1;
+ 			   }
+ 		   } else {
+ 			   return 1;
+ 		   }
+ 	   } else {
+ 		   return -1;
+ 	   }
+ 	}
  }
diff -crB src/com/mojang/minecraft/render/LevelRenderer.java src2/com/mojang/minecraft/render/LevelRenderer.java
*** src/com/mojang/minecraft/render/LevelRenderer.java	2013-03-05 19:00:56.000000000 -0800
--- src2/com/mojang/minecraft/render/LevelRenderer.java	2013-03-05 17:16:59.306780000 -0800
***************
*** 20,26 ****
     public TextureManager textureManager;
     public int listId;
     public IntBuffer buffer = BufferUtils.createIntBuffer(65536);
!    public List chunks = new ArrayList();
     private Chunk[] loadQueue;
     public Chunk[] chunkCache;
     private int xChunks;
--- 20,26 ----
     public TextureManager textureManager;
     public int listId;
     public IntBuffer buffer = BufferUtils.createIntBuffer(65536);
!    public List<Chunk> chunks = new ArrayList<Chunk>();
     private Chunk[] loadQueue;
     public Chunk[] chunkCache;
     private int xChunks;
***************
*** 71,77 ****
        }
  
        for(var2 = 0; var2 < this.chunks.size(); ++var2) {
!          ((Chunk)this.chunks.get(var2)).loaded = false;
        }
  
        this.chunks.clear();
--- 71,77 ----
        }
  
        for(var2 = 0; var2 < this.chunks.size(); ++var2) {
!          this.chunks.get(var2).loaded = false;
        }
  
        this.chunks.clear();
***************
*** 101,110 ****
                 var10 = 0.0F;
              }
  
!             var11.vertexUV((float)var7, var10, (float)(var8 + var5), 0.0F, (float)var5);
!             var11.vertexUV((float)(var7 + var5), var10, (float)(var8 + var5), (float)var5, (float)var5);
!             var11.vertexUV((float)(var7 + var5), var10, (float)var8, (float)var5, 0.0F);
!             var11.vertexUV((float)var7, var10, (float)var8, 0.0F, 0.0F);
           }
        }
  
--- 101,110 ----
                 var10 = 0.0F;
              }
  
!             var11.vertexUV(var7, var10, var8 + var5, 0.0F, var5);
!             var11.vertexUV(var7 + var5, var10, var8 + var5, var5, var5);
!             var11.vertexUV(var7 + var5, var10, var8, var5, 0.0F);
!             var11.vertexUV(var7, var10, var8, 0.0F, 0.0F);
           }
        }
  
***************
*** 113,139 ****
        var11.begin();
  
        for(var7 = 0; var7 < var9.level.width; var7 += var5) {
!          var11.vertexUV((float)var7, 0.0F, 0.0F, 0.0F, 0.0F);
!          var11.vertexUV((float)(var7 + var5), 0.0F, 0.0F, (float)var5, 0.0F);
!          var11.vertexUV((float)(var7 + var5), var12, 0.0F, (float)var5, var12);
!          var11.vertexUV((float)var7, var12, 0.0F, 0.0F, var12);
!          var11.vertexUV((float)var7, var12, (float)var9.level.height, 0.0F, var12);
!          var11.vertexUV((float)(var7 + var5), var12, (float)var9.level.height, (float)var5, var12);
!          var11.vertexUV((float)(var7 + var5), 0.0F, (float)var9.level.height, (float)var5, 0.0F);
!          var11.vertexUV((float)var7, 0.0F, (float)var9.level.height, 0.0F, 0.0F);
        }
  
        GL11.glColor3f(0.6F, 0.6F, 0.6F);
  
        for(var7 = 0; var7 < var9.level.height; var7 += var5) {
!          var11.vertexUV(0.0F, var12, (float)var7, 0.0F, 0.0F);
!          var11.vertexUV(0.0F, var12, (float)(var7 + var5), (float)var5, 0.0F);
!          var11.vertexUV(0.0F, 0.0F, (float)(var7 + var5), (float)var5, var12);
!          var11.vertexUV(0.0F, 0.0F, (float)var7, 0.0F, var12);
!          var11.vertexUV((float)var9.level.width, 0.0F, (float)var7, 0.0F, var12);
!          var11.vertexUV((float)var9.level.width, 0.0F, (float)(var7 + var5), (float)var5, var12);
!          var11.vertexUV((float)var9.level.width, var12, (float)(var7 + var5), (float)var5, 0.0F);
!          var11.vertexUV((float)var9.level.width, var12, (float)var7, 0.0F, 0.0F);
        }
  
        var11.end();
--- 113,139 ----
        var11.begin();
  
        for(var7 = 0; var7 < var9.level.width; var7 += var5) {
!          var11.vertexUV(var7, 0.0F, 0.0F, 0.0F, 0.0F);
!          var11.vertexUV(var7 + var5, 0.0F, 0.0F, var5, 0.0F);
!          var11.vertexUV(var7 + var5, var12, 0.0F, var5, var12);
!          var11.vertexUV(var7, var12, 0.0F, 0.0F, var12);
!          var11.vertexUV(var7, var12, var9.level.height, 0.0F, var12);
!          var11.vertexUV(var7 + var5, var12, var9.level.height, var5, var12);
!          var11.vertexUV(var7 + var5, 0.0F, var9.level.height, var5, 0.0F);
!          var11.vertexUV(var7, 0.0F, var9.level.height, 0.0F, 0.0F);
        }
  
        GL11.glColor3f(0.6F, 0.6F, 0.6F);
  
        for(var7 = 0; var7 < var9.level.height; var7 += var5) {
!          var11.vertexUV(0.0F, var12, var7, 0.0F, 0.0F);
!          var11.vertexUV(0.0F, var12, var7 + var5, var5, 0.0F);
!          var11.vertexUV(0.0F, 0.0F, var7 + var5, var5, var12);
!          var11.vertexUV(0.0F, 0.0F, var7, 0.0F, var12);
!          var11.vertexUV(var9.level.width, 0.0F, var7, 0.0F, var12);
!          var11.vertexUV(var9.level.width, 0.0F, var7 + var5, var5, var12);
!          var11.vertexUV(var9.level.width, var12, var7 + var5, var5, 0.0F);
!          var11.vertexUV(var9.level.width, var12, var7, 0.0F, 0.0F);
        }
  
        var11.end();
***************
*** 160,173 ****
           for(var7 = -var4 * var5; var7 < var9.level.height + var4 * var5; var7 += var4) {
              float var13 = var10 - 0.1F;
              if(var6 < 0 || var7 < 0 || var6 >= var9.level.width || var7 >= var9.level.height) {
!                var11.vertexUV((float)var6, var13, (float)(var7 + var4), 0.0F, (float)var4);
!                var11.vertexUV((float)(var6 + var4), var13, (float)(var7 + var4), (float)var4, (float)var4);
!                var11.vertexUV((float)(var6 + var4), var13, (float)var7, (float)var4, 0.0F);
!                var11.vertexUV((float)var6, var13, (float)var7, 0.0F, 0.0F);
!                var11.vertexUV((float)var6, var13, (float)var7, 0.0F, 0.0F);
!                var11.vertexUV((float)(var6 + var4), var13, (float)var7, (float)var4, 0.0F);
!                var11.vertexUV((float)(var6 + var4), var13, (float)(var7 + var4), (float)var4, (float)var4);
!                var11.vertexUV((float)var6, var13, (float)(var7 + var4), 0.0F, (float)var4);
              }
           }
        }
--- 160,173 ----
           for(var7 = -var4 * var5; var7 < var9.level.height + var4 * var5; var7 += var4) {
              float var13 = var10 - 0.1F;
              if(var6 < 0 || var7 < 0 || var6 >= var9.level.width || var7 >= var9.level.height) {
!                var11.vertexUV(var6, var13, var7 + var4, 0.0F, var4);
!                var11.vertexUV(var6 + var4, var13, var7 + var4, var4, var4);
!                var11.vertexUV(var6 + var4, var13, var7, var4, 0.0F);
!                var11.vertexUV(var6, var13, var7, 0.0F, 0.0F);
!                var11.vertexUV(var6, var13, var7, 0.0F, 0.0F);
!                var11.vertexUV(var6 + var4, var13, var7, var4, 0.0F);
!                var11.vertexUV(var6 + var4, var13, var7 + var4, var4, var4);
!                var11.vertexUV(var6, var13, var7 + var4, 0.0F, var4);
              }
           }
        }
***************
*** 237,243 ****
           var6 = this.zChunks - 1;
        }
  
!       for(var1 = var1; var1 <= var4; ++var1) {
           for(int var7 = var2; var7 <= var5; ++var7) {
              for(int var8 = var3; var8 <= var6; ++var8) {
                 Chunk var9;
--- 237,243 ----
           var6 = this.zChunks - 1;
        }
  
!       for(; var1 <= var4; ++var1) {
           for(int var7 = var2; var7 <= var5; ++var7) {
              for(int var8 = var3; var8 <= var6; ++var8) {
                 Chunk var9;
diff -crB src/com/mojang/minecraft/render/Renderer.java src2/com/mojang/minecraft/render/Renderer.java
*** src/com/mojang/minecraft/render/Renderer.java	2013-03-05 19:00:54.000000000 -0800
--- src2/com/mojang/minecraft/render/Renderer.java	2013-03-05 16:35:52.442701000 -0800
***************
*** 24,31 ****
     public int levelTicks;
     public Entity entity = null;
     public Random random = new Random();
-    private volatile int unused1 = 0;
-    private volatile int unused2 = 0;
     private FloatBuffer buffer = BufferUtils.createFloatBuffer(16);
     public float fogRed;
     public float fogBlue;
--- 24,29 ----
***************
*** 47,60 ****
  
     public void hurtEffect(float var1) {
        Player var3;
!       float var2 = (float)(var3 = this.minecraft.player).hurtTime - var1;
        if(var3.health <= 0) {
!          var1 += (float)var3.deathTime;
           GL11.glRotatef(40.0F - 8000.0F / (var1 + 200.0F), 0.0F, 0.0F, 1.0F);
        }
  
        if(var2 >= 0.0F) {
!          var2 = MathHelper.sin((var2 /= (float)var3.hurtDuration) * var2 * var2 * var2 * 3.1415927F);
           var1 = var3.hurtDir;
           GL11.glRotatef(-var3.hurtDir, 0.0F, 1.0F, 0.0F);
           GL11.glRotatef(-var2 * 14.0F, 0.0F, 0.0F, 1.0F);
--- 45,58 ----
  
     public void hurtEffect(float var1) {
        Player var3;
!       float var2 = (var3 = this.minecraft.player).hurtTime - var1;
        if(var3.health <= 0) {
!          var1 += var3.deathTime;
           GL11.glRotatef(40.0F - 8000.0F / (var1 + 200.0F), 0.0F, 0.0F, 1.0F);
        }
  
        if(var2 >= 0.0F) {
!          var2 = MathHelper.sin((var2 /= var3.hurtDuration) * var2 * var2 * var2 * 3.1415927F);
           var1 = var3.hurtDir;
           GL11.glRotatef(-var3.hurtDir, 0.0F, 1.0F, 0.0F);
           GL11.glRotatef(-var2 * 14.0F, 0.0F, 0.0F, 1.0F);
***************
*** 99,105 ****
        GL11.glClear(256);
        GL11.glMatrixMode(5889);
        GL11.glLoadIdentity();
!       GL11.glOrtho(0.0D, (double)var1, (double)var2, 0.0D, 100.0D, 300.0D);
        GL11.glMatrixMode(5888);
        GL11.glLoadIdentity();
        GL11.glTranslatef(0.0F, 0.0F, -200.0F);
--- 97,103 ----
        GL11.glClear(256);
        GL11.glMatrixMode(5889);
        GL11.glLoadIdentity();
!       GL11.glOrtho(0.0D, var1, var2, 0.0D, 100.0D, 300.0D);
        GL11.glMatrixMode(5888);
        GL11.glLoadIdentity();
        GL11.glTranslatef(0.0F, 0.0F, -200.0F);
***************
*** 129,136 ****
                 var8 = (var7 * 30.0F + var8 * 70.0F) / 100.0F;
                 var3 = (var7 * 30.0F + var3 * 70.0F) / 100.0F;
                 var7 = var4;
-                var8 = var8;
-                var3 = var3;
              }
  
              GL11.glLightModel(2899, this.createBuffer(var7, var8, var3, 1.0F));
--- 127,132 ----
***************
*** 144,151 ****
                 var8 = (var7 * 30.0F + var8 * 70.0F) / 100.0F;
                 var3 = (var7 * 30.0F + var3 * 70.0F) / 100.0F;
                 var7 = var4;
-                var8 = var8;
-                var3 = var3;
              }
  
              GL11.glLightModel(2899, this.createBuffer(var7, var8, var3, 1.0F));
--- 140,145 ----
diff -crB src/com/mojang/minecraft/render/ShapeRenderer.java src2/com/mojang/minecraft/render/ShapeRenderer.java
*** src/com/mojang/minecraft/render/ShapeRenderer.java	2013-03-05 19:00:54.000000000 -0800
--- src2/com/mojang/minecraft/render/ShapeRenderer.java	2013-03-05 17:28:17.738802000 -0800
***************
*** 139,147 ****
           }
  
           this.color = true;
!          this.r = (float)(var5 & 255) / 255.0F;
!          this.g = (float)(var6 & 255) / 255.0F;
!          this.b = (float)(var8 & 255) / 255.0F;
        }
  
     }
--- 139,147 ----
           }
  
           this.color = true;
!          this.r = (var5 & 255) / 255.0F;
!          this.g = (var6 & 255) / 255.0F;
!          this.b = (var8 & 255) / 255.0F;
        }
  
     }
diff -crB src/com/mojang/minecraft/render/texture/LavaTexture.java src2/com/mojang/minecraft/render/texture/LavaTexture.java
*** src/com/mojang/minecraft/render/texture/LavaTexture.java	2013-03-05 19:00:54.000000000 -0800
--- src2/com/mojang/minecraft/render/texture/LavaTexture.java	2013-03-05 17:28:17.734802000 -0800
***************
*** 28,35 ****
        for(var1 = 0; var1 < 16; ++var1) {
           for(var2 = 0; var2 < 16; ++var2) {
              var3 = 0.0F;
!             int var4 = (int)(MathHelper.sin((float)var2 * 3.1415927F * 2.0F / 16.0F) * 1.2F);
!             var5 = (int)(MathHelper.sin((float)var1 * 3.1415927F * 2.0F / 16.0F) * 1.2F);
  
              for(var6 = var1 - 1; var6 <= var1 + 1; ++var6) {
                 for(var7 = var2 - 1; var7 <= var2 + 1; ++var7) {
--- 28,35 ----
        for(var1 = 0; var1 < 16; ++var1) {
           for(var2 = 0; var2 < 16; ++var2) {
              var3 = 0.0F;
!             int var4 = (int)(MathHelper.sin(var2 * 3.1415927F * 2.0F / 16.0F) * 1.2F);
!             var5 = (int)(MathHelper.sin(var1 * 3.1415927F * 2.0F / 16.0F) * 1.2F);
  
              for(var6 = var1 - 1; var6 <= var1 + 1; ++var6) {
                 for(var7 = var2 - 1; var7 <= var2 + 1; ++var7) {
diff -crB src/com/mojang/minecraft/render/texture/WaterTexture.java src2/com/mojang/minecraft/render/texture/WaterTexture.java
*** src/com/mojang/minecraft/render/texture/WaterTexture.java	2013-03-05 19:00:54.000000000 -0800
--- src2/com/mojang/minecraft/render/texture/WaterTexture.java	2013-03-05 17:19:09.494784000 -0800
***************
*** 9,24 ****
     private float[] blue = new float[256];
     private float[] green = new float[256];
     private float[] alpha = new float[256];
-    private int updates = 0;
  
  
     public WaterTexture() {
        super(Block.WATER.textureId);
     }
  
!    public final void animate() {
!       ++this.updates;
! 
        int var1;
        int var2;
        float var3;
--- 9,21 ----
     private float[] blue = new float[256];
     private float[] green = new float[256];
     private float[] alpha = new float[256];
  
  
     public WaterTexture() {
        super(Block.WATER.textureId);
     }
  
!    public final void animate() {
        int var1;
        int var2;
        float var3;
diff -crB src/com/mojang/minecraft/render/TextureManager.java src2/com/mojang/minecraft/render/TextureManager.java
*** src/com/mojang/minecraft/render/TextureManager.java	2013-03-05 19:00:54.000000000 -0800
--- src2/com/mojang/minecraft/render/TextureManager.java	2013-03-05 17:29:43.882804000 -0800
***************
*** 17,27 ****
  
  public class TextureManager {
  
!    public HashMap textures = new HashMap();
!    public HashMap textureImages = new HashMap();
     public IntBuffer idBuffer = BufferUtils.createIntBuffer(1);
     public ByteBuffer textureBuffer = BufferUtils.createByteBuffer(262144);
!    public List animations = new ArrayList();
     public GameSettings settings;
  
  
--- 17,27 ----
  
  public class TextureManager {
  
!    public HashMap<String, Integer> textures = new HashMap<String, Integer>();
!    public HashMap<Integer, BufferedImage> textureImages = new HashMap<Integer, BufferedImage>();
     public IntBuffer idBuffer = BufferUtils.createIntBuffer(1);
     public ByteBuffer textureBuffer = BufferUtils.createByteBuffer(262144);
!    public List<AnimatedTexture> animations = new ArrayList<AnimatedTexture>();
     public GameSettings settings;
  
  
***************
*** 30,37 ****
     }
  
     public final int load(String var1) {
!       Integer var2;
!       if((var2 = (Integer)this.textures.get(var1)) != null) {
           return var2.intValue();
        } else {
           try {
--- 30,37 ----
     }
  
     public final int load(String var1) {
!       Integer var2 = this.textures.get(var1);
!       if(var2 != null) {
           return var2.intValue();
        } else {
           try {
***************
*** 70,76 ****
        GL11.glGenTextures(this.idBuffer);
        int var2 = this.idBuffer.get(0);
        this.load(var1, var2);
!       this.textureImages.put(Integer.valueOf(var2), var1);
        return var2;
     }
  
--- 70,76 ----
        GL11.glGenTextures(this.idBuffer);
        int var2 = this.idBuffer.get(0);
        this.load(var1, var2);
!       this.textureImages.put(var2, var1);
        return var2;
     }
  
***************
*** 94,101 ****
              var8 = (var7 * 30 + var8 * 70) / 100;
              var9 = (var7 * 30 + var9 * 70) / 100;
              var7 = var10;
-             var8 = var8;
-             var9 = var9;
           }
  
           var5[var11 << 2] = (byte)var7;
--- 94,99 ----
diff -crB src/com/mojang/minecraft/ResourceDownloadThread.java src2/com/mojang/minecraft/ResourceDownloadThread.java
*** src/com/mojang/minecraft/ResourceDownloadThread.java	2013-03-05 19:00:56.000000000 -0800
--- src2/com/mojang/minecraft/ResourceDownloadThread.java	2013-03-05 17:03:07.126753000 -0800
***************
*** 1,11 ****
--- 1,17 ----
  package com.mojang.minecraft;
  
  import com.mojang.minecraft.Minecraft;
+ 
+ import java.io.BufferedReader;
  import java.io.DataInputStream;
  import java.io.DataOutputStream;
  import java.io.File;
  import java.io.FileOutputStream;
+ import java.io.IOException;
+ import java.io.InputStreamReader;
  import java.net.URL;
+ import java.util.ArrayList;
+ import java.util.List;
  
  public final class ResourceDownloadThread extends Thread {
  
***************
*** 24,49 ****
        }
     }
  
!    public final void run() {
!       // $FF: Couldn't be decompiled
!    }
! 
!    private void download(URL var1, File var2) {
!       byte[] var3 = new byte[4096];
!       DataInputStream var5 = new DataInputStream(var1.openStream());
!       DataOutputStream var6 = new DataOutputStream(new FileOutputStream(var2));
!       boolean var4 = false;
! 
!       do {
!          int var7;
!          if((var7 = var5.read(var3)) < 0) {
!             var5.close();
!             var6.close();
!             return;
!          }
! 
!          var6.write(var3, 0, var7);
!       } while(!this.stopping);
! 
!    }
  }
--- 30,94 ----
        }
     }
  
! 	public final void run() {
! 		try {
! 			List<String> var1 = new ArrayList<String>();
! 			URL var2 = new URL("http://www.minecraft.net/resources/");
! 			BufferedReader var3 = new BufferedReader(new InputStreamReader(var2.openStream()));
! 			String var4 = null;
! 			while((var4 = var3.readLine()) != null) {
! 				var1.add(var4);
! 			}
! 			
! 			var3.close();
! 			for(int var5 = 0; var5 < var1.size(); var5++) {
! 				String var6 = var1.get(var5);
! 				try {
! 					String[] var7 = var6.split(",");
! 					String var8 = var7[0];
! 					int var9 = Integer.parseInt(var7[1]);
! 					File file = new File(this.dir, var8);
! 					if(!file.exists() || file.length() != var9) {
! 						file.getParentFile().mkdirs();
! 						String var10 = var8.replaceAll(" ", "%20");
! 						this.download(new URL(var2, var10), file);
! 					} else {
! 						int j = var8.indexOf("/");
! 						String var10 = var8.substring(0, j);
! 						String var11 = var8.substring(j + 1);
! 						if(var10.equalsIgnoreCase("sound")) {
! 							this.minecraft.sound.registerSound(file, var11);
! 						} else if(var10.equalsIgnoreCase("music")) {
! 							this.minecraft.sound.registerMusic(var11, file);
! 						}
! 					}
! 				} catch (Exception var7) {
! 					var7.printStackTrace();
! 				}
! 				
! 				if(this.stopping) {
! 					return;
! 				}
! 			}
! 		} catch (Exception var1) {
! 			var1.printStackTrace();
! 		}
! 	}
! 
! 	private void download(URL var1, File var2) throws IOException {
! 		byte[] var3 = new byte[4096];
! 		DataInputStream var5 = new DataInputStream(var1.openStream());
! 		DataOutputStream var6 = new DataOutputStream(new FileOutputStream(var2));
! 
! 		while(!this.stopping) {
! 			int var7;
! 			if((var7 = var5.read(var3)) < 0) {
! 				break;
! 			}
! 
! 			var6.write(var3, 0, var7);
! 		}
! 		var5.close();
! 		var6.close();
! 	}
  }
diff -crB src/com/mojang/minecraft/SessionData.java src2/com/mojang/minecraft/SessionData.java
*** src/com/mojang/minecraft/SessionData.java	2013-03-05 19:00:54.000000000 -0800
--- src2/com/mojang/minecraft/SessionData.java	2013-03-05 17:17:41.562781000 -0800
***************
*** 6,12 ****
  
  public final class SessionData {
  
!    public static List allowedBlocks;
     public String username;
     public String sessionId;
     public String mppass;
--- 6,12 ----
  
  public final class SessionData {
  
!    public static List<Block> allowedBlocks = new ArrayList<Block>();
     public String username;
     public String sessionId;
     public String mppass;
***************
*** 19,25 ****
     }
  
     static {
!       (allowedBlocks = new ArrayList()).add(Block.STONE);
        allowedBlocks.add(Block.COBBLESTONE);
        allowedBlocks.add(Block.BRICK);
        allowedBlocks.add(Block.DIRT);
--- 19,25 ----
     }
  
     static {
!       allowedBlocks.add(Block.STONE);
        allowedBlocks.add(Block.COBBLESTONE);
        allowedBlocks.add(Block.BRICK);
        allowedBlocks.add(Block.DIRT);
diff -crB src/com/mojang/minecraft/SkinDownloadThread.java src2/com/mojang/minecraft/SkinDownloadThread.java
*** src/com/mojang/minecraft/SkinDownloadThread.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/SkinDownloadThread.java	2013-03-05 18:59:03.522976000 -0800
***************
*** 14,20 ****
  
     SkinDownloadThread(Minecraft var1) {
        this.minecraft = var1;
-       super();
     }
  
     public final void run() {
--- 14,19 ----
***************
*** 30,36 ****
              }
  
              Player.newTexture = ImageIO.read(var1.getInputStream());
-             return;
           } catch (Exception var4) {
              var4.printStackTrace();
           } finally {
--- 29,34 ----
diff -crB src/com/mojang/minecraft/SleepForeverThread.java src2/com/mojang/minecraft/SleepForeverThread.java
*** src/com/mojang/minecraft/SleepForeverThread.java	2013-03-05 19:00:58.000000000 -0800
--- src2/com/mojang/minecraft/SleepForeverThread.java	2013-03-05 17:38:36.806821000 -0800
***************
*** 6,12 ****
  
     SleepForeverThread(Minecraft var1) {
        this.setDaemon(true);
-       this.start();
     }
  
     public final void run() {
--- 6,11 ----
***************
*** 16,22 ****
                 Thread.sleep(2147483647L);
              }
           } catch (InterruptedException var1) {
-             ;
           }
        }
     }
--- 15,20 ----
diff -crB src/com/mojang/minecraft/sound/Music.java src2/com/mojang/minecraft/sound/Music.java
*** src/com/mojang/minecraft/sound/Music.java	2013-03-05 19:00:56.000000000 -0800
--- src2/com/mojang/minecraft/sound/Music.java	2013-03-05 17:28:17.686802000 -0800
***************
*** 6,11 ****
--- 6,13 ----
  import de.jarnbjo.ogg.LogicalOggStreamImpl;
  import de.jarnbjo.ogg.OnDemandUrlStream;
  import de.jarnbjo.vorbis.VorbisStream;
+ 
+ import java.io.IOException;
  import java.net.URL;
  import java.nio.ByteBuffer;
  
***************
*** 21,29 ****
     boolean stopped = false;
  
  
!    public Music(SoundPlayer var1, URL var2) {
        this.player = var1;
!       LogicalOggStreamImpl var3 = (LogicalOggStreamImpl)(new OnDemandUrlStream(var2)).logicalStreams.values().iterator().next();
        this.stream = new VorbisStream(var3);
        (new MusicPlayThread(this)).start();
     }
--- 23,31 ----
     boolean stopped = false;
  
  
!    public Music(SoundPlayer var1, URL var2) throws IOException {
        this.player = var1;
!       LogicalOggStreamImpl var3 = (new OnDemandUrlStream(var2)).logicalStreams.values().iterator().next();
        this.stream = new VorbisStream(var3);
        (new MusicPlayThread(this)).start();
     }
***************
*** 33,39 ****
           this.stopped = true;
           return false;
        } else {
-          var3 = var3;
           int var4 = 0;
  
           while(var3 > 0 && (this.processing != null || this.previous != null)) {
--- 35,40 ----
diff -crB src/com/mojang/minecraft/sound/MusicPlayThread.java src2/com/mojang/minecraft/sound/MusicPlayThread.java
*** src/com/mojang/minecraft/sound/MusicPlayThread.java	2013-03-05 19:00:56.000000000 -0800
--- src2/com/mojang/minecraft/sound/MusicPlayThread.java	2013-03-05 17:07:05.346761000 -0800
***************
*** 2,8 ****
  
  import com.mojang.minecraft.sound.Music;
  import de.jarnbjo.ogg.EndOfOggStreamException;
- import de.jarnbjo.vorbis.VorbisStream;
  import java.nio.ByteBuffer;
  
  final class MusicPlayThread extends Thread {
--- 2,7 ----
***************
*** 13,66 ****
  
     public MusicPlayThread(Music var1) {
        this.music = var1;
-       super();
        this.setPriority(10);
        this.setDaemon(true);
     }
  
     public final void run() {
        try {
!          do {
              if(this.music.stopped) {
                 return;
              }
  
-             Music var1 = this.music;
              ByteBuffer var2;
-             Music var10001;
              if(this.music.playing == null) {
-                var1 = this.music;
                 if(this.music.current != null) {
-                   var1 = this.music;
                    var2 = this.music.current;
-                   var10001 = this.music;
                    this.music.playing = var2;
                    var2 = null;
-                   var1 = this.music;
                    this.music.current = null;
-                   var1 = this.music;
                    this.music.playing.clear();
                 }
              }
  
-             var1 = this.music;
              if(this.music.playing != null) {
-                var1 = this.music;
                 if(this.music.playing.remaining() != 0) {
                    while(true) {
-                      var1 = this.music;
                       if(this.music.playing.remaining() == 0) {
                          break;
                       }
  
-                      var1 = this.music;
-                      var1 = this.music;
                       var2 = this.music.playing;
-                      VorbisStream var9 = this.music.stream;
                       int var10 = this.music.stream.readPcm(var2.array(), var2.position(), var2.remaining());
                       var2.position(var2.position() + var10);
!                      boolean var11;
!                      if(var11 = var10 <= 0) {
                          this.music.finished = true;
                          this.music.stopped = true;
                          break;
--- 12,51 ----
  
     public MusicPlayThread(Music var1) {
        this.music = var1;
        this.setPriority(10);
        this.setDaemon(true);
     }
  
     public final void run() {
        try {
!          while(this.music.player.running) {
              if(this.music.stopped) {
                 return;
              }
  
              ByteBuffer var2;
              if(this.music.playing == null) {
                 if(this.music.current != null) {
                    var2 = this.music.current;
                    this.music.playing = var2;
                    var2 = null;
                    this.music.current = null;
                    this.music.playing.clear();
                 }
              }
  
              if(this.music.playing != null) {
                 if(this.music.playing.remaining() != 0) {
                    while(true) {
                       if(this.music.playing.remaining() == 0) {
                          break;
                       }
  
                       var2 = this.music.playing;
                       int var10 = this.music.stream.readPcm(var2.array(), var2.position(), var2.remaining());
                       var2.position(var2.position() + var10);
!                      boolean var11 = var10 <= 0;
!                      if(var11) {
                          this.music.finished = true;
                          this.music.stopped = true;
                          break;
***************
*** 69,97 ****
                 }
              }
  
-             var1 = this.music;
              if(this.music.playing != null) {
-                var1 = this.music;
                 if(this.music.previous == null) {
-                   var1 = this.music;
                    this.music.playing.flip();
-                   var1 = this.music;
                    var2 = this.music.playing;
-                   var10001 = this.music;
                    this.music.previous = var2;
                    var2 = null;
-                   var1 = this.music;
                    this.music.playing = var2;
                 }
              }
  
              Thread.sleep(10L);
!             var1 = this.music;
!          } while(this.music.player.running);
  
           return;
        } catch (EndOfOggStreamException var6) {
-          ;
        } catch (Exception var7) {
           var7.printStackTrace();
           return;
--- 54,74 ----
                 }
              }
  
              if(this.music.playing != null) {
                 if(this.music.previous == null) {
                    this.music.playing.flip();
                    var2 = this.music.playing;
                    this.music.previous = var2;
                    var2 = null;
                    this.music.playing = var2;
                 }
              }
  
              Thread.sleep(10L);
!          }
  
           return;
        } catch (EndOfOggStreamException var6) {
        } catch (Exception var7) {
           var7.printStackTrace();
           return;
diff -crB src/com/mojang/minecraft/sound/SoundInfo.java src2/com/mojang/minecraft/sound/SoundInfo.java
*** src/com/mojang/minecraft/sound/SoundInfo.java	2013-03-05 19:00:56.000000000 -0800
--- src2/com/mojang/minecraft/sound/SoundInfo.java	2013-03-05 17:28:17.470802000 -0800
***************
*** 17,32 ****
     }
  
     public final int update(short[] var1, int var2) {
!       if(this.seek >= (float)this.data.data.length) {
           return 0;
        } else {
           for(int var3 = 0; var3 < var2; ++var3) {
              int var4 = (int)this.seek;
              short var5 = this.data.data[var4];
              short var6 = var4 < this.data.data.length - 1?this.data.data[var4 + 1]:0;
!             var1[var3] = (short)((int)((float)var5 + (float)(var6 - var5) * (this.seek - (float)var4)));
              this.seek += this.pitch;
!             if(this.seek >= (float)this.data.data.length) {
                 return var3;
              }
           }
--- 17,32 ----
     }
  
     public final int update(short[] var1, int var2) {
!       if(this.seek >= this.data.data.length) {
           return 0;
        } else {
           for(int var3 = 0; var3 < var2; ++var3) {
              int var4 = (int)this.seek;
              short var5 = this.data.data[var4];
              short var6 = var4 < this.data.data.length - 1?this.data.data[var4 + 1]:0;
!             var1[var3] = (short)((int)(var5 + (var6 - var5) * (this.seek - var4)));
              this.seek += this.pitch;
!             if(this.seek >= this.data.data.length) {
                 return var3;
              }
           }
diff -crB src/com/mojang/minecraft/sound/SoundManager.java src2/com/mojang/minecraft/sound/SoundManager.java
*** src/com/mojang/minecraft/sound/SoundManager.java	2013-03-05 19:00:56.000000000 -0800
--- src2/com/mojang/minecraft/sound/SoundManager.java	2013-03-05 16:31:18.478692000 -0800
***************
*** 17,40 ****
  
  public final class SoundManager {
  
!    private SoundReader reader = new SoundReader();
!    public Map sounds = new HashMap();
!    private Map music = new HashMap();
     public Random random = new Random();
     public long lastMusic = System.currentTimeMillis() + 60000L;
  
  
     public final AudioInfo getAudioInfo(String var1, float var2, float var3) {
!       List var4 = null;
!       Map var5 = this.sounds;
        synchronized(this.sounds) {
!          var4 = (List)this.sounds.get(var1);
        }
  
        if(var4 == null) {
           return null;
        } else {
!          SoundData var7 = (SoundData)var4.get(this.random.nextInt(var4.size()));
           return new SoundInfo(var7, var3, var2);
        }
     }
--- 17,38 ----
  
  public final class SoundManager {
  
!    public Map<String, List<SoundData>> sounds = new HashMap<String, List<SoundData>>();
!    private Map<String, List<File>> music = new HashMap<String, List<File>>();
     public Random random = new Random();
     public long lastMusic = System.currentTimeMillis() + 60000L;
  
  
     public final AudioInfo getAudioInfo(String var1, float var2, float var3) {
!       List<SoundData> var4 = null;
        synchronized(this.sounds) {
!          var4 = this.sounds.get(var1);
        }
  
        if(var4 == null) {
           return null;
        } else {
!          SoundData var7 = var4.get(this.random.nextInt(var4.size()));
           return new SoundInfo(var7, var3, var2);
        }
     }
***************
*** 42,60 ****
     public void registerSound(File var1, String var2) {
        try {
           for(var2 = var2.substring(0, var2.length() - 4).replaceAll("/", "."); Character.isDigit(var2.charAt(var2.length() - 1)); var2 = var2.substring(0, var2.length() - 1)) {
-             ;
           }
  
           SoundData var7 = SoundReader.read(var1.toURI().toURL());
-          Map var3 = this.sounds;
           synchronized(this.sounds) {
!             Object var4;
!             if((var4 = (List)this.sounds.get(var2)) == null) {
!                var4 = new ArrayList();
                 this.sounds.put(var2, var4);
              }
  
!             ((List)var4).add(var7);
           }
        } catch (Exception var6) {
           var6.printStackTrace();
--- 40,56 ----
     public void registerSound(File var1, String var2) {
        try {
           for(var2 = var2.substring(0, var2.length() - 4).replaceAll("/", "."); Character.isDigit(var2.charAt(var2.length() - 1)); var2 = var2.substring(0, var2.length() - 1)) {
           }
  
           SoundData var7 = SoundReader.read(var1.toURI().toURL());
           synchronized(this.sounds) {
!             List<SoundData> var4 = this.sounds.get(var2);
!             if(var4 == null) {
!                var4 = new ArrayList<SoundData>();
                 this.sounds.put(var2, var4);
              }
  
!             var4.add(var7);
           }
        } catch (Exception var6) {
           var6.printStackTrace();
***************
*** 62,95 ****
  
     }
  
!    public final void registerMusic(String var1, File var2) {
!       Map var3 = this.music;
        synchronized(this.music) {
           for(var1 = var1.substring(0, var1.length() - 4).replaceAll("/", "."); Character.isDigit(var1.charAt(var1.length() - 1)); var1 = var1.substring(0, var1.length() - 1)) {
-             ;
           }
  
!          Object var4;
!          if((var4 = (List)this.music.get(var1)) == null) {
!             var4 = new ArrayList();
              this.music.put(var1, var4);
           }
  
!          ((List)var4).add(var2);
        }
     }
  
     public boolean playMusic(SoundPlayer var1, String var2) {
!       List var3 = null;
!       Map var4 = this.music;
        synchronized(this.music) {
!          var3 = (List)this.music.get(var2);
        }
  
        if(var3 == null) {
           return false;
        } else {
!          File var8 = (File)var3.get(this.random.nextInt(var3.size()));
  
           try {
              var1.play(new Music(var1, var8.toURI().toURL()));
--- 58,88 ----
  
     }
  
!    public final void registerMusic(String var1, File var2) {
        synchronized(this.music) {
           for(var1 = var1.substring(0, var1.length() - 4).replaceAll("/", "."); Character.isDigit(var1.charAt(var1.length() - 1)); var1 = var1.substring(0, var1.length() - 1)) {
           }
  
!          List<File> var4 = this.music.get(var1);
!          if(var4 == null) {
!             var4 = new ArrayList<File>();
              this.music.put(var1, var4);
           }
  
!          var4.add(var2);
        }
     }
  
     public boolean playMusic(SoundPlayer var1, String var2) {
! 	   List<File> var3 = null;
        synchronized(this.music) {
!          var3 = this.music.get(var2);
        }
  
        if(var3 == null) {
           return false;
        } else {
!          File var8 = var3.get(this.random.nextInt(var3.size()));
  
           try {
              var1.play(new Music(var1, var8.toURI().toURL()));
diff -crB src/com/mojang/minecraft/sound/SoundPlayer.java src2/com/mojang/minecraft/sound/SoundPlayer.java
*** src/com/mojang/minecraft/sound/SoundPlayer.java	2013-03-05 19:00:56.000000000 -0800
--- src2/com/mojang/minecraft/sound/SoundPlayer.java	2013-03-05 17:18:15.178782000 -0800
***************
*** 14,20 ****
  
     public boolean running = false;
     public SourceDataLine dataLine;
!    private List audioQueue = new ArrayList();
     public GameSettings settings;
  
  
--- 14,20 ----
  
     public boolean running = false;
     public SourceDataLine dataLine;
!    private List<Audio> audioQueue = new ArrayList<Audio>();
     public GameSettings settings;
  
  
***************
*** 24,30 ****
  
     public final void play(Audio var1) {
        if(this.running) {
-          List var2 = this.audioQueue;
           synchronized(this.audioQueue) {
              this.audioQueue.add(var1);
           }
--- 24,29 ----
***************
*** 48,68 ****
  
           Arrays.fill(var1, 0, 4410, 0);
           Arrays.fill(var2, 0, 4410, 0);
-          boolean var4 = true;
           int[] var5 = var2;
           int[] var6 = var1;
-          List var12 = this.audioQueue;
-          List var7 = this.audioQueue;
           synchronized(this.audioQueue) {
              int var8 = 0;
  
              while(true) {
!                if(var8 >= var12.size()) {
                    break;
                 }
  
!                if(!((Audio)var12.get(var8)).play(var6, var5, 4410)) {
!                   var12.remove(var8--);
                 }
  
                 ++var8;
--- 47,64 ----
  
           Arrays.fill(var1, 0, 4410, 0);
           Arrays.fill(var2, 0, 4410, 0);
           int[] var5 = var2;
           int[] var6 = var1;
           synchronized(this.audioQueue) {
              int var8 = 0;
  
              while(true) {
!                if(var8 >= this.audioQueue.size()) {
                    break;
                 }
  
!                if(!this.audioQueue.get(var8).play(var6, var5, 4410)) {
!             	   this.audioQueue.remove(var8--);
                 }
  
                 ++var8;
diff -crB src/com/mojang/minecraft/sound/SoundReader.java src2/com/mojang/minecraft/sound/SoundReader.java
*** src/com/mojang/minecraft/sound/SoundReader.java	2013-03-05 19:00:56.000000000 -0800
--- src2/com/mojang/minecraft/sound/SoundReader.java	2013-03-05 17:00:15.362748000 -0800
***************
*** 4,22 ****
  import de.jarnbjo.ogg.EndOfOggStreamException;
  import de.jarnbjo.ogg.LogicalOggStreamImpl;
  import de.jarnbjo.ogg.OnDemandUrlStream;
- import de.jarnbjo.vorbis.IdentificationHeader;
  import de.jarnbjo.vorbis.VorbisStream;
  import java.net.URL;
  
  public final class SoundReader {
  
!    public static SoundData read(URL var0) {
!       LogicalOggStreamImpl var11 = (LogicalOggStreamImpl)(new OnDemandUrlStream(var0)).logicalStreams.values().iterator().next();
        VorbisStream var12 = new VorbisStream(var11);
        byte[] var2 = new byte[4096];
        int var3 = 0;
-       boolean var1 = false;
-       IdentificationHeader var14 = var12.identificationHeader;
        int var4 = var12.identificationHeader.channels;
        short[] var5 = new short[4096];
        int var6 = 0;
--- 4,21 ----
  import de.jarnbjo.ogg.EndOfOggStreamException;
  import de.jarnbjo.ogg.LogicalOggStreamImpl;
  import de.jarnbjo.ogg.OnDemandUrlStream;
  import de.jarnbjo.vorbis.VorbisStream;
+ 
+ import java.io.IOException;
  import java.net.URL;
  
  public final class SoundReader {
  
!    public static SoundData read(URL var0) throws IOException {
!       LogicalOggStreamImpl var11 = (new OnDemandUrlStream(var0)).logicalStreams.values().iterator().next();
        VorbisStream var12 = new VorbisStream(var11);
        byte[] var2 = new byte[4096];
        int var3 = 0;
        int var4 = var12.identificationHeader.channels;
        short[] var5 = new short[4096];
        int var6 = 0;
***************
*** 39,45 ****
                 break;
              }
  
-             boolean var7 = false;
              int var16 = 0;
  
              while(true) {
--- 38,43 ----
***************
*** 70,76 ****
           System.arraycopy(var17, 0, var5, 0, var6);
        }
  
!       IdentificationHeader var13;
!       return new SoundData(var5, (float)(var13 = var12.identificationHeader).samplerate);
     }
  }
--- 68,73 ----
           System.arraycopy(var17, 0, var5, 0, var6);
        }
  
!       return new SoundData(var5, var12.identificationHeader.samplerate);
     }
  }
diff -crB src/com/mojang/net/NetworkHandler.java src2/com/mojang/net/NetworkHandler.java
*** src/com/mojang/net/NetworkHandler.java	2013-03-05 19:00:54.000000000 -0800
--- src2/com/mojang/net/NetworkHandler.java	2013-03-05 17:35:55.986816000 -0800
***************
*** 2,7 ****
--- 2,9 ----
  
  import com.mojang.minecraft.net.NetworkManager;
  import com.mojang.minecraft.net.PacketType;
+ 
+ import java.io.IOException;
  import java.net.InetSocketAddress;
  import java.net.Socket;
  import java.nio.ByteBuffer;
***************
*** 16,26 ****
     public ByteBuffer out = ByteBuffer.allocate(1048576);
     public NetworkManager netManager;
     private Socket sock;
-    private boolean unused = false;
     private byte[] stringBytes = new byte[64];
  
  
!    public NetworkHandler(String var1, int var2) {
        this.channel.connect(new InetSocketAddress(var1, var2));
        this.channel.configureBlocking(false);
        System.currentTimeMillis();
--- 18,27 ----
     public ByteBuffer out = ByteBuffer.allocate(1048576);
     public NetworkManager netManager;
     private Socket sock;
     private byte[] stringBytes = new byte[64];
  
  
!    public NetworkHandler(String var1, int var2) throws IOException {
        this.channel.connect(new InetSocketAddress(var1, var2));
        this.channel.configureBlocking(false);
        System.currentTimeMillis();
***************
*** 44,50 ****
              this.out.compact();
           }
        } catch (Exception var2) {
-          ;
        }
  
        this.connected = false;
--- 45,50 ----
***************
*** 52,58 ****
        try {
           this.channel.close();
        } catch (Exception var1) {
-          ;
        }
  
        this.sock = null;
--- 52,57 ----
***************
*** 64,72 ****
           this.out.put(var1.opcode);
  
           for(int var3 = 0; var3 < var2.length; ++var3) {
-             Class var10001 = var1.params[var3];
              Object var4 = var2[var3];
!             Class var5 = var10001;
              NetworkHandler var6 = this;
              if(this.connected) {
                 try {
--- 63,70 ----
           this.out.put(var1.opcode);
  
           for(int var3 = 0; var3 < var2.length; ++var3) {
              Object var4 = var2[var3];
!             Class<?> var5 = var1.params[var3];
              NetworkHandler var6 = this;
              if(this.connected) {
                 try {
***************
*** 86,92 ****
                       byte[] var9;
                       if(var5 != String.class) {
                          if(var5 == byte[].class) {
!                            if((var9 = (byte[])((byte[])var4)).length < 1024) {
                                var9 = Arrays.copyOf(var9, 1024);
                             }
  
--- 84,90 ----
                       byte[] var9;
                       if(var5 != String.class) {
                          if(var5 == byte[].class) {
!                            if((var9 = ((byte[])var4)).length < 1024) {
                                var9 = Arrays.copyOf(var9, 1024);
                             }
  
***************
*** 117,123 ****
        }
     }
  
!    public Object readObject(Class var1) {
        if(!this.connected) {
           return null;
        } else {
--- 115,121 ----
        }
     }
  
!    public Object readObject(Class<?> var1) {
        if(!this.connected) {
           return null;
        } else {
diff -crB src/com/mojang/util/MathHelper.java src2/com/mojang/util/MathHelper.java
*** src/com/mojang/util/MathHelper.java	2013-03-05 19:00:54.000000000 -0800
--- src2/com/mojang/util/MathHelper.java	2013-03-05 17:28:17.462802000 -0800
***************
*** 15,26 ****
     }
  
     public static final float sqrt(float var0) {
!       return (float)Math.sqrt((double)var0);
     }
  
     static {
        for(int var0 = 0; var0 < 65536; ++var0) {
!          SIN_TABLE[var0] = (float)Math.sin((double)var0 * 3.141592653589793D * 2.0D / 65536.0D);
        }
  
     }
--- 15,26 ----
     }
  
     public static final float sqrt(float var0) {
!       return (float)Math.sqrt(var0);
     }
  
     static {
        for(int var0 = 0; var0 < 65536; ++var0) {
!          SIN_TABLE[var0] = (float)Math.sin(var0 * 3.141592653589793D * 2.0D / 65536.0D);
        }
  
     }
diff -crB src/de/jarnbjo/ogg/LogicalOggStreamImpl.java src2/de/jarnbjo/ogg/LogicalOggStreamImpl.java
*** src/de/jarnbjo/ogg/LogicalOggStreamImpl.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/ogg/LogicalOggStreamImpl.java	2013-03-05 17:05:53.046759000 -0800
***************
*** 4,83 ****
  import de.jarnbjo.ogg.OggPage;
  import de.jarnbjo.ogg.OnDemandUrlStream;
  import java.io.ByteArrayOutputStream;
! import java.util.ArrayList;
  
  public final class LogicalOggStreamImpl {
  
     private OnDemandUrlStream source;
-    private ArrayList pageNumberMapping = new ArrayList();
-    private int pageIndex;
     private OggPage currentPage;
     private int currentSegmentIndex;
  
  
!    public LogicalOggStreamImpl(OnDemandUrlStream var1) {
!       new ArrayList();
!       this.pageIndex = 0;
        this.source = var1;
     }
  
!    private synchronized OggPage getNextOggPage() {
        this.currentPage = this.source.getOggPage();
        return this.currentPage;
     }
  
!    public final synchronized byte[] getNextOggPacket() {
        ByteArrayOutputStream var1 = new ByteArrayOutputStream();
        boolean var2 = false;
        if(this.currentPage == null) {
           this.currentPage = this.getNextOggPage();
        }
  
!       int var4;
!       do {
!          OggPage var3 = this.currentPage;
           if(this.currentSegmentIndex >= this.currentPage.segmentOffsets.length) {
              this.currentSegmentIndex = 0;
-             var3 = this.currentPage;
              if(this.currentPage.eos) {
                 throw new EndOfOggStreamException();
              }
  
              this.currentPage = this.getNextOggPage();
              if(var1.size() == 0) {
-                var3 = this.currentPage;
                 if(this.currentPage.continued) {
                    var2 = false;
  
                    while(!var2) {
-                      var3 = this.currentPage;
                       if(this.currentPage.segmentLengths[this.currentSegmentIndex++] != 255) {
                          var2 = true;
                       }
  
-                      var3 = this.currentPage;
                       if(this.currentSegmentIndex > this.currentPage.segmentTable.length) {
!                         OnDemandUrlStream var10001 = this.source;
!                         ((Integer)this.pageNumberMapping.get(this.pageIndex++)).intValue();
!                         this.currentPage = var10001.getOggPage();
                       }
                    }
                 }
              }
           }
  
-          var3 = this.currentPage;
           if(this.currentPage.segmentLengths.length == 0) {
              break;
           }
  
-          var3 = this.currentPage;
           var4 = this.currentPage.segmentLengths[this.currentSegmentIndex];
-          var3 = this.currentPage;
-          var3 = this.currentPage;
           var1.write(this.currentPage.data, this.currentPage.segmentOffsets[this.currentSegmentIndex], var4);
           ++this.currentSegmentIndex;
!       } while(var4 == 255);
  
        return var1.toByteArray();
     }
--- 4,68 ----
  import de.jarnbjo.ogg.OggPage;
  import de.jarnbjo.ogg.OnDemandUrlStream;
  import java.io.ByteArrayOutputStream;
! import java.io.IOException;
  
  public final class LogicalOggStreamImpl {
  
     private OnDemandUrlStream source;
     private OggPage currentPage;
     private int currentSegmentIndex;
  
  
!    public LogicalOggStreamImpl(OnDemandUrlStream var1) {
        this.source = var1;
     }
  
!    private synchronized OggPage getNextOggPage() throws IOException {
        this.currentPage = this.source.getOggPage();
        return this.currentPage;
     }
  
!    public final synchronized byte[] getNextOggPacket() throws IOException {
        ByteArrayOutputStream var1 = new ByteArrayOutputStream();
        boolean var2 = false;
        if(this.currentPage == null) {
           this.currentPage = this.getNextOggPage();
        }
  
!       int var4 = 255;
!       while(var4 == 255) {
           if(this.currentSegmentIndex >= this.currentPage.segmentOffsets.length) {
              this.currentSegmentIndex = 0;
              if(this.currentPage.eos) {
                 throw new EndOfOggStreamException();
              }
  
              this.currentPage = this.getNextOggPage();
              if(var1.size() == 0) {
                 if(this.currentPage.continued) {
                    var2 = false;
  
                    while(!var2) {
                       if(this.currentPage.segmentLengths[this.currentSegmentIndex++] != 255) {
                          var2 = true;
                       }
  
                       if(this.currentSegmentIndex > this.currentPage.segmentTable.length) {
!                         this.currentPage = this.source.getOggPage();
                       }
                    }
                 }
              }
           }
  
           if(this.currentPage.segmentLengths.length == 0) {
              break;
           }
  
           var4 = this.currentPage.segmentLengths[this.currentSegmentIndex];
           var1.write(this.currentPage.data, this.currentPage.segmentOffsets[this.currentSegmentIndex], var4);
           ++this.currentSegmentIndex;
!       }
  
        return var1.toByteArray();
     }
diff -crB src/de/jarnbjo/ogg/OggPage.java src2/de/jarnbjo/ogg/OggPage.java
*** src/de/jarnbjo/ogg/OggPage.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/ogg/OggPage.java	2013-03-05 16:59:50.138747000 -0800
***************
*** 3,8 ****
--- 3,9 ----
  import de.jarnbjo.ogg.EndOfOggStreamException;
  import de.jarnbjo.util.io.BitInputStream;
  import java.io.EOFException;
+ import java.io.IOException;
  import java.io.InputStream;
  import java.io.RandomAccessFile;
  
***************
*** 31,45 ****
        this.data = var14;
     }
  
!    public static OggPage create(InputStream var0) {
        InputStream var10000 = var0;
-       boolean var1 = false;
        return create(var10000, false);
     }
  
!    private static OggPage create(Object var0, boolean var1) {
        try {
-          boolean var2 = false;
           byte[] var19 = new byte[27];
           if(var0 instanceof RandomAccessFile) {
              RandomAccessFile var3;
--- 32,44 ----
        this.data = var14;
     }
  
!    public static OggPage create(InputStream var0) throws IOException {
        InputStream var10000 = var0;
        return create(var10000, false);
     }
  
!    private static OggPage create(Object var0, boolean var1) throws IOException {
        try {
           byte[] var19 = new byte[27];
           if(var0 instanceof RandomAccessFile) {
              RandomAccessFile var3;
***************
*** 57,63 ****
           if((var4 = (var20 = new BitInputStream(var19)).getInt(32)) != 1399285583) {
              String var22;
              for(var22 = Integer.toHexString(var4); var22.length() < 8; var22 = "0" + var22) {
-                ;
              }
  
              char var5 = (char)Integer.valueOf((var22 = var22.substring(6, 8) + var22.substring(4, 6) + var22.substring(2, 4) + var22.substring(0, 2)).substring(0, 2), 16).intValue();
--- 56,61 ----
***************
*** 112,118 ****
        }
     }
  
!    private static void readFully(InputStream var0, byte[] var1) {
        int var3;
        for(int var2 = 0; var2 < var1.length; var2 += var3) {
           if((var3 = var0.read(var1, var2, var1.length - var2)) == -1) {
--- 110,116 ----
        }
     }
  
!    private static void readFully(InputStream var0, byte[] var1) throws IOException {
        int var3;
        for(int var2 = 0; var2 < var1.length; var2 += var3) {
           if((var3 = var0.read(var1, var2, var1.length - var2)) == -1) {
diff -crB src/de/jarnbjo/ogg/OnDemandUrlStream.java src2/de/jarnbjo/ogg/OnDemandUrlStream.java
*** src/de/jarnbjo/ogg/OnDemandUrlStream.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/ogg/OnDemandUrlStream.java	2013-03-05 16:58:08.950744000 -0800
***************
*** 2,47 ****
  
  import de.jarnbjo.ogg.LogicalOggStreamImpl;
  import de.jarnbjo.ogg.OggPage;
  import java.io.InputStream;
  import java.net.URL;
  import java.net.URLConnection;
  import java.util.HashMap;
- import java.util.LinkedList;
  
  public final class OnDemandUrlStream {
  
     private URLConnection source;
     private InputStream sourceStream;
!    private int position;
!    public HashMap logicalStreams;
     private OggPage firstPage;
  
! 
!    public OnDemandUrlStream(URL var1) {
!       new Object();
!       new LinkedList();
!       this.position = 0;
!       this.logicalStreams = new HashMap();
        this.source = var1.openConnection();
        this.sourceStream = this.source.getInputStream();
-       this.source.getContentLength();
        this.firstPage = OggPage.create(this.sourceStream);
-       this.position += this.firstPage.getTotalLength();
        LogicalOggStreamImpl var3 = new LogicalOggStreamImpl(this);
!       OggPage var2;
!       this.logicalStreams.put(new Integer((var2 = this.firstPage).streamSerialNumber), var3);
     }
  
!    public final OggPage getOggPage() {
!       OggPage var1;
        if(this.firstPage != null) {
           var1 = this.firstPage;
           this.firstPage = null;
-          return var1;
        } else {
           var1 = OggPage.create(this.sourceStream);
!          this.position += var1.getTotalLength();
!          return var1;
!       }
     }
  }
--- 2,39 ----
  
  import de.jarnbjo.ogg.LogicalOggStreamImpl;
  import de.jarnbjo.ogg.OggPage;
+ 
+ import java.io.IOException;
  import java.io.InputStream;
  import java.net.URL;
  import java.net.URLConnection;
  import java.util.HashMap;
  
  public final class OnDemandUrlStream {
  
     private URLConnection source;
     private InputStream sourceStream;
!    public HashMap<Integer, LogicalOggStreamImpl> logicalStreams;
     private OggPage firstPage;
  
!    public OnDemandUrlStream(URL var1) throws IOException {
!       this.logicalStreams = new HashMap<Integer, LogicalOggStreamImpl>();
        this.source = var1.openConnection();
        this.sourceStream = this.source.getInputStream();
        this.firstPage = OggPage.create(this.sourceStream);
        LogicalOggStreamImpl var3 = new LogicalOggStreamImpl(this);
!       this.logicalStreams.put(this.firstPage.streamSerialNumber, var3);
     }
  
!    public final OggPage getOggPage() throws IOException {
!       OggPage var1 = null;
        if(this.firstPage != null) {
           var1 = this.firstPage;
           this.firstPage = null;
        } else {
           var1 = OggPage.create(this.sourceStream);
!       }
!       
!       return var1;
     }
  }
diff -crB src/de/jarnbjo/vorbis/AudioPacket.java src2/de/jarnbjo/vorbis/AudioPacket.java
*** src/de/jarnbjo/vorbis/AudioPacket.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/AudioPacket.java	2013-03-05 17:32:34.014810000 -0800
***************
*** 35,41 ****
     private static final float[][] windows = new float[8][];
  
  
!    protected AudioPacket(VorbisStream var1, BitInputStream var2) {
        SetupHeader var4 = var1.setupHeader;
        IdentificationHeader var5 = var1.identificationHeader;
        Mode[] var7 = var4.modes;
--- 35,41 ----
     private static final float[][] windows = new float[8][];
  
  
!    protected AudioPacket(VorbisStream var1, BitInputStream var2) throws VorbisFormatException {
        SetupHeader var4 = var1.setupHeader;
        IdentificationHeader var5 = var1.identificationHeader;
        Mode[] var7 = var4.modes;
***************
*** 53,63 ****
              throw new VorbisFormatException("Reference to invalid mode in audio packet.");
           }
  
-          Mode var6 = this.mode;
           this.mapping = var8[this.mode.mapping];
           int[] var19 = this.mapping.getMagnitudes();
           int[] var21 = this.mapping.getAngles();
-          var6 = this.mode;
           this.blockFlag = this.mode.blockFlag;
           int var18 = var5.blockSize0;
           int var11 = var5.blockSize1;
--- 53,61 ----
***************
*** 167,182 ****
           int var3;
           float var4;
           for(var3 = 0; var3 < this.leftN; ++var3) {
!             var4 = MathHelper.sin((float)((double)((var4 = MathHelper.sin((float)(((double)var3 + 0.5D) / (double)this.leftN * 3.1415927410125732D / 2.0D))) * var4) * 1.5707963705062866D));
              var2[var3 + this.leftWindowStart] = var4;
           }
  
           for(var3 = this.leftWindowEnd; var3 < this.rightWindowStart; var2[var3++] = 1.0F) {
-             ;
           }
  
           for(var3 = 0; var3 < this.rightWindowEnd; ++var3) {
!             var4 = MathHelper.sin((float)((double)((var4 = MathHelper.sin((float)(((double)(this.rightWindowEnd - var3) - 0.5D) / (double)this.rightWindowEnd * 3.1415927410125732D / 2.0D))) * var4) * 1.5707963705062866D));
              var2[var3 + this.rightWindowStart] = var4;
           }
  
--- 165,179 ----
           int var3;
           float var4;
           for(var3 = 0; var3 < this.leftN; ++var3) {
!             var4 = MathHelper.sin((float)((var4 = MathHelper.sin((float)((var3 + 0.5D) / this.leftN * 3.1415927410125732D / 2.0D))) * var4 * 1.5707963705062866D));
              var2[var3 + this.leftWindowStart] = var4;
           }
  
           for(var3 = this.leftWindowEnd; var3 < this.rightWindowStart; var2[var3++] = 1.0F) {
           }
  
           for(var3 = 0; var3 < this.rightWindowEnd; ++var3) {
!             var4 = MathHelper.sin((float)((var4 = MathHelper.sin((float)((this.rightWindowEnd - var3 - 0.5D) / this.rightWindowEnd * 3.1415927410125732D / 2.0D))) * var4 * 1.5707963705062866D));
              var2[var3 + this.rightWindowStart] = var4;
           }
  
diff -crB src/de/jarnbjo/vorbis/CodeBook.java src2/de/jarnbjo/vorbis/CodeBook.java
*** src/de/jarnbjo/vorbis/CodeBook.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/CodeBook.java	2013-03-05 17:31:28.954808000 -0800
***************
*** 15,21 ****
     float[][] valueVector;
  
  
!    protected CodeBook(BitInputStream var1) {
        if(var1.getInt(24) != 5653314) {
           throw new VorbisFormatException("The code book sync pattern is not correct.");
        } else {
--- 15,21 ----
     float[][] valueVector;
  
  
!    protected CodeBook(BitInputStream var1) throws VorbisFormatException {
        if(var1.getInt(24) != 5653314) {
           throw new VorbisFormatException("The code book sync pattern is not correct.");
        } else {
***************
*** 63,76 ****
                 float var13 = Util.float32unpack(var1.getInt(32));
                 int var5 = var1.getInt(4) + 1;
                 boolean var6 = var1.getBit();
-                boolean var7 = false;
                 int var9;
                 int var10;
                 int var15;
                 if(var2 == 1) {
                    int var8 = this.dimensions;
                    var15 = this.entries;
!                   int var10000 = (var9 = (int)Math.pow(2.718281828459045D, Math.log((double)var15) / (double)var8)) + 1;
                    var10 = var8;
                    var8 = var10000;
  
--- 63,75 ----
                 float var13 = Util.float32unpack(var1.getInt(32));
                 int var5 = var1.getInt(4) + 1;
                 boolean var6 = var1.getBit();
                 int var9;
                 int var10;
                 int var15;
                 if(var2 == 1) {
                    int var8 = this.dimensions;
                    var15 = this.entries;
!                   int var10000 = (var9 = (int)Math.pow(2.718281828459045D, Math.log(var15) / var8)) + 1;
                    var10 = var8;
                    var8 = var10000;
  
***************
*** 100,106 ****
  
                       for(var5 = 0; var5 < this.dimensions; ++var5) {
                          var10 = var9 / var2 % var15;
!                         this.valueVector[var9][var5] = (float)var16[var10] * var13 + var14 + var12;
                          if(var6) {
                             var12 = this.valueVector[var9][var5];
                          }
--- 99,105 ----
  
                       for(var5 = 0; var5 < this.dimensions; ++var5) {
                          var10 = var9 / var2 % var15;
!                         this.valueVector[var9][var5] = var16[var10] * var13 + var14 + var12;
                          if(var6) {
                             var12 = this.valueVector[var9][var5];
                          }
diff -crB src/de/jarnbjo/vorbis/CommentHeader.java src2/de/jarnbjo/vorbis/CommentHeader.java
*** src/de/jarnbjo/vorbis/CommentHeader.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/CommentHeader.java	2013-03-05 17:11:21.682769000 -0800
***************
*** 2,16 ****
  
  import de.jarnbjo.util.io.BitInputStream;
  import de.jarnbjo.vorbis.VorbisFormatException;
  import java.util.ArrayList;
  import java.util.HashMap;
  
  public final class CommentHeader {
  
!    private HashMap comments = new HashMap();
  
  
!    public CommentHeader(BitInputStream var1) {
        if(var1.getLong(48) != 126896460427126L) {
           throw new VorbisFormatException("The identification header has an illegal leading.");
        } else {
--- 2,19 ----
  
  import de.jarnbjo.util.io.BitInputStream;
  import de.jarnbjo.vorbis.VorbisFormatException;
+ 
+ import java.io.UnsupportedEncodingException;
  import java.util.ArrayList;
  import java.util.HashMap;
+ import java.util.List;
  
  public final class CommentHeader {
  
!    private HashMap<String, List<String>> comments = new HashMap<String, List<String>>();
  
  
!    public CommentHeader(BitInputStream var1) throws VorbisFormatException, UnsupportedEncodingException {
        if(var1.getLong(48) != 126896460427126L) {
           throw new VorbisFormatException("The identification header has an illegal leading.");
        } else {
***************
*** 22,30 ****
              int var5 = (var4 = getString(var1)).indexOf(61);
              String var6 = var4.substring(0, var5);
              var4 = var4.substring(var5 + 1);
!             ArrayList var7;
!             if((var7 = (ArrayList)this.comments.get(var6)) == null) {
!                var7 = new ArrayList();
                 this.comments.put(var6, var7);
              }
  
--- 25,33 ----
              int var5 = (var4 = getString(var1)).indexOf(61);
              String var6 = var4.substring(0, var5);
              var4 = var4.substring(var5 + 1);
!             List<String> var7 = this.comments.get(var6);
!             if(var7 == null) {
!                var7 = new ArrayList<String>();
                 this.comments.put(var6, var7);
              }
  
***************
*** 35,41 ****
        }
     }
  
!    private static String getString(BitInputStream var0) {
        int var1;
        byte[] var2 = new byte[var1 = var0.getInt(32)];
  
--- 38,44 ----
        }
     }
  
!    private static String getString(BitInputStream var0) throws UnsupportedEncodingException {
        int var1;
        byte[] var2 = new byte[var1 = var0.getInt(32)];
  
diff -crB src/de/jarnbjo/vorbis/Floor0.java src2/de/jarnbjo/vorbis/Floor0.java
*** src/de/jarnbjo/vorbis/Floor0.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/Floor0.java	2013-03-05 15:59:38.478631000 -0800
***************
*** 11,17 ****
     private int[] bookList;
  
  
!    protected Floor0(BitInputStream var1, SetupHeader var2) {
        var1.getInt(8);
        var1.getInt(16);
        var1.getInt(16);
--- 11,17 ----
     private int[] bookList;
  
  
!    protected Floor0(BitInputStream var1, SetupHeader var2) throws VorbisFormatException {
        var1.getInt(8);
        var1.getInt(16);
        var1.getInt(16);
diff -crB src/de/jarnbjo/vorbis/Floor1.java src2/de/jarnbjo/vorbis/Floor1.java
*** src/de/jarnbjo/vorbis/Floor1.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/Floor1.java	2013-03-05 17:30:54.222807000 -0800
***************
*** 29,35 ****
  
     private Floor1() {}
  
!    protected Floor1(BitInputStream var1, SetupHeader var2) {
        this.maximumClass = -1;
        int var3 = var1.getInt(5);
        this.partitionClassList = new int[var3];
--- 29,35 ----
  
     private Floor1() {}
  
!    protected Floor1(BitInputStream var1, SetupHeader var2) throws VorbisFormatException {
        this.maximumClass = -1;
        int var3 = var1.getInt(5);
        this.partitionClassList = new int[var3];
***************
*** 68,91 ****
  
        this.multiplier = var1.getInt(2) + 1;
        this.rangeBits = var1.getInt(4);
!       ArrayList var7;
!       (var7 = new ArrayList()).add(new Integer(0));
!       var7.add(new Integer(1 << this.rangeBits));
  
        int var6;
        for(var5 = 0; var5 < var3; ++var5) {
           for(var6 = 0; var6 < this.classDimensions[this.partitionClassList[var5]]; ++var6) {
!             var7.add(new Integer(var1.getInt(this.rangeBits)));
           }
        }
  
        this.xList = new int[var7.size()];
        this.lowNeighbours = new int[this.xList.length];
        this.highNeighbours = new int[this.xList.length];
!       Iterator var8 = var7.iterator();
  
        for(var6 = 0; var6 < this.xList.length; ++var6) {
!          this.xList[var6] = ((Integer)var8.next()).intValue();
        }
  
        for(var6 = 0; var6 < this.xList.length; ++var6) {
--- 68,91 ----
  
        this.multiplier = var1.getInt(2) + 1;
        this.rangeBits = var1.getInt(4);
!       ArrayList<Integer> var7 = new ArrayList<Integer>();
!       var7.add(0);
!       var7.add(1 << this.rangeBits);
  
        int var6;
        for(var5 = 0; var5 < var3; ++var5) {
           for(var6 = 0; var6 < this.classDimensions[this.partitionClassList[var5]]; ++var6) {
!             var7.add(var1.getInt(this.rangeBits));
           }
        }
  
        this.xList = new int[var7.size()];
        this.lowNeighbours = new int[this.xList.length];
        this.highNeighbours = new int[this.xList.length];
!       Iterator<Integer> var8 = var7.iterator();
  
        for(var6 = 0; var6 < this.xList.length; ++var6) {
!          this.xList[var6] = var8.next();
        }
  
        for(var6 = 0; var6 < this.xList.length; ++var6) {
***************
*** 112,120 ****
              int var8 = this.classSubclasses[var6];
              int var9 = (1 << var8) - 1;
              int var10 = 0;
-             SetupHeader var11;
              if(var8 > 0) {
-                var11 = var1.setupHeader;
                 var10 = var2.getInt(var1.setupHeader.codeBooks[this.classMasterbooks[var6]].huffmanRoot);
              }
  
--- 112,118 ----
***************
*** 123,129 ****
                 var10 >>>= var8;
                 if(var13 >= 0) {
                    int var10001 = var12 + var4;
-                   var11 = var1.setupHeader;
                    var3.yList[var10001] = var2.getInt(var1.setupHeader.codeBooks[var13].huffmanRoot);
                 } else {
                    var3.yList[var12 + var4] = 0;
--- 121,126 ----
***************
*** 223,229 ****
        }
  
        for(float var18 = DB_STATIC_TABLE[var8]; var7 < var2 / 2; var1[var7++] = var18) {
-          ;
        }
  
     }
--- 220,225 ----
diff -crB src/de/jarnbjo/vorbis/Floor.java src2/de/jarnbjo/vorbis/Floor.java
*** src/de/jarnbjo/vorbis/Floor.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/Floor.java	2013-03-05 15:59:21.034631000 -0800
***************
*** 12,18 ****
     public static final float[] DB_STATIC_TABLE = new float[]{1.0649863E-7F, 1.1341951E-7F, 1.2079015E-7F, 1.2863978E-7F, 1.369995E-7F, 1.459025E-7F, 1.5538409E-7F, 1.6548181E-7F, 1.7623574E-7F, 1.8768856E-7F, 1.998856E-7F, 2.128753E-7F, 2.2670913E-7F, 2.4144197E-7F, 2.5713223E-7F, 2.7384212E-7F, 2.9163792E-7F, 3.1059022E-7F, 3.307741E-7F, 3.5226967E-7F, 3.7516213E-7F, 3.995423E-7F, 4.255068E-7F, 4.5315863E-7F, 4.8260745E-7F, 5.1397E-7F, 5.4737063E-7F, 5.829419E-7F, 6.208247E-7F, 6.611694E-7F, 7.041359E-7F, 7.4989464E-7F, 7.98627E-7F, 8.505263E-7F, 9.057983E-7F, 9.646621E-7F, 1.0273513E-6F, 1.0941144E-6F, 1.1652161E-6F, 1.2409384E-6F, 1.3215816E-6F, 1.4074654E-6F, 1.4989305E-6F, 1.5963394E-6F, 1.7000785E-6F, 1.8105592E-6F, 1.9282195E-6F, 2.053526E-6F, 2.1869757E-6F, 2.3290977E-6F, 2.4804558E-6F, 2.6416496E-6F, 2.813319E-6F, 2.9961443E-6F, 3.1908505E-6F, 3.39821E-6F, 3.619045E-6F, 3.8542307E-6F, 4.1047006E-6F, 4.371447E-6F, 4.6555283E-6F, 4.958071E-6F, 5.280274E-6F, 5.623416E-6F, 5.988857E-6F, 6.3780467E-6F, 6.7925284E-6F, 7.2339453E-6F, 7.704048E-6F, 8.2047E-6F, 8.737888E-6F, 9.305725E-6F, 9.910464E-6F, 1.0554501E-5F, 1.1240392E-5F, 1.1970856E-5F, 1.2748789E-5F, 1.3577278E-5F, 1.4459606E-5F, 1.5399271E-5F, 1.6400005E-5F, 1.7465769E-5F, 1.8600793E-5F, 1.9809577E-5F, 2.1096914E-5F, 2.2467912E-5F, 2.3928002E-5F, 2.5482977E-5F, 2.7139005E-5F, 2.890265E-5F, 3.078091E-5F, 3.2781227E-5F, 3.4911533E-5F, 3.718028E-5F, 3.9596467E-5F, 4.2169668E-5F, 4.491009E-5F, 4.7828602E-5F, 5.0936775E-5F, 5.424693E-5F, 5.7772202E-5F, 6.152657E-5F, 6.552491E-5F, 6.9783084E-5F, 7.4317984E-5F, 7.914758E-5F, 8.429104E-5F, 8.976875E-5F, 9.560242E-5F, 1.0181521E-4F, 1.0843174E-4F, 1.1547824E-4F, 1.2298267E-4F, 1.3097477E-4F, 1.3948625E-4F, 1.4855085E-4F, 1.5820454E-4F, 1.6848555E-4F, 1.7943469E-4F, 1.9109536E-4F, 2.0351382E-4F, 2.167393E-4F, 2.3082423E-4F, 2.4582449E-4F, 2.6179955E-4F, 2.7881275E-4F, 2.9693157E-4F, 3.1622787E-4F, 3.3677815E-4F, 3.5866388E-4F, 3.8197188E-4F, 4.0679457E-4F, 4.3323037E-4F, 4.613841E-4F, 4.913675E-4F, 5.2329927E-4F, 5.573062E-4F, 5.935231E-4F, 6.320936E-4F, 6.731706E-4F, 7.16917E-4F, 7.635063E-4F, 8.1312325E-4F, 8.6596457E-4F, 9.2223985E-4F, 9.821722E-4F, 0.0010459992F, 0.0011139743F, 0.0011863665F, 0.0012634633F, 0.0013455702F, 0.0014330129F, 0.0015261382F, 0.0016253153F, 0.0017309374F, 0.0018434235F, 0.0019632196F, 0.0020908006F, 0.0022266726F, 0.0023713743F, 0.0025254795F, 0.0026895993F, 0.0028643848F, 0.0030505287F, 0.003248769F, 0.0034598925F, 0.0036847359F, 0.0039241905F, 0.0041792067F, 0.004450795F, 0.004740033F, 0.005048067F, 0.0053761187F, 0.005725489F, 0.0060975635F, 0.0064938175F, 0.0069158226F, 0.0073652514F, 0.007843887F, 0.008353627F, 0.008896492F, 0.009474637F, 0.010090352F, 0.01074608F, 0.011444421F, 0.012188144F, 0.012980198F, 0.013823725F, 0.014722068F, 0.015678791F, 0.016697686F, 0.017782796F, 0.018938422F, 0.020169148F, 0.021479854F, 0.022875736F, 0.02436233F, 0.025945531F, 0.027631618F, 0.029427277F, 0.031339627F, 0.03337625F, 0.035545226F, 0.037855156F, 0.0403152F, 0.042935107F, 0.045725275F, 0.048696756F, 0.05186135F, 0.05523159F, 0.05882085F, 0.062643364F, 0.06671428F, 0.07104975F, 0.075666964F, 0.08058423F, 0.08582105F, 0.09139818F, 0.097337745F, 0.1036633F, 0.11039993F, 0.11757434F, 0.12521498F, 0.13335215F, 0.14201812F, 0.15124726F, 0.16107617F, 0.1715438F, 0.18269168F, 0.19456401F, 0.20720787F, 0.22067343F, 0.23501402F, 0.25028655F, 0.26655158F, 0.28387362F, 0.3023213F, 0.32196787F, 0.34289113F, 0.36517414F, 0.3889052F, 0.41417846F, 0.44109413F, 0.4697589F, 0.50028646F, 0.53279793F, 0.5674221F, 0.6042964F, 0.64356697F, 0.6853896F, 0.72993004F, 0.777365F, 0.8278826F, 0.88168305F, 0.9389798F, 1.0F};
  
  
!    static Floor createInstance(BitInputStream var0, SetupHeader var1) {
        int var2;
        switch(var2 = var0.getInt(16)) {
        case 0:
--- 12,18 ----
     public static final float[] DB_STATIC_TABLE = new float[]{1.0649863E-7F, 1.1341951E-7F, 1.2079015E-7F, 1.2863978E-7F, 1.369995E-7F, 1.459025E-7F, 1.5538409E-7F, 1.6548181E-7F, 1.7623574E-7F, 1.8768856E-7F, 1.998856E-7F, 2.128753E-7F, 2.2670913E-7F, 2.4144197E-7F, 2.5713223E-7F, 2.7384212E-7F, 2.9163792E-7F, 3.1059022E-7F, 3.307741E-7F, 3.5226967E-7F, 3.7516213E-7F, 3.995423E-7F, 4.255068E-7F, 4.5315863E-7F, 4.8260745E-7F, 5.1397E-7F, 5.4737063E-7F, 5.829419E-7F, 6.208247E-7F, 6.611694E-7F, 7.041359E-7F, 7.4989464E-7F, 7.98627E-7F, 8.505263E-7F, 9.057983E-7F, 9.646621E-7F, 1.0273513E-6F, 1.0941144E-6F, 1.1652161E-6F, 1.2409384E-6F, 1.3215816E-6F, 1.4074654E-6F, 1.4989305E-6F, 1.5963394E-6F, 1.7000785E-6F, 1.8105592E-6F, 1.9282195E-6F, 2.053526E-6F, 2.1869757E-6F, 2.3290977E-6F, 2.4804558E-6F, 2.6416496E-6F, 2.813319E-6F, 2.9961443E-6F, 3.1908505E-6F, 3.39821E-6F, 3.619045E-6F, 3.8542307E-6F, 4.1047006E-6F, 4.371447E-6F, 4.6555283E-6F, 4.958071E-6F, 5.280274E-6F, 5.623416E-6F, 5.988857E-6F, 6.3780467E-6F, 6.7925284E-6F, 7.2339453E-6F, 7.704048E-6F, 8.2047E-6F, 8.737888E-6F, 9.305725E-6F, 9.910464E-6F, 1.0554501E-5F, 1.1240392E-5F, 1.1970856E-5F, 1.2748789E-5F, 1.3577278E-5F, 1.4459606E-5F, 1.5399271E-5F, 1.6400005E-5F, 1.7465769E-5F, 1.8600793E-5F, 1.9809577E-5F, 2.1096914E-5F, 2.2467912E-5F, 2.3928002E-5F, 2.5482977E-5F, 2.7139005E-5F, 2.890265E-5F, 3.078091E-5F, 3.2781227E-5F, 3.4911533E-5F, 3.718028E-5F, 3.9596467E-5F, 4.2169668E-5F, 4.491009E-5F, 4.7828602E-5F, 5.0936775E-5F, 5.424693E-5F, 5.7772202E-5F, 6.152657E-5F, 6.552491E-5F, 6.9783084E-5F, 7.4317984E-5F, 7.914758E-5F, 8.429104E-5F, 8.976875E-5F, 9.560242E-5F, 1.0181521E-4F, 1.0843174E-4F, 1.1547824E-4F, 1.2298267E-4F, 1.3097477E-4F, 1.3948625E-4F, 1.4855085E-4F, 1.5820454E-4F, 1.6848555E-4F, 1.7943469E-4F, 1.9109536E-4F, 2.0351382E-4F, 2.167393E-4F, 2.3082423E-4F, 2.4582449E-4F, 2.6179955E-4F, 2.7881275E-4F, 2.9693157E-4F, 3.1622787E-4F, 3.3677815E-4F, 3.5866388E-4F, 3.8197188E-4F, 4.0679457E-4F, 4.3323037E-4F, 4.613841E-4F, 4.913675E-4F, 5.2329927E-4F, 5.573062E-4F, 5.935231E-4F, 6.320936E-4F, 6.731706E-4F, 7.16917E-4F, 7.635063E-4F, 8.1312325E-4F, 8.6596457E-4F, 9.2223985E-4F, 9.821722E-4F, 0.0010459992F, 0.0011139743F, 0.0011863665F, 0.0012634633F, 0.0013455702F, 0.0014330129F, 0.0015261382F, 0.0016253153F, 0.0017309374F, 0.0018434235F, 0.0019632196F, 0.0020908006F, 0.0022266726F, 0.0023713743F, 0.0025254795F, 0.0026895993F, 0.0028643848F, 0.0030505287F, 0.003248769F, 0.0034598925F, 0.0036847359F, 0.0039241905F, 0.0041792067F, 0.004450795F, 0.004740033F, 0.005048067F, 0.0053761187F, 0.005725489F, 0.0060975635F, 0.0064938175F, 0.0069158226F, 0.0073652514F, 0.007843887F, 0.008353627F, 0.008896492F, 0.009474637F, 0.010090352F, 0.01074608F, 0.011444421F, 0.012188144F, 0.012980198F, 0.013823725F, 0.014722068F, 0.015678791F, 0.016697686F, 0.017782796F, 0.018938422F, 0.020169148F, 0.021479854F, 0.022875736F, 0.02436233F, 0.025945531F, 0.027631618F, 0.029427277F, 0.031339627F, 0.03337625F, 0.035545226F, 0.037855156F, 0.0403152F, 0.042935107F, 0.045725275F, 0.048696756F, 0.05186135F, 0.05523159F, 0.05882085F, 0.062643364F, 0.06671428F, 0.07104975F, 0.075666964F, 0.08058423F, 0.08582105F, 0.09139818F, 0.097337745F, 0.1036633F, 0.11039993F, 0.11757434F, 0.12521498F, 0.13335215F, 0.14201812F, 0.15124726F, 0.16107617F, 0.1715438F, 0.18269168F, 0.19456401F, 0.20720787F, 0.22067343F, 0.23501402F, 0.25028655F, 0.26655158F, 0.28387362F, 0.3023213F, 0.32196787F, 0.34289113F, 0.36517414F, 0.3889052F, 0.41417846F, 0.44109413F, 0.4697589F, 0.50028646F, 0.53279793F, 0.5674221F, 0.6042964F, 0.64356697F, 0.6853896F, 0.72993004F, 0.777365F, 0.8278826F, 0.88168305F, 0.9389798F, 1.0F};
  
  
!    static Floor createInstance(BitInputStream var0, SetupHeader var1) throws VorbisFormatException {
        int var2;
        switch(var2 = var0.getInt(16)) {
        case 0:
diff -crB src/de/jarnbjo/vorbis/IdentificationHeader.java src2/de/jarnbjo/vorbis/IdentificationHeader.java
*** src/de/jarnbjo/vorbis/IdentificationHeader.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/IdentificationHeader.java	2013-03-05 15:59:49.238632000 -0800
***************
*** 13,19 ****
     MdctFloat[] mdct = new MdctFloat[2];
  
  
!    public IdentificationHeader(BitInputStream var1) {
        if(var1.getLong(48) != 126896460427126L) {
           throw new VorbisFormatException("The identification header has an illegal leading.");
        } else {
--- 13,19 ----
     MdctFloat[] mdct = new MdctFloat[2];
  
  
!    public IdentificationHeader(BitInputStream var1) throws VorbisFormatException {
        if(var1.getLong(48) != 126896460427126L) {
           throw new VorbisFormatException("The identification header has an illegal leading.");
        } else {
diff -crB src/de/jarnbjo/vorbis/Look.java src2/de/jarnbjo/vorbis/Look.java
*** src/de/jarnbjo/vorbis/Look.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/Look.java	2013-03-05 17:08:12.518763000 -0800
***************
*** 17,29 ****
     int[][] decodemap;
  
  
!    protected Look(Residue var1, VorbisStream var2, Mode var3) {
!       boolean var10 = false;
        int var4 = 0;
        this.map = var1.getClassifications();
        this.fullbooks = var2.setupHeader.codeBooks;
        this.phrasebook = this.fullbooks[var1.getClassBook()];
-       CodeBook var8 = this.phrasebook;
        int var11 = this.phrasebook.dimensions;
        this.partbooks = new int[this.map][];
  
--- 17,27 ----
     int[][] decodemap;
  
  
!    protected Look(Residue var1, VorbisStream var2, Mode var3) {
        int var4 = 0;
        this.map = var1.getClassifications();
        this.fullbooks = var2.setupHeader.codeBooks;
        this.phrasebook = this.fullbooks[var1.getClassBook()];
        int var11 = this.phrasebook.dimensions;
        this.partbooks = new int[this.map][];
  
***************
*** 46,52 ****
           }
        }
  
!       this.partvals = (int)Math.rint(Math.pow((double)this.map, (double)var11));
        this.parts = var4;
        this.decodemap = new int[this.partvals][];
  
--- 44,50 ----
           }
        }
  
!       this.partvals = (int)Math.rint(Math.pow(this.map, var11));
        this.parts = var4;
        this.decodemap = new int[this.partvals][];
  
diff -crB src/de/jarnbjo/vorbis/Mapping0.java src2/de/jarnbjo/vorbis/Mapping0.java
*** src/de/jarnbjo/vorbis/Mapping0.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/Mapping0.java	2013-03-05 16:00:00.242632000 -0800
***************
*** 16,22 ****
     private int[] submapResidues;
  
  
!    protected Mapping0(VorbisStream var1, BitInputStream var2, SetupHeader var3) {
        int var4 = 1;
        if(var2.getBit()) {
           var4 = var2.getInt(4) + 1;
--- 16,22 ----
     private int[] submapResidues;
  
  
!    protected Mapping0(VorbisStream var1, BitInputStream var2, SetupHeader var3) throws VorbisFormatException {
        int var4 = 1;
        if(var2.getBit()) {
           var4 = var2.getInt(4) + 1;
diff -crB src/de/jarnbjo/vorbis/Mapping.java src2/de/jarnbjo/vorbis/Mapping.java
*** src/de/jarnbjo/vorbis/Mapping.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/Mapping.java	2013-03-05 15:59:53.462632000 -0800
***************
*** 8,14 ****
  
  abstract class Mapping {
  
!    protected static Mapping createInstance(VorbisStream var0, BitInputStream var1, SetupHeader var2) {
        int var3;
        switch(var3 = var1.getInt(16)) {
        case 0:
--- 8,14 ----
  
  abstract class Mapping {
  
!    protected static Mapping createInstance(VorbisStream var0, BitInputStream var1, SetupHeader var2) throws VorbisFormatException {
        int var3;
        switch(var3 = var1.getInt(16)) {
        case 0:
diff -crB src/de/jarnbjo/vorbis/MdctFloat.java src2/de/jarnbjo/vorbis/MdctFloat.java
*** src/de/jarnbjo/vorbis/MdctFloat.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/MdctFloat.java	2013-03-05 16:31:57.702693000 -0800
***************
*** 19,25 ****
     protected MdctFloat(int var1) {
        this.bitrev = new int[var1 / 4];
        this.trig = new float[var1 + var1 / 4];
!       this.log2n = (int)Math.rint(Math.log((double)var1) / Math.log(2.0D));
        this.n = var1;
        int var2;
        int var3 = (var2 = 0 + var1 / 2) + 1;
--- 19,25 ----
     protected MdctFloat(int var1) {
        this.bitrev = new int[var1 / 4];
        this.trig = new float[var1 + var1 / 4];
!       this.log2n = (int)Math.rint(Math.log(var1) / Math.log(2.0D));
        this.n = var1;
        int var2;
        int var3 = (var2 = 0 + var1 / 2) + 1;
***************
*** 28,42 ****
  
        int var6;
        for(var6 = 0; var6 < var1 / 4; ++var6) {
!          this.trig[0 + (var6 << 1)] = MathHelper.cos(3.1415927F / (float)var1 * (float)(var6 * 4));
!          this.trig[1 + (var6 << 1)] = -MathHelper.sin(3.1415927F / (float)var1 * (float)(var6 * 4));
!          this.trig[var2 + (var6 << 1)] = MathHelper.cos(3.1415927F / (float)(var1 * 2) * (float)(var6 * 2 + 1));
!          this.trig[var3 + (var6 << 1)] = MathHelper.sin(3.1415927F / (float)(var1 * 2) * (float)(var6 * 2 + 1));
        }
  
        for(var6 = 0; var6 < var1 / 8; ++var6) {
!          this.trig[var4 + (var6 << 1)] = MathHelper.cos(3.1415927F / (float)var1 * (float)(var6 * 4 + 2));
!          this.trig[var5 + (var6 << 1)] = -MathHelper.sin(3.1415927F / (float)var1 * (float)(var6 * 4 + 2));
        }
  
        var6 = (1 << this.log2n - 1) - 1;
--- 28,42 ----
  
        int var6;
        for(var6 = 0; var6 < var1 / 4; ++var6) {
!          this.trig[0 + (var6 << 1)] = MathHelper.cos(3.1415927F / var1 * (var6 * 4));
!          this.trig[1 + (var6 << 1)] = -MathHelper.sin(3.1415927F / var1 * (var6 * 4));
!          this.trig[var2 + (var6 << 1)] = MathHelper.cos(3.1415927F / (var1 * 2) * (var6 * 2 + 1));
!          this.trig[var3 + (var6 << 1)] = MathHelper.sin(3.1415927F / (var1 * 2) * (var6 * 2 + 1));
        }
  
        for(var6 = 0; var6 < var1 / 8; ++var6) {
!          this.trig[var4 + (var6 << 1)] = MathHelper.cos(3.1415927F / var1 * (var6 * 4 + 2));
!          this.trig[var5 + (var6 << 1)] = -MathHelper.sin(3.1415927F / var1 * (var6 * 4 + 2));
        }
  
        var6 = (1 << this.log2n - 1) - 1;
***************
*** 57,64 ****
  
     }
  
!    protected final synchronized void imdct(float[] var1, float[] var2, int[] var3) {
!       var1 = var1;
        if(this._x.length < this.n / 2) {
           this._x = new float[this.n / 2];
        }
--- 57,63 ----
  
     }
  
!    protected final synchronized void imdct(float[] var1, float[] var2, int[] var3) {
        if(this._x.length < this.n / 2) {
           this._x = new float[this.n / 2];
        }
***************
*** 109,116 ****
        var10 = var7;
        var9 = var6;
        var8 = this.n;
-       var5 = var5;
-       var4 = var4;
        MdctFloat var25 = this;
        var12 = var7;
        int var13 = 0;
--- 108,113 ----
diff -crB src/de/jarnbjo/vorbis/Mode.java src2/de/jarnbjo/vorbis/Mode.java
*** src/de/jarnbjo/vorbis/Mode.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/Mode.java	2013-03-05 16:00:04.818632000 -0800
***************
*** 12,18 ****
     int mapping;
  
  
!    protected Mode(BitInputStream var1, SetupHeader var2) {
        this.blockFlag = var1.getBit();
        this.windowType = var1.getInt(16);
        this.transformType = var1.getInt(16);
--- 12,18 ----
     int mapping;
  
  
!    protected Mode(BitInputStream var1, SetupHeader var2) throws VorbisFormatException {
        this.blockFlag = var1.getBit();
        this.windowType = var1.getInt(16);
        this.transformType = var1.getInt(16);
diff -crB src/de/jarnbjo/vorbis/Residue0.java src2/de/jarnbjo/vorbis/Residue0.java
*** src/de/jarnbjo/vorbis/Residue0.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/Residue0.java	2013-03-05 16:00:16.022633000 -0800
***************
*** 8,14 ****
  
  final class Residue0 extends Residue {
  
!    protected Residue0(BitInputStream var1, SetupHeader var2) {
        super(var1, var2);
     }
  
--- 8,14 ----
  
  final class Residue0 extends Residue {
  
!    protected Residue0(BitInputStream var1, SetupHeader var2) throws VorbisFormatException {
        super(var1, var2);
     }
  
diff -crB src/de/jarnbjo/vorbis/Residue2.java src2/de/jarnbjo/vorbis/Residue2.java
*** src/de/jarnbjo/vorbis/Residue2.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/Residue2.java	2013-03-05 17:01:28.430750000 -0800
***************
*** 13,23 ****
  
     private Residue2() {}
  
!    protected Residue2(BitInputStream var1, SetupHeader var2) {
        super(var1, var2);
     }
  
!    protected final void decodeResidue(VorbisStream var1, BitInputStream var2, Mode var3, boolean[] var4, float[][] var5) {
        Look var22 = this.getLook(var1, var3);
        int var6 = (this.getEnd() - this.getBegin()) / this.getPartitionSize();
        int var7 = this.getPartitionSize();
--- 13,23 ----
  
     private Residue2() {}
  
!    protected Residue2(BitInputStream var1, SetupHeader var2) throws VorbisFormatException {
        super(var1, var2);
     }
  
!    protected final void decodeResidue(VorbisStream var1, BitInputStream var2, Mode var3, boolean[] var4, float[][] var5) throws VorbisFormatException {
        Look var22 = this.getLook(var1, var3);
        int var6 = (this.getEnd() - this.getBegin()) / this.getPartitionSize();
        int var7 = this.getPartitionSize();
***************
*** 62,72 ****
              for(var11 = 0; var11 < var9 && var24 < var6; ++var24) {
                 int var14 = this.begin + var24 * var7;
                 if((this.cascade[var27[var10][var11]] & 1 << var23) != 0) {
-                   SetupHeader var25 = var1.setupHeader;
                    if((var8 = var1.setupHeader.codeBooks[var22.partbooks[var27[var10][var11]][var23]]) != null) {
                       BitInputStream var17 = var2;
                       float[][] var28 = var26;
-                      var8 = var8;
                       int var18 = 0;
                       int var19;
                       if((var19 = var26.length) != 0) {
--- 62,70 ----
diff -crB src/de/jarnbjo/vorbis/Residue.java src2/de/jarnbjo/vorbis/Residue.java
*** src/de/jarnbjo/vorbis/Residue.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/Residue.java	2013-03-05 17:27:58.494801000 -0800
***************
*** 19,30 ****
     private int classBook;
     protected int[] cascade;
     private int[][] books;
!    private HashMap looks = new HashMap();
  
  
     protected Residue() {}
  
!    protected Residue(BitInputStream var1, SetupHeader var2) {
        this.begin = var1.getInt(24);
        this.end = var1.getInt(24);
        this.partitionSize = var1.getInt(24) + 1;
--- 19,30 ----
     private int classBook;
     protected int[] cascade;
     private int[][] books;
!    private HashMap<Mode, Look> looks = new HashMap<Mode, Look>();
  
  
     protected Residue() {}
  
!    protected Residue(BitInputStream var1, SetupHeader var2) throws VorbisFormatException {
        this.begin = var1.getInt(24);
        this.end = var1.getInt(24);
        this.partitionSize = var1.getInt(24) + 1;
***************
*** 36,42 ****
        int var4;
        for(var3 = 0; var3 < this.classifications; ++var3) {
           var4 = 0;
-          boolean var5 = false;
           int var6 = var1.getInt(3);
           if(var1.getBit()) {
              var4 = var1.getInt(5);
--- 36,41 ----
***************
*** 60,66 ****
  
     }
  
!    protected static Residue createInstance(BitInputStream var0, SetupHeader var1) {
        int var2;
        switch(var2 = var0.getInt(16)) {
        case 0:
--- 59,65 ----
  
     }
  
!    protected static Residue createInstance(BitInputStream var0, SetupHeader var1) throws VorbisFormatException {
        int var2;
        switch(var2 = var0.getInt(16)) {
        case 0:
***************
*** 74,80 ****
        }
     }
  
!    protected abstract void decodeResidue(VorbisStream var1, BitInputStream var2, Mode var3, boolean[] var4, float[][] var5);
  
     protected final int getBegin() {
        return this.begin;
--- 73,79 ----
        }
     }
  
!    protected abstract void decodeResidue(VorbisStream var1, BitInputStream var2, Mode var3, boolean[] var4, float[][] var5) throws VorbisFormatException;
  
     protected final int getBegin() {
        return this.begin;
***************
*** 115,122 ****
     }
  
     protected final Look getLook(VorbisStream var1, Mode var2) {
!       Look var3;
!       if((var3 = (Look)this.looks.get(var2)) == null) {
           var3 = new Look(this, var1, var2);
           this.looks.put(var2, var3);
        }
--- 114,121 ----
     }
  
     protected final Look getLook(VorbisStream var1, Mode var2) {
!       Look var3 = this.looks.get(var2);
!       if(var3 == null) {
           var3 = new Look(this, var1, var2);
           this.looks.put(var2, var3);
        }
diff -crB src/de/jarnbjo/vorbis/SetupHeader.java src2/de/jarnbjo/vorbis/SetupHeader.java
*** src/de/jarnbjo/vorbis/SetupHeader.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/SetupHeader.java	2013-03-05 16:00:43.002633000 -0800
***************
*** 18,24 ****
     Mode[] modes;
  
  
!    public SetupHeader(VorbisStream var1, BitInputStream var2) {
        if(var2.getLong(48) != 126896460427126L) {
           throw new VorbisFormatException("The setup header has an illegal leading.");
        } else {
--- 18,24 ----
     Mode[] modes;
  
  
!    public SetupHeader(VorbisStream var1, BitInputStream var2) throws VorbisFormatException {
        if(var2.getLong(48) != 126896460427126L) {
           throw new VorbisFormatException("The setup header has an illegal leading.");
        } else {
diff -crB src/de/jarnbjo/vorbis/Util.java src2/de/jarnbjo/vorbis/Util.java
*** src/de/jarnbjo/vorbis/Util.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/Util.java	2013-03-05 17:28:17.586802000 -0800
***************
*** 14,26 ****
     }
  
     public static final float float32unpack(int var0) {
!       float var1 = (float)(var0 & 2097151);
!       float var2 = (float)((var0 & 2145386496) >> 21);
        if((var0 & Integer.MIN_VALUE) != 0) {
           var1 = -var1;
        }
  
!       return var1 * (float)Math.pow(2.0D, (double)var2 - 788.0D);
     }
  
     public static final int lowNeighbour(int[] var0, int var1) {
--- 14,26 ----
     }
  
     public static final float float32unpack(int var0) {
!       float var1 = var0 & 2097151;
!       float var2 = (var0 & 2145386496) >> 21;
        if((var0 & Integer.MIN_VALUE) != 0) {
           var1 = -var1;
        }
  
!       return var1 * (float)Math.pow(2.0D, var2 - 788.0D);
     }
  
     public static final int lowNeighbour(int[] var0, int var1) {
***************
*** 56,62 ****
        int var5 = var2 - var0;
        int var6 = var3 / var5;
        int var7 = var3 < 0?var6 - 1:var6 + 1;
-       var1 = var1;
        int var9 = 0;
        var3 = (var3 < 0?-var3:var3) - (var6 > 0?var6 * var5:-var6 * var5);
        var4[var0] *= Floor.DB_STATIC_TABLE[var1];
--- 56,61 ----
diff -crB src/de/jarnbjo/vorbis/VorbisStream.java src2/de/jarnbjo/vorbis/VorbisStream.java
*** src/de/jarnbjo/vorbis/VorbisStream.java	2013-03-05 19:01:06.000000000 -0800
--- src2/de/jarnbjo/vorbis/VorbisStream.java	2013-03-05 17:02:42.646752000 -0800
***************
*** 7,13 ****
  import de.jarnbjo.vorbis.IdentificationHeader;
  import de.jarnbjo.vorbis.SetupHeader;
  import de.jarnbjo.vorbis.VorbisFormatException;
! import java.util.LinkedList;
  
  public final class VorbisStream {
  
--- 7,15 ----
  import de.jarnbjo.vorbis.IdentificationHeader;
  import de.jarnbjo.vorbis.SetupHeader;
  import de.jarnbjo.vorbis.VorbisFormatException;
! 
! import java.io.IOException;
! import java.io.UnsupportedEncodingException;
  
  public final class VorbisStream {
  
***************
*** 20,39 ****
     private int currentPcmIndex;
     private int currentPcmLimit;
     private Object streamLock;
-    private int pageCounter;
-    private long currentGranulePosition;
  
  
!    public VorbisStream() {
!       new LinkedList();
        this.streamLock = new Object();
-       this.pageCounter = 0;
     }
  
!    public VorbisStream(LogicalOggStreamImpl var1) {
!       new LinkedList();
        this.streamLock = new Object();
-       this.pageCounter = 0;
        this.oggStream = var1;
  
        for(int var2 = 0; var2 < 3; ++var2) {
--- 22,35 ----
     private int currentPcmIndex;
     private int currentPcmLimit;
     private Object streamLock;
  
  
!    public VorbisStream() {
        this.streamLock = new Object();
     }
  
!    public VorbisStream(LogicalOggStreamImpl var1) throws UnsupportedEncodingException, IOException {
        this.streamLock = new Object();
        this.oggStream = var1;
  
        for(int var2 = 0; var2 < 3; ++var2) {
***************
*** 60,73 ****
        } else if(this.setupHeader == null) {
           throw new VorbisFormatException("The file has no setup header.");
        } else {
-          IdentificationHeader var5 = this.identificationHeader;
-          var5 = this.identificationHeader;
           this.currentPcm = new byte[this.identificationHeader.channels * this.identificationHeader.blockSize1 << 1];
        }
     }
  
!    public final int readPcm(byte[] var1, int var2, int var3) {
!       Object var4 = this.streamLock;
        synchronized(this.streamLock) {
           if(this.lastAudioPacket == null) {
              this.lastAudioPacket = this.getNextAudioPacket();
--- 56,66 ----
        } else if(this.setupHeader == null) {
           throw new VorbisFormatException("The file has no setup header.");
        } else {
           this.currentPcm = new byte[this.identificationHeader.channels * this.identificationHeader.blockSize1 << 1];
        }
     }
  
!    public final int readPcm(byte[] var1, int var2, int var3) throws IOException {
        synchronized(this.streamLock) {
           if(this.lastAudioPacket == null) {
              this.lastAudioPacket = this.getNextAudioPacket();
***************
*** 79,85 ****
              try {
                 var5.getPcm(this.lastAudioPacket, this.currentPcm);
                 int var10001 = var5.getNumberOfSamples();
-                IdentificationHeader var6 = this.identificationHeader;
                 this.currentPcmLimit = var10001 * this.identificationHeader.channels << 1;
              } catch (ArrayIndexOutOfBoundsException var8) {
                 return 0;
--- 72,77 ----
***************
*** 90,96 ****
           }
  
           int var10 = 0;
-          boolean var12 = false;
           int var7 = 0;
  
           int var11;
--- 82,87 ----
***************
*** 104,111 ****
        }
     }
  
!    private AudioPacket getNextAudioPacket() {
!       ++this.pageCounter;
        byte[] var1 = this.oggStream.getNextOggPacket();
        AudioPacket var2 = null;
  
--- 95,101 ----
        }
     }
  
!    private AudioPacket getNextAudioPacket() throws IOException {
        byte[] var1 = this.oggStream.getNextOggPacket();
        AudioPacket var2 = null;
  
***************
*** 113,123 ****
           try {
              var2 = new AudioPacket(this, new BitInputStream(var1));
           } catch (ArrayIndexOutOfBoundsException var3) {
-             ;
           }
!       }
! 
!       this.currentGranulePosition += (long)var2.getNumberOfSamples();
        return var2;
     }
  }
--- 103,111 ----
           try {
              var2 = new AudioPacket(this, new BitInputStream(var1));
           } catch (ArrayIndexOutOfBoundsException var3) {
           }
!       }
!       
        return var2;
     }
  }
